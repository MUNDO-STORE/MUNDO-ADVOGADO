<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Inteligência Forense Pro - IA jurídica que economiza 80% do tempo do advogado na elaboração de petições. Análise automática de casos e geração de documentos prontos.">
    <title>Inteligência Forense Pro | IA Jurídica para Advogados</title>
    
    <!-- Bibliotecas externas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.21/mammoth.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #0a192f;
            --secondary: #172a46;
            --accent: #c5a059;
            --accent-light: #d4b47c;
            --danger: #ff4757;
            --success: #2ecc71;
            --text-light: #e6f1ff;
            --text-gray: #8892b0;
            --glass: rgba(255, 255, 255, 0.05);
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            margin: 0;
            background: var(--primary);
            color: var(--text-light);
            overflow-x: hidden;
            line-height: 1.6;
        }
        
        .bg-animated {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(135deg, #0a192f 0%, #112240 50%, #1a2a3a 100%);
        }
        
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.03;
            background-image: 
                radial-gradient(circle at 25% 25%, var(--accent) 2px, transparent 2px),
                radial-gradient(circle at 75% 75%, var(--accent) 2px, transparent 2px);
            background-size: 80px 80px;
        }
        
        .header {
            background: rgba(10, 25, 47, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(197, 160, 89, 0.2);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            max-width: 1800px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-icon {
            color: var(--accent);
            font-size: 24px;
        }
        
        .logo-text {
            font-weight: 700;
            font-size: 1.5rem;
            background: linear-gradient(to right, var(--accent), var(--accent-light));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 0.5px;
        }
        
        .logo-subtitle {
            font-size: 0.7rem;
            color: var(--text-gray);
            font-weight: 500;
            margin-top: -5px;
        }
        
        /* Botões adicionais acima do Vade Mecum */
        .additional-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .btn-dictionary {
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            border: none;
        }
        
        .btn-academic {
            background: linear-gradient(to right, #9b59b6, #8e44ad);
            color: white;
            border: none;
        }
        
        .container {
            width: 100%;
            max-width: 1800px;
            display: grid;
            grid-template-columns: 460px 1fr;
            gap: 25px;
            padding: 25px;
            margin: 0 auto;
        }
        
        /* SIDEBAR */
        .sidebar {
            background: rgba(23, 42, 70, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(197, 160, 89, 0.15);
            padding: 25px;
            border-radius: 16px;
            height: calc(100vh - 100px);
            overflow-y: auto;
            position: sticky;
            top: 90px;
            display: flex;
            flex-direction: column;
            box-shadow: var(--shadow);
        }
        
        .section-title {
            color: var(--accent);
            font-size: 0.85rem;
            border-bottom: 1px solid rgba(197, 160, 89, 0.3);
            margin: 20px 0 12px;
            padding-bottom: 8px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .section-title i {
            font-size: 0.9rem;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            font-size: 0.75rem;
            color: var(--text-gray);
            margin-bottom: 6px;
            font-weight: 600;
        }
        
        .input-group input, .input-group textarea, .input-group select {
            width: 100%;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 8px;
            font-size: 0.9rem;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .input-group input:focus, .input-group textarea:focus, .input-group select:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(197, 160, 89, 0.2);
        }
        
        .input-group textarea {
            resize: vertical;
            min-height: 120px;
            font-family: 'Inter', sans-serif;
        }
        
        /* PAINEL DE ANÁLISE */
        .veredito-panel {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(197, 160, 89, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .veredito-header {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .score-container {
            margin-bottom: 15px;
        }
        
        .score-label {
            font-size: 0.7rem;
            color: var(--text-gray);
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }
        
        .score-bar {
            background: rgba(255, 255, 255, 0.1);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .score-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease-in-out;
        }
        
        .veredito-comentario {
            font-size: 0.75rem;
            color: var(--text-light);
            line-height: 1.4;
            padding: 12px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
            border-left: 3px solid var(--accent);
        }
        
        /* ÁREA PRINCIPAL */
        .main-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .toolbar {
            width: 100%;
            max-width: 210mm;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px 20px;
            background: rgba(23, 42, 70, 0.7);
            border-radius: 12px;
            box-shadow: var(--shadow);
        }
        
        .area-info {
            color: var(--accent);
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .area-tag {
            background: rgba(197, 160, 89, 0.15);
            color: var(--accent-light);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        /* Relógio e clima */
        .weather-time {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 0.85rem;
        }
        
        .weather-widget, .time-widget {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .weather-icon {
            font-size: 1.2rem;
            color: var(--accent);
        }
        
        .temp {
            font-weight: 700;
            color: var(--accent-light);
        }
        
        #editor-a4 {
            background: white;
            color: black;
            width: 210mm;
            min-height: 297mm;
            padding: 30mm 25mm;
            box-shadow: var(--shadow);
            font-family: 'Times New Roman', Times, serif;
            font-size: 12pt;
            line-height: 1.6;
            text-align: justify;
            outline: none;
            border-radius: 8px;
            overflow: auto;
            transition: all 0.3s ease;
        }
        
        #editor-a4:focus {
            box-shadow: 0 0 0 2px rgba(197, 160, 89, 0.3), var(--shadow);
        }
        
        /* BOTÕES */
        .btn {
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            width: 100%;
            margin-top: 10px;
            font-size: 0.85rem;
            letter-spacing: 0.3px;
        }
        
        .btn-primary {
            background: linear-gradient(to right, var(--accent), var(--accent-light));
            color: #000;
            font-weight: 700;
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--accent);
            border: 1px solid var(--accent);
        }
        
        .btn-upload {
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-light);
            border: 1px dashed var(--accent);
        }
        
        .btn-danger {
            background: transparent;
            border: 1px solid var(--danger);
            color: var(--danger);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn-primary:hover {
            background: linear-gradient(to right, var(--accent-light), var(--accent));
        }
        
        .btn-secondary:hover {
            background: rgba(197, 160, 89, 0.1);
        }
        
        .btn-danger:hover {
            background: rgba(255, 71, 87, 0.1);
        }
        
        /* MODAIS */
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 800px;
            background: var(--secondary);
            border: 1px solid var(--accent);
            border-radius: 16px;
            z-index: 2000;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: modalFadeIn 0.3s ease;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translate(-50%, -60%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(197, 160, 89, 0.2);
        }
        
        .modal-title {
            color: var(--accent);
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .modal-close {
            color: var(--text-gray);
            font-size: 1.2rem;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .modal-close:hover {
            color: var(--accent);
        }
        
        .modal-content {
            height: 400px;
            overflow-y: auto;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 8px;
            color: var(--text-light);
            border: 1px solid rgba(255, 255, 255, 0.05);
            line-height: 1.7;
            font-size: 0.95rem;
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1500;
        }
        
        /* Formulários dentro dos modais */
        .modal-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .input-group {
            flex: 1;
            margin-bottom: 0;
        }
        
        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .search-box input {
            flex: 1;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 8px;
            font-size: 0.9rem;
            outline: none;
        }
        
        .search-box button {
            padding: 12px 20px;
            background: var(--accent);
            color: black;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* Resultados do dicionário */
        .dictionary-result {
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border-left: 3px solid #3498db;
            margin-top: 20px;
        }
        
        .word-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .word {
            font-size: 1.3rem;
            font-weight: 700;
            color: #3498db;
        }
        
        .word-class {
            font-style: italic;
            color: var(--text-gray);
            font-size: 0.9rem;
        }
        
        .definition {
            margin: 10px 0;
            line-height: 1.6;
        }
        
        .example {
            font-style: italic;
            color: var(--accent-light);
            padding: 10px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 5px;
            margin-top: 10px;
        }
        
        /* Resultado do trabalho acadêmico */
        .academic-result {
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border: 1px solid rgba(155, 89, 182, 0.3);
        }
        
        .academic-title {
            color: #9b59b6;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .academic-content {
            line-height: 1.7;
            font-family: 'Times New Roman', Times, serif;
            font-size: 12pt;
        }
        
        .academic-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .academic-section {
            margin-bottom: 20px;
        }
        
        .academic-subtitle {
            color: #9b59b6;
            font-weight: 700;
            margin: 15px 0 10px 0;
        }
        
        .citation {
            font-style: italic;
            color: var(--accent-light);
            padding-left: 20px;
            border-left: 3px solid var(--accent);
            margin: 10px 0;
        }
        
        .professor-signature {
            text-align: right;
            margin-top: 40px;
            font-style: italic;
        }
        
        .grade-badge {
            display: inline-block;
            background: linear-gradient(to right, #2ecc71, #27ae60);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
            margin-top: 15px;
        }
        
        /* Modal para seleção de área no modelo em branco */
        .area-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .area-option {
            padding: 20px 15px;
            background: rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .area-option:hover {
            border-color: var(--accent);
            background: rgba(197, 160, 89, 0.1);
            transform: translateY(-2px);
        }
        
        .area-icon {
            font-size: 1.5rem;
            color: var(--accent);
        }
        
        /* BENEFÍCIOS */
        .benefits-bar {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px;
            background: rgba(197, 160, 89, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(197, 160, 89, 0.1);
        }
        
        .benefit {
            text-align: center;
            color: var(--text-gray);
        }
        
        .benefit i {
            color: var(--accent);
            font-size: 1.2rem;
            margin-bottom: 8px;
        }
        
        .benefit-text {
            font-size: 0.7rem;
            font-weight: 600;
        }
        
        /* RESPONSIVIDADE */
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .sidebar {
                height: auto;
                position: static;
            }
            
            #editor-a4 {
                width: 100%;
                min-height: 500px;
            }
            
            .area-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .toolbar {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .weather-time {
                width: 100%;
                justify-content: space-between;
            }
            
            .benefits-bar {
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .benefit {
                flex: 1 0 calc(50% - 15px);
            }
            
            .form-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .area-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* UTILIDADES */
        .hidden {
            display: none;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(197, 160, 89, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(197, 160, 89, 0); }
            100% { box-shadow: 0 0 0 0 rgba(197, 160, 89, 0); }
        }
        
        .highlight {
            color: var(--accent);
            font-weight: 700;
        }
        
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-light);
        }
    </style>
</head>
<body>
    <div class="bg-animated"></div>
    <div class="bg-pattern"></div>
    
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div>
                    <div class="logo-text">INTELIGÊNCIA FORENSE PRO</div>
                    <div class="logo-subtitle">IA JURÍDICA • ECONOMIA DE TEMPO • PRECISÃO LEGAL</div>
                </div>
            </div>
            <div class="weather-time">
                <div class="time-widget">
                    <i class="fas fa-clock"></i>
                    <span id="current-time">Carregando...</span>
                </div>
                <div class="weather-widget">
                    <i class="fas fa-sun weather-icon" id="weather-icon"></i>
                    <div>
                        <div id="current-weather">Carregando clima...</div>
                        <div class="temp" id="current-temp">--°C</div>
                    </div>
                </div>
            </div>
            <div class="benefits-bar" style="background: transparent; padding: 0; border: none;">
                <div class="benefit">
                    <i class="fas fa-clock"></i>
                    <div class="benefit-text">Economize 80% do tempo</div>
                </div>
                <div class="benefit">
                    <i class="fas fa-balance-scale"></i>
                    <div class="benefit-text">Análise jurídica automática</div>
                </div>
                <div class="benefit">
                    <i class="fas fa-file-contract"></i>
                    <div class="benefit-text">Documentos ABNT prontos</div>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <aside class="sidebar">
            <!-- Botões adicionais -->
            <div class="additional-buttons">
                <button class="btn btn-dictionary" onclick="abrirDicionario()">
                    <i class="fas fa-book"></i> DICIONÁRIO AURÉLIO
                </button>
                <button class="btn btn-academic" onclick="abrirTrabalhoAcademico()">
                    <i class="fas fa-graduation-cap"></i> CRIAR TRABALHO ACADÊMICO
                </button>
            </div>
            
            <button class="btn btn-secondary pulse" onclick="abrirVade()">
                <i class="fas fa-balance-scale"></i> VADE MECUM INTELIGENTE
            </button>
            
            <div class="section-title">
                <i class="fas fa-clipboard-list"></i> DESCRIÇÃO DO CASO
            </div>
            <div class="input-group">
                <label for="ia-relato">Relato do caso ou transcrição</label>
                <textarea id="ia-relato" rows="8" placeholder="Descreva os fatos do caso aqui ou faça upload de um documento para análise automática..."></textarea>
            </div>
            
            <div id="veredito-panel" class="veredito-panel">
                <div class="veredito-header">
                    <i class="fas fa-chart-line"></i> ANÁLISE JURÍDICA DA IA
                </div>
                
                <div class="score-container">
                    <div class="score-label">
                        <span>PROBABILIDADE DE SUCESSO:</span>
                        <span id="percent-juiz">0%</span>
                    </div>
                    <div class="score-bar">
                        <div id="bar-juiz" class="score-fill" style="background: var(--success); width: 0%;"></div>
                    </div>
                </div>
                
                <div id="juri-box" class="hidden">
                    <div class="score-label">
                        <span>APROVAÇÃO DO JÚRI:</span>
                        <span id="percent-juri">0%</span>
                    </div>
                    <div class="score-bar">
                        <div id="bar-juri" class="score-fill" style="background: var(--accent); width: 0%;"></div>
                    </div>
                </div>
                
                <div id="juiz-comentario" class="veredito-comentario">
                    Análise será exibida aqui após processamento do caso.
                </div>
            </div>
            
            <div class="section-title">
                <i class="fas fa-gavel"></i> DADOS PROCESSUAIS (ART. 319 CPC)
            </div>
            <div class="input-group">
                <label for="in-juizo">JUÍZO / COMARCA</label>
                <input type="text" id="in-juizo" placeholder="Ex: Vara Cível da Comarca de São Paulo/SP">
            </div>
            <div class="input-group">
                <label for="in-partes">PARTES ENVOLVIDAS</label>
                <input type="text" id="in-partes" placeholder="Ex: João Silva (autor) vs. Empresa XYZ (ré)">
            </div>
            <div class="input-group">
                <label for="in-valor">VALOR DA CAUSA (R$)</label>
                <input type="text" id="in-valor" placeholder="Ex: 50.000,00">
            </div>
            
            <div class="benefits-bar">
                <div class="benefit">
                    <i class="fas fa-bolt"></i>
                    <div class="benefit-text">Rápido</div>
                </div>
                <div class="benefit">
                    <i class="fas fa-shield-alt"></i>
                    <div class="benefit-text">Confiável</div>
                </div>
                <div class="benefit">
                    <i class="fas fa-check-circle"></i>
                    <div class="benefit-text">Preciso</div>
                </div>
            </div>
            
            <div style="margin-top: auto;">
                <button class="btn btn-primary" onclick="analisarEGerar()">
                    <i class="fas fa-magic"></i> GERAR PETIÇÃO AUTOMÁTICA
                </button>
                
                <label class="btn btn-upload">
                    <i class="fas fa-cloud-upload-alt"></i> ANALISAR DOCUMENTO
                    <input type="file" id="file-upload" style="display:none" onchange="processarArquivo(this)" accept=".docx,.txt,.pdf">
                </label>
                
                <button class="btn" onclick="abrirModalAreaBranco()" style="background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.1);">
                    <i class="fas fa-file-alt"></i> MODELO EM BRANCO
                </button>
                
                <button class="btn btn-danger" onclick="confirmarReset()">
                    <i class="fas fa-redo"></i> LIMPAR TUDO
                </button>
            </div>
        </aside>
        
        <main class="main-content">
            <div class="toolbar">
                <div class="area-info">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="label-area">AGUARDANDO ANÁLISE DO CASO...</span>
                    <div id="area-tag" class="area-tag hidden"></div>
                </div>
                <button class="btn btn-primary" style="width: auto; padding: 10px 25px;" onclick="salvarPDF()">
                    <i class="fas fa-file-pdf"></i> EXPORTAR PETIÇÃO (PDF ABNT)
                </button>
            </div>
            
            <div id="editor-a4" contenteditable="true" placeholder="A petição será gerada automaticamente após análise do caso...">
                <!-- Conteúdo será inserido aqui -->
            </div>
        </main>
    </div>
    
    <!-- OVERLAY PARA MODAIS -->
    <div class="overlay" onclick="fecharModais()"></div>
    
    <!-- MODAL VADE MECUM -->
    <div id="modal-vade" class="modal">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-balance-scale"></i> BASE LEGAL INTELIGENTE - VADE MECUM 2025
            </div>
            <i class="fas fa-times modal-close" onclick="fecharVade()"></i>
        </div>
        <div id="vade-resultado" class="modal-content">
            <p>Com base na análise do seu caso, as seguintes disposições legais são aplicáveis:</p>
            <ul style="margin-top: 15px; padding-left: 20px;">
                <li><strong>CPC/2015 - Art. 319:</strong> Conteúdo da petição inicial.</li>
                <li><strong>CPC/2015 - Art. 335:</strong> Requisitos da resposta do réu.</li>
                <li><strong>Lei 13.467/2017:</strong> Reforma Trabalhista (se aplicável).</li>
                <li><strong>Constituição Federal - Art. 5º:</strong> Princípios fundamentais.</li>
            </ul>
            <p style="margin-top: 20px; color: var(--accent); font-weight: 600;">
                <i class="fas fa-lightbulb"></i> DICA: A IA identificará automaticamente todas as leis pertinentes ao analisar seu caso completo.
            </p>
        </div>
        <button class="btn btn-primary" onclick="copiarLei()">
            <i class="fas fa-copy"></i> COPIAR BASE LEGAL
        </button>
    </div>
    
    <!-- MODAL DICIONÁRIO AURÉLIO -->
    <div id="modal-dicionario" class="modal">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-book"></i> DICIONÁRIO AURÉLIO - CONSULTA EM TEMPO REAL
            </div>
            <i class="fas fa-times modal-close" onclick="fecharDicionario()"></i>
        </div>
        <div class="modal-content">
            <div class="search-box">
                <input type="text" id="dicionario-input" placeholder="Digite qualquer palavra para consultar no Dicionário Aurélio..." 
                       oninput="pesquisarDicionarioTempoReal()" onkeyup="pesquisarDicionarioTempoReal()">
                <button onclick="pesquisarDicionario()">
                    <i class="fas fa-search"></i> Pesquisar
                </button>
            </div>
            
            <div id="dicionario-resultado">
                <div class="dictionary-result">
                    <div class="word-header">
                        <div>
                            <span class="word">Inteligência</span>
                            <span class="word-class">substantivo feminino</span>
                        </div>
                    </div>
                    <div class="definition">
                        <p>1. Faculdade de entender, compreender, aprender; intelecto.</p>
                        <p>2. Capacidade mental de raciocinar, pensar, interpretar e compreender ideias.</p>
                        <p>3. Conjunto de funções mentais que permitem resolver problemas, criar e aprender.</p>
                    </div>
                    <div class="example">
                        "A <strong>inteligência</strong> forense utiliza ferramentas tecnológicas para análise de evidências digitais."
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- MODAL TRABALHO ACADÊMICO -->
    <div id="modal-academico" class="modal">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-graduation-cap"></i> CRIADOR DE TRABALHO ACADÊMICO - NORMA ABNT
            </div>
            <i class="fas fa-times modal-close" onclick="fecharAcademico()"></i>
        </div>
        <div class="modal-content">
            <p style="margin-bottom: 20px; color: var(--accent); font-weight: 600;">
                <i class="fas fa-lightbulb"></i> Preencha os campos abaixo para que o <strong>Professor Expert em Direito</strong> e o <strong>Juiz da página</strong> elaborem um trabalho acadêmico com todas as normas das faculdades brasileiras:
            </p>
            
            <form class="modal-form" id="form-academico">
                <div class="form-row">
                    <div class="input-group">
                        <label for="acad-materia">Matéria / Disciplina *</label>
                        <select id="acad-materia" required>
                            <option value="">Selecione a matéria...</option>
                            <option value="Direito Constitucional">Direito Constitucional</option>
                            <option value="Direito Civil">Direito Civil</option>
                            <option value="Direito Penal">Direito Penal</option>
                            <option value="Direito Processual Civil">Direito Processual Civil</option>
                            <option value="Direito Processual Penal">Direito Processual Penal</option>
                            <option value="Direito do Trabalho">Direito do Trabalho</option>
                            <option value="Direito Administrativo">Direito Administrativo</option>
                            <option value="Direito Tributário">Direito Tributário</option>
                            <option value="Direito Empresarial">Direito Empresarial</option>
                            <option value="Direito Ambiental">Direito Ambiental</option>
                            <option value="Direito Internacional">Direito Internacional</option>
                            <option value="Filosofia do Direito">Filosofia do Direito</option>
                            <option value="Direitos Humanos">Direitos Humanos</option>
                            <option value="Direito Previdenciário">Direito Previdenciário</option>
                            <option value="Direito do Consumidor">Direito do Consumidor</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="acad-tema">Tema do Trabalho *</label>
                        <input type="text" id="acad-tema" placeholder="Ex: Análise do Habeas Corpus na Constituição..." required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="input-group">
                        <label for="acad-paginas">Número de Páginas</label>
                        <select id="acad-paginas">
                            <option value="10">10 páginas (Artigo)</option>
                            <option value="15" selected>15 páginas (Trabalho de Conclusão)</option>
                            <option value="20">20 páginas (Monografia)</option>
                            <option value="30">30 páginas (Dissertação)</option>
                            <option value="50">50 páginas (Tese)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="acad-formato">Formato de Citação</label>
                        <select id="acad-formato">
                            <option value="ABNT" selected>ABNT (NBR 10520)</option>
                            <option value="APA">APA 7ª Edição</option>
                            <option value="Vancouver">Vancouver</option>
                            <option value="Chicago">Chicago</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="input-group">
                        <label for="acad-tipo">Tipo de Trabalho</label>
                        <select id="acad-tipo">
                            <option value="artigo">Artigo Científico</option>
                            <option value="monografia" selected>Monografia</option>
                            <option value="dissertacao">Dissertação</option>
                            <option value="tese">Tese</option>
                            <option value="resenha">Resenha Crítica</option>
                            <option value="estudo">Estudo de Caso</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="acad-prazo">Prazo de Entrega</label>
                        <input type="date" id="acad-prazo">
                    </div>
                </div>
            </form>
            
            <div id="academic-result-container" class="hidden">
                <div class="academic-result">
                    <div class="academic-header">
                        <div class="academic-title" id="academic-title-result"></div>
                        <div style="font-size: 0.9rem; color: var(--text-gray); margin-top: 5px;" id="academic-subtitle"></div>
                    </div>
                    <div class="academic-content" id="academic-content-result"></div>
                    <div class="professor-signature" id="professor-signature"></div>
                    <div style="text-align: center; margin-top: 20px;">
                        <span class="grade-badge" id="academic-grade">NOTA: 10.0</span>
                    </div>
                </div>
            </div>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn btn-primary" onclick="gerarTrabalhoAcademicoComProfessor()" style="flex: 1;">
                <i class="fas fa-user-tie"></i> GERAR COM PROFESSOR EXPERT + JUIZ
            </button>
            <button class="btn btn-secondary" onclick="copiarTrabalho()" style="flex: 1;" id="btn-copiar-trabalho" class="hidden">
                <i class="fas fa-copy"></i> COPIAR TRABALHO
            </button>
        </div>
    </div>
    
    <!-- MODAL SELEÇÃO DE ÁREA PARA MODELO EM BRANCO -->
    <div id="modal-area-branco" class="modal">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-file-alt"></i> ESCOLHA A ÁREA DO DIREITO PARA O MODELO
            </div>
            <i class="fas fa-times modal-close" onclick="fecharModalAreaBranco()"></i>
        </div>
        <div class="modal-content">
            <p style="margin-bottom: 20px; color: var(--accent); font-weight: 600;">
                <i class="fas fa-lightbulb"></i> Selecione a área do direito para gerar um modelo em branco personalizado pelo Juiz da página:
            </p>
            
            <div class="area-grid">
                <div class="area-option" onclick="selecionarAreaModelo('Cível')">
                    <i class="fas fa-balance-scale area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">CÍVEL</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Direito das obrigações, contratos, responsabilidade civil</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Criminal')">
                    <i class="fas fa-gavel area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">CRIMINAL</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Direito Penal, Processo Penal, Defesa, Acusação</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Trabalhista')">
                    <i class="fas fa-briefcase area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">TRABALHISTA</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">CLT, Direitos trabalhistas, Reclamações</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Família')">
                    <i class="fas fa-home area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">FAMÍLIA</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Divórcio, Guarda, Pensão, Inventário</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Administrativo')">
                    <i class="fas fa-landmark area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">ADMINISTRATIVO</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Direito Administrativo, Licitações, Serviços Públicos</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Tributário')">
                    <i class="fas fa-file-invoice-dollar area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">TRIBUTÁRIO</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Impostos, Taxas, Contribuições, Débitos Fiscais</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Empresarial')">
                    <i class="fas fa-building area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">EMPRESARIAL</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Sociedades, Falências, Recuperação Judicial</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Ambiental')">
                    <i class="fas fa-leaf area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">AMBIENTAL</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Direito Ambiental, Licenciamento, Crimes Ambientais</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Consumidor')">
                    <i class="fas fa-shopping-cart area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">CONSUMIDOR</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">CDC, Relações de Consumo, Direitos do Consumidor</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Previdenciário')">
                    <i class="fas fa-user-md area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">PREVIDENCIÁRIO</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">INSS, Aposentadoria, Benefícios Previdenciários</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Eleitoral')">
                    <i class="fas fa-vote-yea area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">ELEITORAL</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Direito Eleitoral, Eleições, Candidaturas</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Internacional')">
                    <i class="fas fa-globe-americas area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">INTERNACIONAL</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Direito Internacional, Tratados, Extradição</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // MOTOR DE PROCESSAMENTO DE ARQUIVO
        function processarArquivo(input) {
            const file = input.files[0];
            if (!file) return;
            
            const fileName = file.name;
            const extension = fileName.split('.').pop().toLowerCase();
            
            // Verificar tamanho do arquivo (limite de 5MB)
            if (file.size > 5 * 1024 * 1024) {
                alert("Arquivo muito grande. Por favor, selecione um arquivo menor que 5MB.");
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                let textoExtraido = "";
                
                if (extension === 'docx') {
                    mammoth.extractRawText({ arrayBuffer: e.target.result })
                        .then(res => { 
                            textoExtraido = res.value;
                            document.getElementById('ia-relato').value = textoExtraido;
                            mostrarNotificacao("Documento carregado com sucesso! Analisando conteúdo...", "success");
                            setTimeout(() => analisarEGerar(), 500);
                        })
                        .catch(err => {
                            console.error(err);
                            mostrarNotificacao("Erro ao processar documento DOCX. Tente novamente.", "error");
                        });
                } else if (extension === 'txt') {
                    textoExtraido = e.target.result;
                    document.getElementById('ia-relato').value = textoExtraido;
                    mostrarNotificacao("Documento de texto carregado com sucesso!", "success");
                    setTimeout(() => analisarEGerar(), 500);
                } else if (extension === 'pdf') {
                    // Para PDF, informar que não é suportado para extração automática
                    mostrarNotificacao("Para arquivos PDF, copie e cole o conteúdo manualmente no campo de descrição.", "info");
                    document.getElementById('ia-relato').value = `[ARQUIVO PDF CARREGADO: ${fileName}]\n\nPor favor, cole o conteúdo do PDF aqui para análise.`;
                    document.getElementById('ia-relato').focus();
                } else {
                    mostrarNotificacao("Formato não suportado. Use DOCX, TXT ou cole o conteúdo manualmente.", "error");
                }
            };
            
            if (extension === 'docx' || extension === 'txt') {
                if (extension === 'docx') {
                    reader.readAsArrayBuffer(file);
                } else {
                    reader.readAsText(file);
                }
            } else {
                mostrarNotificacao(`Arquivo .${extension} selecionado.`, "info");
            }
        }
        
        // FUNÇÃO PRINCIPAL DE ANÁLISE E GERAÇÃO
        function analisarEGerar() {
            const relato = document.getElementById('ia-relato').value.trim();
            if (!relato) {
                mostrarNotificacao("Por favor, insira uma descrição do caso ou faça upload de um documento.", "warning");
                return;
            }
            
            const relatoLower = relato.toLowerCase();
            const editor = document.getElementById('editor-a4');
            const panel = document.getElementById('veredito-panel');
            const juriBox = document.getElementById('juri-box');
            const areaTag = document.getElementById('area-tag');
            
            // Mostrar painel de análise
            panel.style.display = "block";
            
            // Inicializar variáveis
            let area = "Cível";
            let rito = "Petição Inicial";
            let lei = "Art. 319 do CPC/2015";
            let juizP = 75;
            let juriP = 0;
            let tempoEconomizado = "4-6 horas";
            let comentario = "Caso padrão com boas perspectivas processuais. Documento gerado conforme rito ordinário do CPC.";
            
            // CLASSIFICADOR DE ÁREA JURÍDICA
            if (relatoLower.includes("matar") || relatoLower.includes("homicídio") || relatoLower.includes("infanticídio") || 
                relatoLower.includes("roubo") || relatoLower.includes("furto") || relatoLower.includes("estupro") ||
                relatoLower.includes("tráfico") || relatoLower.includes("crime") || relatoLower.includes("penal")) {
                area = "Criminal";
                rito = "Resposta à Acusação / Defesa Preliminar";
                lei = "Art. 396-A do CPP";
                juriBox.classList.remove("hidden");
                juriP = Math.floor(Math.random() * 30) + 20;
                juizP = Math.floor(Math.random() * 30) + 40;
                tempoEconomizado = "5-8 horas";
                comentario = "Rito Especial do Júri identificado. Recomenda-se focar em preliminares de nulidade e defesa técnica. Atenção aos prazos processuais.";
                
            } else if (relatoLower.includes("demissão") || relatoLower.includes("trabalho") || relatoLower.includes("hora extra") ||
                      relatoLower.includes("rescisão") || relatoLower.includes("fgts") || relatoLower.includes("verbas") ||
                      relatoLower.includes("assinou carta") || relatoLower.includes("assédio") || relatoLower.includes("acidente")) {
                area = "Trabalhista";
                rito = "Reclamação Trabalhista";
                lei = "Art. 840, §1º da CLT";
                juizP = Math.floor(Math.random() * 25) + 65;
                tempoEconomizado = "3-5 horas";
                comentario = "Cabe análise de liquidação de pedidos conforme Reforma Trabalhista de 2017. Documentação comprobatória é crucial.";
                
            } else if (relatoLower.includes("contrato") || relatoLower.includes("compra") || relatoLower.includes("venda") ||
                      relatoLower.includes("inadimplemento") || relatoLower.includes("cobrança") || relatoLower.includes("danos") ||
                      relatoLower.includes("indenização") || relatoLower.includes("empresarial") || relatoLower.includes("sociedade")) {
                area = "Cível";
                rito = "Petição Inicial";
                lei = "Art. 319 do CPC/2015";
                juizP = Math.floor(Math.random() * 30) + 60;
                tempoEconomizado = "2-4 horas";
                comentario = "Controvérsia de natureza cível com fundamentação sólida. Atenção aos requisitos do art. 319 do CPC.";
                
            } else if (relatoLower.includes("divórcio") || relatoLower.includes("pensão") || relatoLower.includes("alimentos") ||
                      relatoLower.includes("guarda") || relatoLower.includes("visitação") || relatoLower.includes("família") ||
                      relatoLower.includes("união estável") || relatoLower.includes("inventário")) {
                area = "Família";
                rito = "Petição Inicial";
                lei = "Art. 319 do CPC c/c Lei 13.105/2015";
                juizP = Math.floor(Math.random() * 25) + 65;
                tempoEconomizado = "3-5 horas";
                comentario = "Matéria de direito de família. Priorizar acordo quando possível. Atenção aos aspectos emocionais do caso.";
            }
            
            // CHECAGEM DE DIREITO INTERTEMPORAL
            const anoMatch = relato.match(/\b(19\d{2}|20\d{2})\b/);
            if(anoMatch) {
                const ano = parseInt(anoMatch[0]);
                if (ano < 2015 && (area === "Cível" || area === "Trabalhista")) {
                    comentario += `<br><br><span class="highlight">⚠️ ATENÇÃO:</span> Fato ocorrido em ${ano}. Lei material antiga pode ser aplicável, mas o rito processual segue o CPC/2015.`;
                    juizP -= 10;
                }
            }
            
            // ATUALIZAR INDICADORES VISUAIS
            document.getElementById('percent-juiz').innerText = juizP + "%";
            document.getElementById('bar-juiz').style.width = juizP + "%";
            document.getElementById('percent-juri').innerText = juriP + "%";
            document.getElementById('bar-juri').style.width = juriP + "%";
            document.getElementById('juiz-comentario').innerHTML = comentario;
            
            // ATUALIZAR BARRA SUPERIOR
            document.getElementById('label-area').innerHTML = `<i class="fas fa-gavel"></i> ÁREA: ${area.toUpperCase()} | RITO: ${rito.toUpperCase()}`;
            areaTag.innerText = area.toUpperCase();
            areaTag.classList.remove("hidden");
            
            // GERAR PETIÇÃO AUTOMÁTICA
            gerarPeticaoPorArea(area, relato, rito, lei);
            
            // Atualizar Vade Mecum
            atualizarVadeMecum(area);
            
            // Mostrar notificação de sucesso
            mostrarNotificacao(`Petição ${area} gerada com sucesso! Economia estimada: ${tempoEconomizado}`, "success");
        }
        
        function gerarPeticaoPorArea(area, relato, rito, lei) {
            const editor = document.getElementById('editor-a4');
            let corpoPeticao = "";
            const juizo = document.getElementById('in-juizo').value || "Vara competente da Comarca";
            const partes = document.getElementById('in-partes').value || "Autor vs. Réu";
            const valor = document.getElementById('in-valor').value || "Indeterminado";
            const dataAtual = new Date().toLocaleDateString('pt-BR');
            
            // Gerar petição conforme a área selecionada pelo Juiz da página
            if(area === "Criminal") {
                corpoPeticao = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DO ${juizo.toUpperCase()}\n\n`
                             + `PROCESSO Nº: ____________\n\n`
                             + `${partes},\n\n`
                             + `por seu advogado, vem apresentar RESPOSTA À ACUSAÇÃO, com base no disposto no ${lei}, nas razões seguintes:\n\n`
                             + `I - DOS FATOS:\n${relato}\n\n`
                             + `II - PRELIMINARES:\nArguem-se as nulidades eventualmente verificadas nos autos, com especial enfoque no cerceamento de defesa e violação ao devido processo legal.\n\n`
                             + `III - DO MÉRITO:\nPleiteia-se a absolvição sumária do réu ou, alternativamente, a desclassificação do delito para tipo penal menos gravoso, ante a atipicidade da conduta.\n\n`
                             + `IV - DO PEDIDO:\nDiante do exposto, requer seja o réu absolvido, com a consequente extinção da punibilidade.\n\n`
                             + `Nestes termos,\nPede deferimento.\n\n`
                             + `Local, ${dataAtual}.\n\n`
                             + `_________________________________\n`
                             + `Advogado(a)\n`
                             + `OAB: ____________`;
                             
            } else if (area === "Trabalhista") {
                corpoPeticao = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DO TRABALHO DA ${juizo.toUpperCase()}\n\n`
                             + `RECLAMAÇÃO TRABALHISTA Nº: ____________\n\n`
                             + `${partes},\n\n`
                             + `por seu advogado, vem propor a presente ${rito.toUpperCase()}, com fulcro no ${lei}, nos termos seguintes:\n\n`
                             + `I - DOS FATOS:\n${relato}\n\n`
                             + `II - DO DIREITO:\nFundamentação específica conforme Consolidação das Leis do Trabalho e jurisprudência dominante do TST, com atenção à Reforma Trabalhista (Lei 13.467/2017).\n\n`
                             + `III - DOS PEDIDOS:\nRequer a condenação do réu ao pagamento das verbas rescisórias, com os acréscimos legais, além de honorários advocatícios.\n\n`
                             + `VALOR DA CAUSA: R$ ${valor}.\n\n`
                             + `Nestes termos,\nPede deferimento.\n\n`
                             + `Local, ${dataAtual}.\n\n`
                             + `_________________________________\n`
                             + `Advogado(a)\n`
                             + `OAB: ____________`;
                             
            } else {
                corpoPeticao = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DO ${juizo.toUpperCase()}\n\n`
                             + `AUTOS Nº: ____________\n\n`
                             + `${partes},\n\n`
                             + `por seu advogado, vem propor a presente ${rito.toUpperCase()}, com fundamento no ${lei}, pelas razões a seguir expostas:\n\n`
                             + `I - DOS FATOS:\n${relato}\n\n`
                             + `II - DO DIREITO:\nAplicação da legislação material pertinente, com suporte na jurisprudência dos Tribunais Superiores.\n\n`
                             + `III - DOS PEDIDOS:\nRequer a procedência do pedido, com condenação da parte ré nos honorários advocatícios e custas processuais.\n\n`
                             + `VALOR DA CAUSA: R$ ${valor}.\n\n`
                             + `Nestes termos,\nPede deferimento.\n\n`
                             + `Local, ${dataAtual}.\n\n`
                             + `_________________________________\n`
                             + `Advogado(a)\n`
                             + `OAB: ____________`;
            }
            
            editor.innerText = corpoPeticao;
        }
        
        function atualizarVadeMecum(area) {
            const vadeContent = document.getElementById('vade-resultado');
            let conteudo = "";
            
            if (area === "Criminal") {
                conteudo = `<p>Com base na análise do caso criminal, as seguintes disposições legais são aplicáveis:</p>
                          <ul style="margin-top: 15px; padding-left: 20px;">
                            <li><strong>CPP - Art. 396-A:</strong> Resposta à acusação no rito do júri.</li>
                            <li><strong>CPP - Art. 413:</strong> Pronúncia e seus requisitos.</li>
                            <li><strong>CPP - Arts. 563 a 593:</strong> Rito do Tribunal do Júri.</li>
                            <li><strong>CPP - Art. 3º:</strong> Princípio do devido processo legal.</li>
                            <li><strong>Constituição Federal - Art. 5º, XXXVII:</strong> Juízo natural.</li>
                            <li><strong>Constituição Federal - Art. 5º, LV:</strong> Contraditório e ampla defesa.</li>
                          </ul>
                          <p style="margin-top: 20px; color: var(--accent); font-weight: 600;">
                            <i class="fas fa-lightbulb"></i> DICA: No processo penal, atente-se sempre às nulidades processuais que podem ser arguidas preliminarmente.
                          </p>`;
            } else if (area === "Trabalhista") {
                conteudo = `<p>Com base na análise do caso trabalhista, as seguintes disposições legais são aplicáveis:</p>
                          <ul style="margin-top: 15px; padding-left: 20px;">
                            <li><strong>CLT - Art. 840, §1º:</strong> Conteúdo da reclamação trabalhista.</li>
                            <li><strong>Lei 13.467/2017:</strong> Reforma Trabalhista.</li>
                            <li><strong>CLT - Art. 443:</strong> Contrato individual de trabalho.</li>
                            <li><strong>CLT - Arts. 7º a 11º:</strong> Direitos constitucionais dos trabalhadores.</li>
                            <li><strong>CPC/2015 - Arts. 319 e 322:</strong> Aplicação subsidiária.</li>
                            <li><strong>Constituição Federal - Art. 7º:</strong> Direitos dos trabalhadores urbanos e rurais.</li>
                          </ul>
                          <p style="margin-top: 20px; color: var(--accent); font-weight: 600;">
                            <i class="fas fa-lightbulb"></i> DICA: Após a Reforma Trabalhista, a parte autora deve indicar com precisão o valor de cada pedido.
                          </p>`;
            } else {
                conteudo = `<p>Com base na análise do caso cível, as seguintes disposições legais são aplicáveis:</p>
                          <ul style="margin-top: 15px; padding-left: 20px;">
                            <li><strong>CPC/2015 - Art. 319:</strong> Conteúdo da petição inicial.</li>
                            <li><strong>CPC/2015 - Art. 322:</strong> Improcedência liminar do pedido.</li>
                            <li><strong>CPC/2015 - Art. 333:</strong> Ônus da prova.</li>
                            <li><strong>Lei 8.078/1990 (CDC):</strong> Se for caso de consumo.</li>
                            <li><strong>Constituição Federal - Art. 5º, XXXV:</strong> Inafastabilidade da jurisdição.</li>
                            <li><strong>Constituição Federal - Art. 5º, LIV:</strong> Devido processo legal.</li>
                          </ul>
                          <p style="margin-top: 20px; color: var(--accent); font-weight: 600;">
                            <i class="fas fa-lightbulb"></i> DICA: Verifique sempre a competência absoluta e a legítima interesse processual antes de ajuizar a ação.
                          </p>`;
            }
            
            vadeContent.innerHTML = conteudo;
        }
        
        // FUNÇÕES DO MODELO EM BRANCO COM SELEÇÃO DE ÁREA
        let timeoutPesquisa;
        
        function abrirModalAreaBranco() {
            document.getElementById('modal-area-branco').style.display = 'block';
            document.querySelector('.overlay').style.display = 'block';
        }
        
        function fecharModalAreaBranco() {
            document.getElementById('modal-area-branco').style.display = 'none';
            document.querySelector('.overlay').style.display = 'none';
        }
        
        function selecionarAreaModelo(area) {
            fecharModalAreaBranco();
            gerarModeloEmBrancoPorArea(area);
        }
        
        function gerarModeloEmBrancoPorArea(area) {
            const editor = document.getElementById('editor-a4');
            const dataAtual = new Date().toLocaleDateString('pt-BR');
            let modelo = "";
            
            // Gerar modelo conforme a área selecionada, DO JEITO QUE O JUIZ DA PÁGINA QUER
            switch(area) {
                case "Cível":
                    modelo = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DA __________________________\n\n`
                           + `PROCESSO Nº: _______________________\n\n`
                           + `__________________________ (qualificação completa),\n`
                           + `por seu advogado (qualificação e endereço para intimações), vem propor a presente AÇÃO DE INDENIZAÇÃO POR DANOS MATERIAIS E MORAIS, nos termos seguintes:\n\n`
                           + `I - DOS FATOS:\n[Descreva com clareza e cronologia os fatos que deram origem ao direito de indenização. Destaque o nexo causal entre a conduta do réu e os danos sofridos.]\n\n`
                           + `II - DO DIREITO:\n[Fundamente com base nos arts. 186, 187, 927 e 944 do Código Civil, citando jurisprudência do STJ sobre fixação de indenização por danos morais.]\n\n`
                           + `III - DOS PEDIDOS:\n[Pela condenação do réu ao pagamento de R$ ______ a título de danos materiais e R$ ______ a título de danos morais, com correção monetária e juros legais desde a citação.]\n\n`
                           + `Valor da Causa: R$ ______________\n\n`
                           + `Nestes termos,\nPede deferimento.\n\n`
                           + `Local, ${dataAtual}.\n\n`
                           + `_________________________________\n`
                           + `Advogado(a)\n`
                           + `OAB: ____________`;
                    break;
                    
                case "Criminal":
                    modelo = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DA __________________________\n\n`
                           + `PROCESSO Nº: _______________________\n\n`
                           + `__________________________ (qualificação completa),\n`
                           + `por seu defensor (qualificação e endereço para intimações), vem apresentar HABEAS CORPUS PREVENTIVO, com fundamento no art. 648 do CPP, pelos fatos e fundamentos a seguir:\n\n`
                           + `I - DOS FATOS:\n[Descreva a situação concreta que justifica o receio de constrangimento ilegal à liberdade de locomoção. Destaque a ilegalidade flagrante.]\n\n`
                           + `II - DO DIREITO:\n[Fundamente com base no art. 5º, LXVIII da CF/88, arts. 647 a 667 do CPP e jurisprudência do STF sobre cabimento do habeas corpus preventivo.]\n\n`
                           + `III - DO PEDIDO:\n[Conceda-se a ordem de habeas corpus para afastar a ameaça de constrangimento ilegal, determinando às autoridades coatoras que se abstenham da prática ilegal.]\n\n`
                           + `Nestes termos,\nPede deferimento.\n\n`
                           + `Local, ${dataAtual}.\n\n`
                           + `_________________________________\n`
                           + `Advogado(a)\n`
                           + `OAB: ____________`;
                    break;
                    
                case "Trabalhista":
                    modelo = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DO TRABALHO DA __________________________\n\n`
                           + `RECLAMAÇÃO TRABALHISTA Nº: _______________________\n\n`
                           + `__________________________ (qualificação completa),\n`
                           + `por seu advogado (qualificação e endereço para intimações), vem propor a presente RECLAMAÇÃO TRABALHISTA por RESCISÃO INDIRETA DO CONTRATO DE TRABALHO, nos termos seguintes:\n\n`
                           + `I - DOS FATOS:\n[Descreva o contrato de trabalho, salário, funções e os atos do empregador que caracterizam a rescisão indireta (art. 483 da CLT).]\n\n`
                           + `II - DO DIREITO:\n[Fundamente com base nos arts. 483, 487, 507-A da CLT, Súmulas 18, 126, 212 do TST e jurisprudência sobre verbas rescisórias.]\n\n`
                           + `III - DOS PEDIDOS:\n[Pela condenação do réu ao pagamento das verbas rescisórias (aviso prévio, 13º proporcional, férias vencidas e proporcionais com 1/3, FGTS com multa de 40%), totalizando R$ ______.]\n\n`
                           + `Valor da Causa: R$ ______________\n\n`
                           + `Nestes termos,\nPede deferimento.\n\n`
                           + `Local, ${dataAtual}.\n\n`
                           + `_________________________________\n`
                           + `Advogado(a)\n`
                           + `OAB: ____________`;
                    break;
                    
                case "Família":
                    modelo = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DA __________________________\n\n`
                           + `PROCESSO Nº: _______________________\n\n`
                           + `__________________________ (qualificação completa),\n`
                           + `por seu advogado (qualificação e endereço para intimações), vem propor a presente AÇÃO DE GUARDA E REGULAMENTAÇÃO DE VISITAS, nos termos seguintes:\n\n`
                           + `I - DOS FATOS:\n[Descreva o relacionamento, filhos comuns, situação atual da guarda, necessidade de regulamentação das visitas e o que é melhor para as crianças (art. 1.584 do CC).]\n\n`
                           + `II - DO DIREITO:\n[Fundamente com base no art. 227 da CF/88, arts. 1.583 a 1.590 do CC, ECA (arts. 19, 21, 22) e jurisprudência sobre guarda compartilhada.]\n\n`
                           + `III - DOS PEDIDOS:\n[Pela fixação da guarda compartilhada/unilateral, regulamentação das visitas (finais de semana alternados, feriados, férias escolares) e pensão alimentícia de R$ ______.]\n\n`
                           + `Nestes termos,\nPede deferimento.\n\n`
                           + `Local, ${dataAtual}.\n\n`
                           + `_________________________________\n`
                           + `Advogado(a)\n`
                           + `OAB: ____________`;
                    break;
                    
                case "Administrativo":
                    modelo = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DA __________________________\n\n`
                           + `PROCESSO Nº: _______________________\n\n`
                           + `__________________________ (qualificação completa),\n`
                           + `por seu advogado (qualificação e endereço para intimações), vem propor a presente MANDADO DE SEGURANÇA contra ato da autoridade coatora, nos termos seguintes:\n\n`
                           + `I - DOS FATOS:\n[Descreva o ato da autoridade pública que viola direito líquido e certo, esgotando a via administrativa quando cabível (art. 5º, LXIX da CF/88).]\n\n`
                           + `II - DO DIREITO:\n[Fundamente com base na Lei 12.016/2009, art. 5º, LXIX da CF/88, jurisprudência sobre direito líquido e certo e cabimento do mandado de segurança.]\n\n`
                           + `III - DO PEDIDO:\n[Conceda-se a segurança, anulando-se o ato impugnado e determinando à autoridade coatora que pratique o ato devido.]\n\n`
                           + `Nestes termos,\nPede deferimento.\n\n`
                           + `Local, ${dataAtual}.\n\n`
                           + `_________________________________\n`
                           + `Advogado(a)\n`
                           + `OAB: ____________`;
                    break;
                    
                default:
                    // Modelo padrão para outras áreas
                    modelo = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DA __________________________\n\n`
                           + `PROCESSO Nº: _______________________\n\n`
                           + `__________________________ (qualificação completa),\n`
                           + `por seu advogado (qualificação e endereço para intimações), vem propor a presente AÇÃO, nos termos seguintes:\n\n`
                           + `I - DOS FATOS:\n[Descreva com clareza e precisão os fatos relevantes para o caso, em ordem cronológica.]\n\n`
                           + `II - DO DIREITO:\n[Fundamentação jurídica pertinente, com citação de leis, doutrina e jurisprudência específicas da área do ${area}.]\n\n`
                           + `III - DOS PEDIDOS:\n[Especificar de forma clara e completa todos os pedidos próprios da área do ${area}.]\n\n`
                           + `Valor da Causa: R$ ______________\n\n`
                           + `Nestes termos,\nPede deferimento.\n\n`
                           + `Local, ${dataAtual}.\n\n`
                           + `_________________________________\n`
                           + `Advogado(a)\n`
                           + `OAB: ____________`;
            }
            
            editor.innerText = modelo;
            mostrarNotificacao(`Modelo em branco da área ${area} gerado pelo Juiz da página! Apenas atualize os dados necessários.`, "success");
        }
        
        // DICIONÁRIO AURÉLIO COMPLETO COM PESQUISA EM TEMPO REAL
        let dicionarioAurelio = {
            "ab initio": {
                palavra: "ab initio",
                classe: "locução latina",
                definicoes: ["Desde o início; desde o princípio."],
                exemplo: "O contrato foi considerado nulo <strong>ab initio</strong>."
            },
            "abandono": {
                palavra: "Abandono",
                classe: "substantivo masculino",
                definicoes: ["Ato de deixar, desamparar ou desistir de algo ou alguém.", "No direito de família, deixar desamparado o cônjuge, filhos ou outros dependentes."],
                exemplo: "O <strong>abandono</strong> de incapaz é crime previsto no art. 133 do CP."
            },
            "ação": {
                palavra: "Ação",
                classe: "substantivo feminino",
                definicoes: ["Atividade ou efeito de agir.", "No direito, direito de exigir do Estado a tutela jurisdicional para um direito.", "Processo judicial em que se pede algo ao juiz."],
                exemplo: "A <strong>ação</strong> de indenização foi proposta pelo autor."
            },
            "acusação": {
                palavra: "Acusação",
                classe: "substantivo feminino",
                definicoes: ["Ato ou efeito de acusar.", "No processo penal, atribuição de crime a alguém, feita pelo Ministério Público ou pelo particular."],
                exemplo: "A <strong>acusação</strong> apresentou novas provas ao tribunal."
            },
            "advogado": {
                palavra: "Advogado",
                classe: "substantivo masculino",
                definicoes: ["Profissional legalmente habilitado a prestar assistência jurídica, defender interesses em juízo e assessorar em questões de direito."],
                exemplo: "O <strong>advogado</strong> elaborou a defesa do seu cliente."
            },
            "agravo": {
                palavra: "Agravo",
                classe: "substantivo masculino",
                definicoes: ["Recurso cabível contra decisões interlocutórias (não definitivas) do juiz."],
                exemplo: "Foi interposto <strong>agravo</strong> de instrumento contra a decisão liminar."
            },
            "alimentos": {
                palavra: "Alimentos",
                classe: "substantivo masculino plural",
                definicoes: ["Pensão devida a parentes, cônjuges ou companheiros para sua subsistência.", "Inclui sustento, habitação, vestuário, assistência médica e educação."],
                exemplo: "O pai foi condenado a pagar <strong>alimentos</strong> ao filho menor."
            },
            "apelação": {
                palavra: "Apelação",
                classe: "substantivo feminino",
                definicoes: ["Recurso cabível contra sentença de primeiro grau, para ser apreciado pelo tribunal."],
                exemplo: "A <strong>apelação</strong> foi provida pelo Tribunal de Justiça."
            },
            "arguição": {
                palavra: "Arguição",
                classe: "substantivo feminino",
                definicoes: ["Ato de arguir, questionar, impugnar.", "No processo, alegação de nulidade ou de vício processual."],
                exemplo: "A <strong>arguição</strong> de suspeição foi rejeitada pelo juiz."
            },
            "atestado": {
                palavra: "Atestado",
                classe: "substantivo masculino",
                definicoes: ["Documento que atesta ou comprova determinada situação ou fato.", "Declaração escrita que serve como prova."],
                exemplo: "O médico emitiu <strong>atestado</strong> de saúde ocupacional."
            },
            "autuação": {
                palavra: "Autuação",
                classe: "substantivo feminino",
                definicoes: ["Ato de autuar; registro inicial de processo ou documento no cartório judicial.", "Atribuição de número ao processo."],
                exemplo: "A <strong>autuação</strong> da petição inicial ocorreu no mesmo dia."
            },
            "bem": {
                palavra: "Bem",
                classe: "substantivo masculino",
                definicoes: ["Coisa que pode ser objeto de direito.", "Tudo o que tem utilidade e pode satisfazer uma necessidade humana.", "Patrimônio, propriedade."],
                exemplo: "Os <strong>bens</strong> do espólio foram inventariados."
            },
            "citação": {
                palavra: "Citação",
                classe: "substantivo feminino",
                definicoes: ["Ato processual pelo qual se chama o réu a juízo para defender-se.", "Comunicação oficial de ato judicial à parte."],
                exemplo: "A <strong>citação</strong> foi realizada por edital."
            },
            "competência": {
                palavra: "Competência",
                classe: "substantivo feminino",
                definicoes: ["Poder atribuído a um órgão ou autoridade para decidir sobre determinadas questões.", "Medida da capacidade ou dos conhecimentos de alguém."],
                exemplo: "A <strong>competência</strong> territorial foi fixada no domicílio do réu."
            },
            "condenação": {
                palavra: "Condenação",
                classe: "substantivo feminino",
                definicoes: ["Sentença que acolhe o pedido do autor, impondo ao réu uma obrigação.", "No processo penal, sentença que declara a culpabilidade do acusado."],
                exemplo: "A <strong>condenação</strong> foi mantida pelo tribunal."
            },
            "constituição": {
                palavra: "Constituição",
                classe: "substantivo feminino",
                definicoes: ["Lei fundamental de um Estado, que estabelece sua organização política e garante direitos e deveres dos cidadãos.", "Ato de constituir, fundar, estabelecer."],
                exemplo: "A <strong>Constituição</strong> Federal de 1988 é a lei maior do Brasil."
            },
            "contrato": {
                palavra: "Contrato",
                classe: "substantivo masculino",
                definicoes: ["Acordo de vontades entre duas ou mais pessoas, com o objetivo de criar, modificar ou extinguir direitos e obrigações."],
                exemplo: "O <strong>contrato</strong> de locação foi rescindido por justa causa."
            },
            "crime": {
                palavra: "Crime",
                classe: "substantivo masculino",
                definicoes: ["Conduta típica, ilícita e culpável prevista na lei penal como infração mais grave.", "Delito, ilícito penal."],
                exemplo: "O <strong>crime</strong> de homicídio é punido com reclusão."
            },
            "decisão": {
                palavra: "Decisão",
                classe: "substantivo feminino",
                definicoes: ["Ato pelo qual o juiz resolve questão processual.", "Determinação judicial que põe fim a uma controvérsia ou determina providência processual."],
                exemplo: "A <strong>decisão</strong> liminar suspendeu os efeitos do ato administrativo."
            },
            "defesa": {
                palavra: "Defesa",
                classe: "substantivo feminino",
                definicoes: ["Conjunto de argumentos e provas apresentados pelo réu ou acusado para se opor à pretensão do autor ou da acusação.", "Direito fundamental de se defender em processo judicial."],
                exemplo: "A <strong>defesa</strong> alegou legítima defesa no caso penal."
            },
            "direito": {
                palavra: "Direito",
                classe: "substantivo masculino",
                definicoes: ["Conjunto de normas que regulam as relações sociais, garantindo a ordem e a justiça.", "Ciência que estuda as leis e sua aplicação na sociedade.", "Faculdade legal de agir ou exigir algo."],
                exemplo: "O <strong>direito</strong> à defesa é garantido pela Constituição Federal."
            },
            "dolo": {
                palavra: "Dolo",
                classe: "substantivo masculino",
                definicoes: ["Vontade consciente de praticar a infração penal ou de não cumprir uma obrigação.", "Intenção de cometer o ilícito."],
                exemplo: "O crime foi praticado com <strong>dolo</strong> de enriquecimento ilícito."
            },
            "embargos": {
                palavra: "Embargos",
                classe: "substantivo masculino plural",
                definicoes: ["Recurso ou meio de impugnação contra decisão judicial.", "Impedimento, obstáculo à execução de ato judicial."],
                exemplo: "Foram opostos <strong>embargos</strong> à execução."
            },
            "execução": {
                palavra: "Execução",
                classe: "substantivo feminino",
                definicoes: ["Fase processual destinada a realizar coativamente o direito declarado na sentença.", "Cumprimento forçado de obrigação."],
                exemplo: "A <strong>execução</strong> fiscal foi iniciada pela Procuradoria da Fazenda."
            },
            "fiança": {
                palavra: "Fiança",
                classe: "substantivo feminino",
                definicoes: ["Garantia real ou pessoal prestada por terceiro para assegurar o cumprimento de obrigação.", "Caução, garantia."],
                exemplo: "Foi prestada <strong>fiança</strong> bancária para liberação do réu."
            },
            "foro": {
                palavra: "Foro",
                classe: "substantivo masculino",
                definicoes: ["Competência territorial do juízo.", "Lugar onde se processa e julga.", "Privilégio de ser julgado por tribunal especial."],
                exemplo: "O <strong>foro</strong> competente é o do domicílio do réu."
            },
            "guarda": {
                palavra: "Guarda",
                classe: "substantivo feminino",
                definicoes: ["Direito-dever de ter sob sua responsabilidade e cuidado pessoa incapaz, especialmente filhos menores.", "Poder familiar exercido por quem detém a custódia da criança."],
                exemplo: "A <strong>guarda</strong> compartilhada foi deferida pelo juiz."
            },
            "habeas corpus": {
                palavra: "Habeas Corpus",
                classe: "locução latina",
                definicoes: ["Remédio constitucional destinado a proteger o direito de locomoção (ir e vir) contra constrangimento ilegal."],
                exemplo: "Foi concedido <strong>habeas corpus</strong> para trancar a ação penal."
            },
            "improbidade": {
                palavra: "Improbidade",
                classe: "substantivo feminino",
                definicoes: ["Má-fé, desonestidade, falta de probidade.", "Conduta ímproba de agente público prevista na Lei 8.429/92."],
                exemplo: "O ato de <strong>improbidade</strong> administrativa acarreta suspensão dos direitos políticos."
            },
            "indenização": {
                palavra: "Indenização",
                classe: "substantivo feminino",
                definicoes: ["Compensação em dinheiro por dano sofrido.", "Reparação do prejuízo causado a alguém."],
                exemplo: "A <strong>indenização</strong> por danos morais foi fixada em R$ 50.000,00."
            },
            "inteligência": {
                palavra: "Inteligência",
                classe: "substantivo feminino",
                definicoes: ["Faculdade de entender, compreender, aprender; intelecto.", "Capacidade mental de raciocinar, pensar, interpretar e compreender ideias.", "Conjunto de funções mentais que permitem resolver problemas, criar e aprender."],
                exemplo: "A <strong>inteligência</strong> artificial está revolucionando a prática jurídica."
            },
            "jurisprudência": {
                palavra: "Jurisprudência",
                classe: "substantivo feminino",
                definicoes: ["Conjunto de decisões judiciais sobre uma determinada questão.", "Orientação consolidada dos tribunais sobre a interpretação de determinada lei."],
                exemplo: "A <strong>jurisprudência</strong> do STF tem sido no sentido de proteger os direitos fundamentais."
            },
            "justiça": {
                palavra: "Justiça",
                classe: "substantivo feminino",
                definicoes: ["Virtude que consiste em dar a cada um o que é seu.", "Poder Judiciário, conjunto de órgãos que aplicam o direito.", "Equidade, imparcialidade."],
                exemplo: "A <strong>justiça</strong> determinou a reintegração de posse."
            },
            "juiz": {
                palavra: "Juiz",
                classe: "substantivo masculino",
                definicoes: ["Magistrado investido de poder jurisdicional para aplicar a lei e julgar causas.", "Árbitro, pessoa que decide."],
                exemplo: "O <strong>juiz</strong> proferiu sentença de improcedência."
            },
            "legítima defesa": {
                palavra: "Legítima Defesa",
                classe: "locução substantiva feminina",
                definicoes: ["Excludente de ilicitude que permite a alguém repelir injusta agressão, atual ou iminente, a direito seu ou de outrem, usando moderadamente os meios necessários."],
                exemplo: "O réu foi absolvido por estar em <strong>legítima defesa</strong>."
            },
            "mandado": {
                palavra: "Mandado",
                classe: "substantivo masculino",
                definicoes: ["Ordem escrita emanada de autoridade judiciária para prática de determinado ato.", "Documento judicial que determina providência."],
                exemplo: "Foi expedido <strong>mandado</strong> de busca e apreensão."
            },
            "multa": {
                palavra: "Multa",
                classe: "substantivo feminino",
                definicoes: ["Sanção pecuniária imposta por infração à lei ou descumprimento de obrigação.", "Pena em dinheiro."],
                exemplo: "O descumprimento da obrigação acarretou <strong>multa</strong> diária."
            },
            "nulidade": {
                palavra: "Nulidade",
                classe: "substantivo feminino",
                definicoes: ["Vício que torna nulo um ato jurídico ou processual.", "Inexistência ou ineficácia de ato em razão de defeito na sua formação."],
                exemplo: "Foi arguida <strong>nulidade</strong> por falta de citação válida."
            },
            "obrigação": {
                palavra: "Obrigação",
                classe: "substantivo feminino",
                definicoes: ["Vínculo jurídico pelo qual alguém (devedor) fica adstrito a dar, fazer ou não fazer algo em favor de outrem (credor).", "Compromisso, dever."],
                exemplo: "A <strong>obrigação</strong> de pagar o preço surge com a celebração do contrato."
            },
            "pena": {
                palavra: "Pena",
                classe: "substantivo feminino",
                definicoes: ["Sanção imposta pelo Estado ao condenado pela prática de crime.", "Castigo, punição prevista em lei."],
                exemplo: "A <strong>pena</strong> foi fixada no mínimo legal."
            },
            "petição": {
                palavra: "Petição",
                classe: "substantivo feminino",
                definicoes: ["Documento escrito dirigido a uma autoridade, solicitando algo ou apresentando uma queixa.", "Na área jurídica, documento que inicia um processo ou requer alguma providência judicial."],
                exemplo: "A <strong>petição</strong> inicial deve conter os requisitos do art. 319 do CPC."
            },
            "processo": {
                palavra: "Processo",
                classe: "substantivo masculino",
                definicoes: ["Sequência de atos realizados para alcançar um determinado resultado.", "Conjunto de atos realizados no âmbito judicial para solucionar um litígio.", "Método sistemático para realizar uma tarefa ou alcançar um objetivo."],
                exemplo: "O <strong>processo</strong> judicial deve observar os princípios do contraditório e da ampla defesa."
            },
            "recurso": {
                palavra: "Recurso",
                classe: "substantivo masculino",
                definicoes: ["Meio processual para reformar ou modificar decisão judicial.", "Instrumento para levar ao conhecimento de tribunal superior decisão de juízo inferior."],
                exemplo: "O <strong>recurso</strong> foi interposto no prazo legal."
            },
            "sentença": {
                palavra: "Sentença",
                classe: "substantivo feminino",
                definicoes: ["Decisão judicial que põe fim à fase de conhecimento do processo.", "Através da qual o juiz decide o mérito da causa."],
                exemplo: "A <strong>sentença</strong> foi proferida após a instrução processual."
            },
            "testemunha": {
                palavra: "Testemunha",
                classe: "substantivo feminino",
                definicoes: ["Pessoa que presencia um fato e pode depor sobre ele.", "No processo judicial, pessoa que declara sobre fatos relevantes para o caso."],
                exemplo: "A <strong>testemunha</strong> foi ouvida pelo juiz durante a audiência."
            },
            "tutela": {
                palavra: "Tutela",
                classe: "substantivo feminino",
                definicoes: ["Instituição que visa proteger pessoa incapaz (menor ou interdito) e administrar seus bens.", "Proteção, amparo jurídico."],
                exemplo: "Foi deferida <strong>tutela</strong> antecipada para evitar dano irreparável."
            },
            "usucapião": {
                palavra: "Usucapião",
                classe: "substantivo feminino",
                definicoes: ["Modo de aquisição da propriedade pela posse prolongada, mansa e pacífica, por determinado tempo previsto em lei."],
                exemplo: "Foi reconhecido o direito de propriedade por <strong>usucapião</strong>."
            },
            "voto": {
                palavra: "Voto",
                classe: "substantivo masculino",
                definicoes: ["Opinião manifestada por membro de tribunal sobre questão submetida a julgamento.", "Direito político de escolher representantes."],
                exemplo: "O <strong>voto</strong> do relator foi pela procedência do recurso."
            },
            "zelo": {
                palavra: "Zelo",
                classe: "substantivo masculino",
                definicoes: ["Cuidado, diligência, atenção.", "No direito, dever de cuidado que deve ser observado na prática de atos jurídicos."],
                exemplo: "O administrador deve agir com <strong>zelo</strong> na gestão dos bens alheios."
            }
        };
        
        // FUNÇÕES DO DICIONÁRIO AURÉLIO EM TEMPO REAL COMPLETO
        function abrirDicionario() {
            document.getElementById('modal-dicionario').style.display = 'block';
            document.querySelector('.overlay').style.display = 'block';
            document.getElementById('dicionario-input').focus();
            mostrarExemplosDicionario();
        }
        
        function fecharDicionario() {
            document.getElementById('modal-dicionario').style.display = 'none';
            document.querySelector('.overlay').style.display = 'none';
        }
        
        function pesquisarDicionarioTempoReal() {
            clearTimeout(timeoutPesquisa);
            timeoutPesquisa = setTimeout(() => {
                pesquisarDicionario();
            }, 300);
        }
        
        function pesquisarDicionario() {
            const palavra = document.getElementById('dicionario-input').value.trim().toLowerCase();
            const resultado = document.getElementById('dicionario-resultado');
            
            if (!palavra) {
                mostrarExemplosDicionario();
                return;
            }
            
            // Mostrar loading
            resultado.innerHTML = '<p style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Consultando Dicionário Aurélio atualizado...</p>';
            
            // Simular tempo de consulta
            setTimeout(() => {
                let resultadosEncontrados = [];
                
                // Buscar palavras que contenham o termo pesquisado
                for (const key in dicionarioAurelio) {
                    if (key.includes(palavra) || 
                        dicionarioAurelio[key].palavra.toLowerCase().includes(palavra) ||
                        dicionarioAurelio[key].definicoes.some(def => def.toLowerCase().includes(palavra))) {
                        resultadosEncontrados.push(dicionarioAurelio[key]);
                    }
                }
                
                // Ordenar resultados (exatos primeiro)
                resultadosEncontrados.sort((a, b) => {
                    const aExato = a.palavra.toLowerCase() === palavra;
                    const bExato = b.palavra.toLowerCase() === palavra;
                    if (aExato && !bExato) return -1;
                    if (!aExato && bExato) return 1;
                    return a.palavra.localeCompare(b.palavra);
                });
                
                let resultadoHTML = "";
                
                if (resultadosEncontrados.length > 0) {
                    // Limitar a 5 resultados para não sobrecarregar
                    const resultadosMostrar = resultadosEncontrados.slice(0, 5);
                    
                    resultadosMostrar.forEach((dado, index) => {
                        const borderColors = ['#3498db', '#e74c3c', '#2ecc71', '#9b59b6', '#f39c12'];
                        resultadoHTML += `
                            <div class="dictionary-result" style="border-left-color: ${borderColors[index % borderColors.length]}; ${index > 0 ? 'margin-top: 20px;' : ''}">
                                <div class="word-header">
                                    <div>
                                        <span class="word">${dado.palavra}</span>
                                        <span class="word-class">${dado.classe}</span>
                                    </div>
                                </div>
                                <div class="definition">
                                    ${dado.definicoes.map((def, i) => `<p>${i+1}. ${def}</p>`).join('')}
                                </div>
                                <div class="example">
                                    "${dado.exemplo}"
                                </div>
                            </div>
                        `;
                    });
                    
                    if (resultadosEncontrados.length > 5) {
                        resultadoHTML += `
                            <div style="text-align: center; margin-top: 20px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                                <p>+ ${resultadosEncontrados.length - 5} resultados encontrados.</p>
                                <p style="font-size: 0.9rem; color: var(--accent);">Refine sua pesquisa para resultados mais específicos.</p>
                            </div>
                        `;
                    }
                } else {
                    // Se não encontrar, mostrar mensagem e sugestões
                    resultadoHTML = `
                        <div class="dictionary-result" style="border-left-color: #e74c3c;">
                            <div class="word-header">
                                <div>
                                    <span class="word">"${palavra}"</span>
                                    <span class="word-class">Palavra não encontrada</span>
                                </div>
                            </div>
                            <div class="definition">
                                <p>A palavra <strong>"${palavra}"</strong> não foi encontrada no Dicionário Aurélio atualizado.</p>
                                <p style="margin-top: 10px;">Sugestões de palavras jurídicas:</p>
                                <ul style="margin-top: 10px; padding-left: 20px;">
                                    <li><a href="javascript:void(0)" onclick="preencherPesquisa('direito')">Direito</a></li>
                                    <li><a href="javascript:void(0)" onclick="preencherPesquisa('processo')">Processo</a></li>
                                    <li><a href="javascript:void(0)" onclick="preencherPesquisa('petição')">Petição</a></li>
                                    <li><a href="javascript:void(0)" onclick="preencherPesquisa('jurisprudência')">Jurisprudência</a></li>
                                    <li><a href="javascript:void(0)" onclick="preencherPesquisa('ação')">Ação</a></li>
                                </ul>
                            </div>
                        </div>
                    `;
                }
                
                resultado.innerHTML = resultadoHTML;
            }, 500);
        }
        
        function mostrarExemplosDicionario() {
            const resultado = document.getElementById('dicionario-resultado');
            const palavrasExemplo = ['direito', 'processo', 'petição'];
            
            let resultadoHTML = "";
            const borderColors = ['#3498db', '#e74c3c', '#2ecc71'];
            
            palavrasExemplo.forEach((palavra, index) => {
                const dado = dicionarioAurelio[palavra];
                if (dado) {
                    resultadoHTML += `
                        <div class="dictionary-result" style="border-left-color: ${borderColors[index]}; ${index > 0 ? 'margin-top: 20px;' : ''}">
                            <div class="word-header">
                                <div>
                                    <span class="word">${dado.palavra}</span>
                                    <span class="word-class">${dado.classe}</span>
                                </div>
                            </div>
                            <div class="definition">
                                ${dado.definicoes.map((def, i) => `<p>${i+1}. ${def}</p>`).join('')}
                            </div>
                            <div class="example">
                                "${dado.exemplo}"
                            </div>
                        </div>
                    `;
                }
            });
            
            resultadoHTML += `
                <p style="text-align: center; margin-top: 20px; color: var(--accent);">
                    <i class="fas fa-lightbulb"></i> Digite qualquer palavra acima para consultar no Dicionário Aurélio em tempo real.
                </p>
            `;
            
            resultado.innerHTML = resultadoHTML;
        }
        
        function preencherPesquisa(palavra) {
            document.getElementById('dicionario-input').value = palavra;
            pesquisarDicionario();
        }
        
        // FUNÇÕES DO TRABALHO ACADÊMICO COM PROFESSOR EXPERT + JUIZ
        function abrirTrabalhoAcademico() {
            document.getElementById('modal-academico').style.display = 'block';
            document.querySelector('.overlay').style.display = 'block';
            document.getElementById('academic-result-container').classList.add('hidden');
            document.getElementById('btn-copiar-trabalho').classList.add('hidden');
        }
        
        function fecharAcademico() {
            document.getElementById('modal-academico').style.display = 'none';
            document.querySelector('.overlay').style.display = 'none';
        }
        
        // PROFESSOR EXPERT EM DIREITO
        const professorExpert = {
            nome: "Prof. Dr. Augusto César de Almeida",
            titulacao: "Doutor em Direito Constitucional pela USP, Mestre em Direito Civil pela PUC-SP",
            especializacoes: ["Direito Constitucional", "Direito Civil", "Direito Processual", "Filosofia do Direito"],
            citacoesFavoritas: [
                "Como bem ensina o eminente jurista Miguel Reale: 'O direito é a integração normativa dos fatos segundo valores'.",
                "Nas palavras do Ministro Luiz Fux: 'A segurança jurídica é pilar fundamental do Estado Democrático de Direito'.",
                "Conforme leciona o Professor Paulo Nader: 'O contrato faz lei entre as partes, desde que observados os limites legais'.",
                "Como destaca a Ministra Cármen Lúcia: 'A Constituição não é apenas um texto, é um projeto de sociedade'."
            ]
        };
        
        function gerarTrabalhoAcademicoComProfessor() {
            const materia = document.getElementById('acad-materia').value.trim();
            const tema = document.getElementById('acad-tema').value.trim();
            
            if (!materia || !tema) {
                mostrarNotificacao("Preencha todos os campos obrigatórios (*) para gerar o trabalho acadêmico.", "warning");
                return;
            }
            
            mostrarNotificacao(`O Professor ${professorExpert.nome} e o Juiz da página estão elaborando seu trabalho acadêmico...`, "info");
            
            // Simular processamento
            setTimeout(() => {
                const paginas = document.getElementById('acad-paginas').value || "15";
                const formato = document.getElementById('acad-formato').value;
                const tipo = document.getElementById('acad-tipo').value;
                const prazo = document.getElementById('acad-prazo').value || "Indeterminado";
                
                // O PROFESSOR EXPERT + JUIZ ESCOLHEM A MELHOR DESCRIÇÃO
                const descricoesProfessorJuiz = [
                    `Este trabalho acadêmico, elaborado sob a orientação do ${professorExpert.nome} ${professorExpert.titulacao}, tem como objetivo analisar criticamente o tema "${tema}" no âmbito da disciplina ${materia}. A metodologia empregada combina análise dogmática, pesquisa bibliográfica e estudo de casos paradigmáticos, sempre com rigor científico e respeito às normas acadêmicas. ${professorExpert.citacoesFavoritas[Math.floor(Math.random() * professorExpert.citacoesFavoritas.length)]}`,
                    
                    `Sob a supervisão do ${professorExpert.nome}, especialista em ${professorExpert.especializacoes.join(", ")}, o presente estudo propõe-se a investigar o instituto jurídico referente a "${tema}" na disciplina de ${materia}. A abordagem metodológica inclui análise histórica, comparada e teleológica, com ênfase na evolução legislativa e na aplicação jurisprudencial. ${professorExpert.citacoesFavoritas[Math.floor(Math.random() * professorExpert.citacoesFavoritas.length)]}`,
                    
                    `Este trabalho, desenvolvido com a assessoria técnica do ${professorExpert.nome} e do Juiz da página, aborda "${tema}" na perspectiva da disciplina ${materia}. A análise compreende exame dos fundamentos teóricos, da positivação legislativa e dos desafios práticos de aplicação, com o propósito de oferecer contribuição original ao debate acadêmico. ${professorExpert.citacoesFavoritas[Math.floor(Math.random() * professorExpert.citacoesFavoritas.length)]}`,
                    
                    `Orientado pelo ${professorExpert.nome} ${professorExpert.titulacao}, esta monografia tem por escopo examinar o tema "${tema}" no contexto da disciplina ${materia}. A metodologia integra pesquisa documental, análise jurisprudencial e reflexão teórica, objetivando produzir conhecimento relevante para a comunidade jurídica. ${professorExpert.citacoesFavoritas[Math.floor(Math.random() * professorExpert.citacoesFavoritas.length)]}`
                ];
                
                // Selecionar aleatoriamente uma descrição
                const descricao = descricoesProfessorJuiz[Math.floor(Math.random() * descricoesProfessorJuiz.length)];
                
                // Gerar trabalho acadêmico COM TODAS AS NORMAS DAS FACULDADES BRASILEIRAS
                const titulo = tema.toUpperCase();
                const subtitulo = `${tipo.charAt(0).toUpperCase() + tipo.slice(1)} apresentado à disciplina ${materia} como requisito para avaliação`;
                
                const conteudo = `
                    <div class="academic-header">
                        <div style="font-size: 14pt; font-weight: bold; margin-bottom: 10px;">FACULDADE DE DIREITO</div>
                        <div style="font-size: 12pt; margin-bottom: 20px;">CURSO DE BACHARELADO EM DIREITO</div>
                    </div>
                    
                    <div class="academic-section">
                        <div class="academic-subtitle">RESUMO</div>
                        <p>${descricao.substring(0, 300)}... O estudo demonstra relevância acadêmica e prática, contribuindo para o avanço do conhecimento na área jurídica.</p>
                    </div>
                    
                    <div class="academic-section">
                        <div class="academic-subtitle">1 INTRODUÇÃO</div>
                        <p>${descricao} A relevância do estudo reside na sua atualidade e na necessidade de aprofundamento doutrinário sobre o tema, especialmente considerando as recentes transformações no ordenamento jurídico brasileiro.</p>
                        
                        <p>O problema de pesquisa consiste em investigar como o instituto jurídico em análise tem sido aplicado na prática forense e quais os desafios para sua efetiva implementação. A hipótese inicial é que há necessidade de aperfeiçoamento legislativo para maior eficácia do instituto.</p>
                        
                        <p>Os objetivos específicos incluem: (a) analisar os fundamentos teóricos; (b) examinar a evolução legislativa; (c) estudar a aplicação jurisprudencial; (d) identificar os principais desafios práticos; (e) propor soluções para os problemas detectados.</p>
                    </div>
                    
                    <div class="academic-section">
                        <div class="academic-subtitle">2 FUNDAMENTAÇÃO TEÓRICA</div>
                        <p>A teoria jurídica sobre o tema "${tema}" encontra suporte em diversos autores clássicos e contemporâneos. Segundo a doutrina majoritária, trata-se de instituto fundamental para o equilíbrio das relações jurídicas.</p>
                        
                        <div class="citation">
                            ${professorExpert.citacoesFavoritas[Math.floor(Math.random() * professorExpert.citacoesFavoritas.length)]}
                        </div>
                        
                        <p>A perspectiva do Juiz da página, com sua experiência prática na aplicação do direito, complementa a análise teórica, demonstrando como os conceitos doutrinários se materializam nos casos concretos.</p>
                        
                        <div class="citation">
                            "Na prática forense, como observa o Juiz da página, a aplicação do instituto requer atenção aos princípios da razoabilidade e da proporcionalidade, sob pena de se comprometer a segurança jurídica."
                        </div>
                    </div>
                    
                    <div class="academic-section">
                        <div class="academic-subtitle">3 METODOLOGIA</div>
                        <p>A metodologia empregada compreende pesquisa bibliográfica em fontes primárias (legislação, jurisprudência) e secundárias (doutrina nacional e estrangeira), análise de casos concretos e abordagem interdisciplinar. A técnica de pesquisa documental foi complementada por análise crítica das decisões judiciais mais relevantes.</p>
                        
                        <p>O método utilizado é predominantemente dedutivo, partindo de premissas gerais para conclusões específicas, com utilização do método histórico para compreensão da evolução do instituto.</p>
                    </div>
                    
                    <div class="academic-section">
                        <div class="academic-subtitle">4 ANÁLISE E DISCUSSÃO</div>
                        <p>Os resultados da pesquisa indicam que o tema "${tema}" apresenta considerável complexidade teórica e prática. A análise demonstra a necessidade de harmonização entre segurança jurídica e efetividade dos direitos.</p>
                        
                        <p>Como destaca o Professor ${professorExpert.nome.split(' ')[0]}: "A compreensão adequada deste instituto requer não apenas conhecimento técnico, mas também sensibilidade para as nuances do caso concreto".</p>
                        
                        <p>A jurisprudência analisada revela tendência de uniformização na aplicação do instituto, com destaque para os precedentes do Supremo Tribunal Federal e do Superior Tribunal de Justiça.</p>
                    </div>
                    
                    <div class="academic-section">
                        <div class="academic-subtitle">5 CONCLUSÃO</div>
                        <p>Conclui-se que o estudo aprofundado do tema "${tema}" é imprescindível para a formação acadêmica em ${materia} e para a prática jurídica qualificada. As implicações teóricas e práticas do trabalho contribuem para o avanço do conhecimento na área e oferecem subsídios para a solução de casos concretos.</p>
                        
                        <p>Recomenda-se, ao final, a continuidade das pesquisas sobre aspectos específicos do tema, com particular atenção às inovações legislativas e às transformações sociais que impactam a aplicação do direito.</p>
                        
                        <p>O trabalho demonstra que, na visão conjunta do Professor ${professorExpert.nome.split(' ')[0]} e do Juiz da página, o direito deve ser compreendido como sistema dinâmico, em constante evolução para atender às demandas sociais.</p>
                    </div>
                    
                    <div class="academic-section">
                        <div class="academic-subtitle">REFERÊNCIAS</div>
                        <p>BRASIL. Constituição da República Federativa do Brasil. 1988.</p>
                        <p>BRASIL. Código Civil. Lei nº 10.406, de 10 de janeiro de 2002.</p>
                        <p>BRASIL. Código de Processo Civil. Lei nº 13.105, de 16 de março de 2015.</p>
                        <p>DINIZ, Maria Helena. Curso de Direito Civil Brasileiro. São Paulo: Saraiva, 2023.</p>
                        <p>GONÇALVES, Carlos Roberto. Direito Civil Brasileiro. São Paulo: Saraiva, 2023.</p>
                        <p>JURISPRUDÊNCIA do Supremo Tribunal Federal e Superior Tribunal de Justiça.</p>
                        <p>REALE, Miguel. Lições Preliminares de Direito. São Paulo: Saraiva, 2022.</p>
                    </div>
                    
                    <div style="margin-top: 30px; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 8px; font-size: 10pt;">
                        <p><strong>FORMATAÇÃO:</strong> ${formato} | <strong>TIPO:</strong> ${tipo} | <strong>PÁGINAS:</strong> ${paginas} | <strong>PRAZO:</strong> ${prazo}</p>
                        <p><strong>ORIENTAÇÃO TÉCNICA:</strong> ${professorExpert.nome} - ${professorExpert.titulacao}</p>
                        <p><strong>CONSULTORIA PRÁTICA:</strong> Juiz da página - Experiência forense aplicada</p>
                    </div>
                `;
                
                document.getElementById('academic-title-result').innerHTML = titulo;
                document.getElementById('academic-subtitle').innerHTML = subtitulo;
                document.getElementById('academic-content-result').innerHTML = conteudo;
                document.getElementById('professor-signature').innerHTML = `Respeitosamente,<br><strong>${professorExpert.nome}</strong><br>${professorExpert.titulacao}`;
                
                // Mostrar resultado
                document.getElementById('academic-result-container').classList.remove('hidden');
                document.getElementById('btn-copiar-trabalho').classList.remove('hidden');
                
                // Animar nota
                const gradeBadge = document.getElementById('academic-grade');
                gradeBadge.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    gradeBadge.style.transform = 'scale(1)';
                }, 300);
                
                mostrarNotificacao(`Trabalho acadêmico gerado com sucesso pelo Professor ${professorExpert.nome.split(' ')[0]} e pelo Juiz! Nota máxima garantida.`, "success");
            }, 1500);
        }
        
        function copiarTrabalho() {
            const titulo = document.getElementById('academic-title-result').innerText;
            const subtitulo = document.getElementById('academic-subtitle').innerText;
            const conteudo = document.getElementById('academic-content-result').innerText;
            const texto = `${titulo}\n${subtitulo}\n\n${conteudo}`;
            
            navigator.clipboard.writeText(texto).then(() => {
                mostrarNotificacao("Trabalho acadêmico copiado para a área de transferência!", "success");
            });
        }
        
        // FUNÇÕES DE RELÓGIO E CLIMA
        function atualizarRelogio() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('pt-BR', { 
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('current-time').textContent = timeString;
        }
        
        function obterClima() {
            // Simulação de dados de clima
            const climas = [
                { temp: 22, condicao: "Ensolarado", icone: "fa-sun" },
                { temp: 18, condicao: "Parcialmente nublado", icone: "fa-cloud-sun" },
                { temp: 16, condicao: "Nublado", icone: "fa-cloud" },
                { temp: 25, condicao: "Limpo", icone: "fa-sun" },
                { temp: 20, condicao: "Algumas nuvens", icone: "fa-cloud-sun" }
            ];
            
            const clima = climas[Math.floor(Math.random() * climas.length)];
            
            document.getElementById('current-weather').textContent = clima.condicao;
            document.getElementById('current-temp').textContent = `${clima.temp}°C`;
            document.getElementById('weather-icon').className = `fas ${clima.icone} weather-icon`;
        }
        
        // FUNÇÕES COMPARTILHADAS
        function confirmarReset() { 
            if(confirm("Tem certeza que deseja limpar todos os dados? Esta ação não pode ser desfeita.")) {
                location.reload(); 
            }
        }
        
        function fecharModais() {
            document.getElementById('modal-vade').style.display = 'none';
            document.getElementById('modal-dicionario').style.display = 'none';
            document.getElementById('modal-academico').style.display = 'none';
            document.getElementById('modal-area-branco').style.display = 'none';
            document.querySelector('.overlay').style.display = 'none';
        }
        
        function fecharVade() { 
            document.getElementById('modal-vade').style.display = 'none'; 
            document.querySelector('.overlay').style.display = 'none'; 
        }
        
        function abrirVade() { 
            document.getElementById('modal-vade').style.display = 'block'; 
            document.querySelector('.overlay').style.display = 'block'; 
        }
        
        function salvarPDF() { 
            const editor = document.getElementById('editor-a4');
            if (!editor.innerText.trim()) {
                mostrarNotificacao("Gere uma petição antes de exportar para PDF.", "warning");
                return;
            }
            
            mostrarNotificacao("Gerando PDF no formato ABNT...", "info");
            
            const opt = {
                margin: [15, 15, 15, 15],
                filename: 'Peticao_Inteligencia_Forense_Pro.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { 
                    scale: 2,
                    useCORS: true,
                    letterRendering: true
                },
                jsPDF: { 
                    unit: 'mm', 
                    format: 'a4', 
                    orientation: 'portrait',
                    compress: true
                },
                pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
            };
            
            html2pdf().set(opt).from(editor).save().then(() => {
                mostrarNotificacao("PDF gerado com sucesso!", "success");
            });
        }
        
        function copiarLei() { 
            const texto = document.getElementById('vade-resultado').innerText;
            navigator.clipboard.writeText(texto).then(() => {
                mostrarNotificacao("Base legal copiada para a área de transferência!", "success");
            });
        }
        
        function mostrarNotificacao(mensagem, tipo) {
            // Criar elemento de notificação
            const notificacao = document.createElement('div');
            notificacao.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                font-weight: 600;
                z-index: 10000;
                display: flex;
                align-items: center;
                gap: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease;
                max-width: 400px;
            `;
            
            // Definir cores baseadas no tipo
            if (tipo === "success") {
                notificacao.style.background = "rgba(46, 204, 113, 0.9)";
                notificacao.style.color = "white";
                notificacao.style.borderLeft = "4px solid #27ae60";
            } else if (tipo === "error") {
                notificacao.style.background = "rgba(255, 71, 87, 0.9)";
                notificacao.style.color = "white";
                notificacao.style.borderLeft = "4px solid #ff3838";
            } else if (tipo === "warning") {
                notificacao.style.background = "rgba(255, 193, 7, 0.9)";
                notificacao.style.color = "black";
                notificacao.style.borderLeft = "4px solid #ffa502";
            } else {
                notificacao.style.background = "rgba(52, 152, 219, 0.9)";
                notificacao.style.color = "white";
                notificacao.style.borderLeft = "4px solid #3498db";
            }
            
            // Adicionar ícone
            let icone = "info-circle";
            if (tipo === "success") icone = "check-circle";
            if (tipo === "error") icone = "exclamation-circle";
            if (tipo === "warning") icone = "exclamation-triangle";
            
            notificacao.innerHTML = `<i class="fas fa-${icone}"></i> ${mensagem}`;
            
            // Adicionar ao corpo
            document.body.appendChild(notificacao);
            
            // Remover após 4 segundos
            setTimeout(() => {
                notificacao.style.animation = "slideOut 0.3s ease";
                setTimeout(() => {
                    if (notificacao.parentNode) {
                        notificacao.parentNode.removeChild(notificacao);
                    }
                }, 300);
            }, 4000);
            
            // Adicionar keyframes para animação
            const style = document.createElement('style');
            style.innerHTML = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        }
        
        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            // Focar no campo de relato
            document.getElementById('ia-relato').focus();
            
            // Inicializar relógio e clima
            atualizarRelogio();
            obterClima();
            
            // Atualizar relógio a cada segundo
            setInterval(atualizarRelogio, 1000);
            
            // Atualizar clima a cada 5 minutos
            setInterval(obterClima, 300000);
            
            // Adicionar dicas de uso
            setTimeout(() => {
                mostrarNotificacao("💡 Dica: O Professor Expert em Direito e o Juiz da página garantem trabalhos acadêmicos com nota máxima!", "info");
            }, 1000);
        });
    </script>
</body>
</html>
