<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Inteligência Forense Pro - IA jurídica que economiza 80% do tempo do advogado na elaboração de petições. Análise automática de casos e geração de documentos prontos.">
    <title>Inteligência Forense Pro | IA Jurídica para Advogados</title>
    
    <!-- Bibliotecas externas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.21/mammoth.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #0a192f;
            --secondary: #172a46;
            --accent: #c5a059;
            --accent-light: #d4b47c;
            --danger: #ff4757;
            --success: #2ecc71;
            --text-light: #e6f1ff;
            --text-gray: #8892b0;
            --glass: rgba(255, 255, 255, 0.05);
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            margin: 0;
            background: var(--primary);
            color: var(--text-light);
            overflow-x: hidden;
            line-height: 1.6;
        }
        
        .bg-animated {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(135deg, #0a192f 0%, #112240 50%, #1a2a3a 100%);
        }
        
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.03;
            background-image: 
                radial-gradient(circle at 25% 25%, var(--accent) 2px, transparent 2px),
                radial-gradient(circle at 75% 75%, var(--accent) 2px, transparent 2px);
            background-size: 80px 80px;
        }
        
        .header {
            background: rgba(10, 25, 47, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(197, 160, 89, 0.2);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            max-width: 1800px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-icon {
            color: var(--accent);
            font-size: 24px;
        }
        
        .logo-text {
            font-weight: 700;
            font-size: 1.5rem;
            background: linear-gradient(to right, var(--accent), var(--accent-light));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 0.5px;
        }
        
        .logo-subtitle {
            font-size: 0.7rem;
            color: var(--text-gray);
            font-weight: 500;
            margin-top: -5px;
        }
        
        /* Botões adicionais acima do Vade Mecum */
        .additional-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .btn-dictionary {
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            border: none;
        }
        
        .btn-academic {
            background: linear-gradient(to right, #9b59b6, #8e44ad);
            color: white;
            border: none;
        }
        
        .container {
            width: 100%;
            max-width: 1800px;
            display: grid;
            grid-template-columns: 460px 1fr;
            gap: 25px;
            padding: 25px;
            margin: 0 auto;
        }
        
        /* SIDEBAR */
        .sidebar {
            background: rgba(23, 42, 70, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(197, 160, 89, 0.15);
            padding: 25px;
            border-radius: 16px;
            height: calc(100vh - 100px);
            overflow-y: auto;
            position: sticky;
            top: 90px;
            display: flex;
            flex-direction: column;
            box-shadow: var(--shadow);
        }
        
        .section-title {
            color: var(--accent);
            font-size: 0.85rem;
            border-bottom: 1px solid rgba(197, 160, 89, 0.3);
            margin: 20px 0 12px;
            padding-bottom: 8px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .section-title i {
            font-size: 0.9rem;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            font-size: 0.75rem;
            color: var(--text-gray);
            margin-bottom: 6px;
            font-weight: 600;
        }
        
        .input-group input, .input-group textarea {
            width: 100%;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 8px;
            font-size: 0.9rem;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .input-group input:focus, .input-group textarea:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(197, 160, 89, 0.2);
        }
        
        .input-group textarea {
            resize: vertical;
            min-height: 120px;
            font-family: 'Inter', sans-serif;
        }
        
        /* PAINEL DE ANÁLISE */
        .veredito-panel {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(197, 160, 89, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .veredito-header {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .score-container {
            margin-bottom: 15px;
        }
        
        .score-label {
            font-size: 0.7rem;
            color: var(--text-gray);
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }
        
        .score-bar {
            background: rgba(255, 255, 255, 0.1);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .score-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease-in-out;
        }
        
        .veredito-comentario {
            font-size: 0.75rem;
            color: var(--text-light);
            line-height: 1.4;
            padding: 12px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
            border-left: 3px solid var(--accent);
        }
        
        /* ÁREA PRINCIPAL */
        .main-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .toolbar {
            width: 100%;
            max-width: 210mm;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px 20px;
            background: rgba(23, 42, 70, 0.7);
            border-radius: 12px;
            box-shadow: var(--shadow);
        }
        
        .area-info {
            color: var(--accent);
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .area-tag {
            background: rgba(197, 160, 89, 0.15);
            color: var(--accent-light);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        /* Relógio e clima */
        .weather-time {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 0.85rem;
        }
        
        .weather-widget, .time-widget {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .weather-icon {
            font-size: 1.2rem;
            color: var(--accent);
        }
        
        .temp {
            font-weight: 700;
            color: var(--accent-light);
        }
        
        #editor-a4 {
            background: white;
            color: black;
            width: 210mm;
            min-height: 297mm;
            padding: 30mm 25mm;
            box-shadow: var(--shadow);
            font-family: 'Times New Roman', Times, serif;
            font-size: 12pt;
            line-height: 1.6;
            text-align: justify;
            outline: none;
            border-radius: 8px;
            overflow: auto;
            transition: all 0.3s ease;
        }
        
        #editor-a4:focus {
            box-shadow: 0 0 0 2px rgba(197, 160, 89, 0.3), var(--shadow);
        }
        
        /* BOTÕES */
        .btn {
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            width: 100%;
            margin-top: 10px;
            font-size: 0.85rem;
            letter-spacing: 0.3px;
        }
        
        .btn-primary {
            background: linear-gradient(to right, var(--accent), var(--accent-light));
            color: #000;
            font-weight: 700;
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--accent);
            border: 1px solid var(--accent);
        }
        
        .btn-upload {
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-light);
            border: 1px dashed var(--accent);
        }
        
        .btn-danger {
            background: transparent;
            border: 1px solid var(--danger);
            color: var(--danger);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn-primary:hover {
            background: linear-gradient(to right, var(--accent-light), var(--accent));
        }
        
        .btn-secondary:hover {
            background: rgba(197, 160, 89, 0.1);
        }
        
        .btn-danger:hover {
            background: rgba(255, 71, 87, 0.1);
        }
        
        /* MODAIS */
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 800px;
            background: var(--secondary);
            border: 1px solid var(--accent);
            border-radius: 16px;
            z-index: 2000;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: modalFadeIn 0.3s ease;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translate(-50%, -60%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(197, 160, 89, 0.2);
        }
        
        .modal-title {
            color: var(--accent);
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .modal-close {
            color: var(--text-gray);
            font-size: 1.2rem;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .modal-close:hover {
            color: var(--accent);
        }
        
        .modal-content {
            height: 400px;
            overflow-y: auto;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 8px;
            color: var(--text-light);
            border: 1px solid rgba(255, 255, 255, 0.05);
            line-height: 1.7;
            font-size: 0.95rem;
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1500;
        }
        
        /* Formulários dentro dos modais */
        .modal-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .input-group {
            flex: 1;
            margin-bottom: 0;
        }
        
        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .search-box input {
            flex: 1;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 8px;
            font-size: 0.9rem;
            outline: none;
        }
        
        .search-box button {
            padding: 12px 20px;
            background: var(--accent);
            color: black;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* Resultados do dicionário */
        .dictionary-result {
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border-left: 3px solid #3498db;
            margin-top: 20px;
        }
        
        .word-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .word {
            font-size: 1.3rem;
            font-weight: 700;
            color: #3498db;
        }
        
        .word-class {
            font-style: italic;
            color: var(--text-gray);
            font-size: 0.9rem;
        }
        
        .definition {
            margin: 10px 0;
            line-height: 1.6;
        }
        
        .example {
            font-style: italic;
            color: var(--accent-light);
            padding: 10px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 5px;
            margin-top: 10px;
        }
        
        /* Resultado do trabalho acadêmico */
        .academic-result {
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border: 1px solid rgba(155, 89, 182, 0.3);
        }
        
        .academic-title {
            color: #9b59b6;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .academic-content {
            line-height: 1.7;
        }
        
        .grade-badge {
            display: inline-block;
            background: linear-gradient(to right, #2ecc71, #27ae60);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
            margin-top: 15px;
        }
        
        /* BENEFÍCIOS */
        .benefits-bar {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px;
            background: rgba(197, 160, 89, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(197, 160, 89, 0.1);
        }
        
        .benefit {
            text-align: center;
            color: var(--text-gray);
        }
        
        .benefit i {
            color: var(--accent);
            font-size: 1.2rem;
            margin-bottom: 8px;
        }
        
        .benefit-text {
            font-size: 0.7rem;
            font-weight: 600;
        }
        
        /* RESPONSIVIDADE */
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .sidebar {
                height: auto;
                position: static;
            }
            
            #editor-a4 {
                width: 100%;
                min-height: 500px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .toolbar {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .weather-time {
                width: 100%;
                justify-content: space-between;
            }
            
            .benefits-bar {
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .benefit {
                flex: 1 0 calc(50% - 15px);
            }
            
            .form-row {
                flex-direction: column;
                gap: 10px;
            }
        }
        
        /* UTILIDADES */
        .hidden {
            display: none;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(197, 160, 89, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(197, 160, 89, 0); }
            100% { box-shadow: 0 0 0 0 rgba(197, 160, 89, 0); }
        }
        
        .highlight {
            color: var(--accent);
            font-weight: 700;
        }
        
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-light);
        }
    </style>
</head>
<body>
    <div class="bg-animated"></div>
    <div class="bg-pattern"></div>
    
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div>
                    <div class="logo-text">INTELIGÊNCIA FORENSE PRO</div>
                    <div class="logo-subtitle">IA JURÍDICA • ECONOMIA DE TEMPO • PRECISÃO LEGAL</div>
                </div>
            </div>
            <div class="weather-time">
                <div class="time-widget">
                    <i class="fas fa-clock"></i>
                    <span id="current-time">Carregando...</span>
                </div>
                <div class="weather-widget">
                    <i class="fas fa-sun weather-icon" id="weather-icon"></i>
                    <div>
                        <div id="current-weather">Carregando clima...</div>
                        <div class="temp" id="current-temp">--°C</div>
                    </div>
                </div>
            </div>
            <div class="benefits-bar" style="background: transparent; padding: 0; border: none;">
                <div class="benefit">
                    <i class="fas fa-clock"></i>
                    <div class="benefit-text">Economize 80% do tempo</div>
                </div>
                <div class="benefit">
                    <i class="fas fa-balance-scale"></i>
                    <div class="benefit-text">Análise jurídica automática</div>
                </div>
                <div class="benefit">
                    <i class="fas fa-file-contract"></i>
                    <div class="benefit-text">Documentos ABNT prontos</div>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <aside class="sidebar">
            <!-- Botões adicionais -->
            <div class="additional-buttons">
                <button class="btn btn-dictionary" onclick="abrirDicionario()">
                    <i class="fas fa-book"></i> DICIONÁRIO AURÉLIO
                </button>
                <button class="btn btn-academic" onclick="abrirTrabalhoAcademico()">
                    <i class="fas fa-graduation-cap"></i> CRIAR TRABALHO ACADÊMICO
                </button>
            </div>
            
            <button class="btn btn-secondary pulse" onclick="abrirVade()">
                <i class="fas fa-balance-scale"></i> VADE MECUM INTELIGENTE
            </button>
            
            <div class="section-title">
                <i class="fas fa-clipboard-list"></i> DESCRIÇÃO DO CASO
            </div>
            <div class="input-group">
                <label for="ia-relato">Relato do caso ou transcrição</label>
                <textarea id="ia-relato" rows="8" placeholder="Descreva os fatos do caso aqui ou faça upload de um documento para análise automática..."></textarea>
            </div>
            
            <div id="veredito-panel" class="veredito-panel">
                <div class="veredito-header">
                    <i class="fas fa-chart-line"></i> ANÁLISE JURÍDICA DA IA
                </div>
                
                <div class="score-container">
                    <div class="score-label">
                        <span>PROBABILIDADE DE SUCESSO:</span>
                        <span id="percent-juiz">0%</span>
                    </div>
                    <div class="score-bar">
                        <div id="bar-juiz" class="score-fill" style="background: var(--success); width: 0%;"></div>
                    </div>
                </div>
                
                <div id="juri-box" class="hidden">
                    <div class="score-label">
                        <span>APROVAÇÃO DO JÚRI:</span>
                        <span id="percent-juri">0%</span>
                    </div>
                    <div class="score-bar">
                        <div id="bar-juri" class="score-fill" style="background: var(--accent); width: 0%;"></div>
                    </div>
                </div>
                
                <div id="juiz-comentario" class="veredito-comentario">
                    Análise será exibida aqui após processamento do caso.
                </div>
            </div>
            
            <div class="section-title">
                <i class="fas fa-gavel"></i> DADOS PROCESSUAIS (ART. 319 CPC)
            </div>
            <div class="input-group">
                <label for="in-juizo">JUÍZO / COMARCA</label>
                <input type="text" id="in-juizo" placeholder="Ex: Vara Cível da Comarca de São Paulo/SP">
            </div>
            <div class="input-group">
                <label for="in-partes">PARTES ENVOLVIDAS</label>
                <input type="text" id="in-partes" placeholder="Ex: João Silva (autor) vs. Empresa XYZ (ré)">
            </div>
            <div class="input-group">
                <label for="in-valor">VALOR DA CAUSA (R$)</label>
                <input type="text" id="in-valor" placeholder="Ex: 50.000,00">
            </div>
            
            <div class="benefits-bar">
                <div class="benefit">
                    <i class="fas fa-bolt"></i>
                    <div class="benefit-text">Rápido</div>
                </div>
                <div class="benefit">
                    <i class="fas fa-shield-alt"></i>
                    <div class="benefit-text">Confiável</div>
                </div>
                <div class="benefit">
                    <i class="fas fa-check-circle"></i>
                    <div class="benefit-text">Preciso</div>
                </div>
            </div>
            
            <div style="margin-top: auto;">
                <button class="btn btn-primary" onclick="analisarEGerar()">
                    <i class="fas fa-magic"></i> GERAR PETIÇÃO AUTOMÁTICA
                </button>
                
                <label class="btn btn-upload">
                    <i class="fas fa-cloud-upload-alt"></i> ANALISAR DOCUMENTO
                    <input type="file" id="file-upload" style="display:none" onchange="processarArquivo(this)" accept=".docx,.txt,.pdf">
                </label>
                
                <button class="btn" onclick="gerarEmBranco()" style="background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.1);">
                    <i class="fas fa-file-alt"></i> MODELO EM BRANCO
                </button>
                
                <button class="btn btn-danger" onclick="confirmarReset()">
                    <i class="fas fa-redo"></i> LIMPAR TUDO
                </button>
            </div>
        </aside>
        
        <main class="main-content">
            <div class="toolbar">
                <div class="area-info">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="label-area">AGUARDANDO ANÁLISE DO CASO...</span>
                    <div id="area-tag" class="area-tag hidden"></div>
                </div>
                <button class="btn btn-primary" style="width: auto; padding: 10px 25px;" onclick="salvarPDF()">
                    <i class="fas fa-file-pdf"></i> EXPORTAR PETIÇÃO (PDF ABNT)
                </button>
            </div>
            
            <div id="editor-a4" contenteditable="true" placeholder="A petição será gerada automaticamente após análise do caso...">
                <!-- Conteúdo será inserido aqui -->
            </div>
        </main>
    </div>
    
    <!-- OVERLAY PARA MODAIS -->
    <div class="overlay" onclick="fecharModais()"></div>
    
    <!-- MODAL VADE MECUM -->
    <div id="modal-vade" class="modal">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-balance-scale"></i> BASE LEGAL INTELIGENTE - VADE MECUM 2025
            </div>
            <i class="fas fa-times modal-close" onclick="fecharVade()"></i>
        </div>
        <div id="vade-resultado" class="modal-content">
            <p>Com base na análise do seu caso, as seguintes disposições legais são aplicáveis:</p>
            <ul style="margin-top: 15px; padding-left: 20px;">
                <li><strong>CPC/2015 - Art. 319:</strong> Conteúdo da petição inicial.</li>
                <li><strong>CPC/2015 - Art. 335:</strong> Requisitos da resposta do réu.</li>
                <li><strong>Lei 13.467/2017:</strong> Reforma Trabalhista (se aplicável).</li>
                <li><strong>Constituição Federal - Art. 5º:</strong> Princípios fundamentais.</li>
            </ul>
            <p style="margin-top: 20px; color: var(--accent); font-weight: 600;">
                <i class="fas fa-lightbulb"></i> DICA: A IA identificará automaticamente todas as leis pertinentes ao analisar seu caso completo.
            </p>
        </div>
        <button class="btn btn-primary" onclick="copiarLei()">
            <i class="fas fa-copy"></i> COPIAR BASE LEGAL
        </button>
    </div>
    
    <!-- MODAL DICIONÁRIO AURÉLIO -->
    <div id="modal-dicionario" class="modal">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-book"></i> DICIONÁRIO AURÉLIO - CONSULTA EM TEMPO REAL
            </div>
            <i class="fas fa-times modal-close" onclick="fecharDicionario()"></i>
        </div>
        <div class="modal-content">
            <div class="search-box">
                <input type="text" id="dicionario-input" placeholder="Digite uma palavra para consultar no Dicionário Aurélio...">
                <button onclick="pesquisarDicionario()">
                    <i class="fas fa-search"></i> Pesquisar
                </button>
            </div>
            
            <div id="dicionario-resultado">
                <div class="dictionary-result">
                    <div class="word-header">
                        <div>
                            <span class="word">Inteligência</span>
                            <span class="word-class">substantivo feminino</span>
                        </div>
                    </div>
                    <div class="definition">
                        <p>1. Faculdade de entender, compreender, aprender; intelecto.</p>
                        <p>2. Capacidade mental de raciocinar, pensar, interpretar e compreender ideias.</p>
                        <p>3. Conjunto de funções mentais que permitem resolver problemas, criar e aprender.</p>
                    </div>
                    <div class="example">
                        "A <strong>inteligência</strong> forense utiliza ferramentas tecnológicas para análise de evidências digitais."
                    </div>
                </div>
                
                <div class="dictionary-result" style="margin-top: 20px; border-left-color: #e74c3c;">
                    <div class="word-header">
                        <div>
                            <span class="word">Forense</span>
                            <span class="word-class">adjetivo</span>
                        </div>
                    </div>
                    <div class="definition">
                        <p>1. Relativo a foro, tribunal ou à administração da justiça.</p>
                        <p>2. Relativo à aplicação de conhecimentos científicos na investigação de crimes.</p>
                    </div>
                    <div class="example">
                        "A perícia <strong>forense</strong> é essencial para a elucidação de crimes complexos."
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- MODAL TRABALHO ACADÊMICO -->
    <div id="modal-academico" class="modal">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-graduation-cap"></i> CRIADOR DE TRABALHO ACADÊMICO - NOTA MÁXIMA GARANTIDA
            </div>
            <i class="fas fa-times modal-close" onclick="fecharAcademico()"></i>
        </div>
        <div class="modal-content">
            <p style="margin-bottom: 20px; color: var(--accent); font-weight: 600;">
                <i class="fas fa-lightbulb"></i> Preencha os campos abaixo para que o Juiz da página elabore um trabalho acadêmico com nota máxima:
            </p>
            
            <form class="modal-form" id="form-academico">
                <div class="form-row">
                    <div class="input-group">
                        <label for="acad-materia">Matéria / Disciplina *</label>
                        <input type="text" id="acad-materia" placeholder="Ex: Direito Constitucional, Processo Penal..." required>
                    </div>
                    <div class="input-group">
                        <label for="acad-tema">Tema do Trabalho *</label>
                        <input type="text" id="acad-tema" placeholder="Ex: Análise do Habeas Corpus na Constituição..." required>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="acad-descricao">Descrição Detalhada *</label>
                    <textarea id="acad-descricao" rows="4" placeholder="Descreva o que precisa ser feito, objetivos, requisitos, pontos importantes..." required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="input-group">
                        <label for="acad-paginas">Número de Páginas</label>
                        <input type="number" id="acad-paginas" placeholder="Ex: 15" min="5" max="100">
                    </div>
                    <div class="input-group">
                        <label for="acad-formato">Formato de Citação</label>
                        <select id="acad-formato" style="padding: 12px 15px; background: rgba(0,0,0,0.25); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 8px; width: 100%;">
                            <option value="ABNT">ABNT</option>
                            <option value="APA">APA</option>
                            <option value="Vancouver">Vancouver</option>
                            <option value="Chicago">Chicago</option>
                        </select>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="acad-prazo">Prazo de Entrega</label>
                    <input type="date" id="acad-prazo">
                </div>
            </form>
            
            <div id="academic-result-container" class="hidden">
                <div class="academic-result">
                    <div class="academic-title" id="academic-title-result"></div>
                    <div class="academic-content" id="academic-content-result"></div>
                    <div style="text-align: center; margin-top: 20px;">
                        <span class="grade-badge" id="academic-grade">NOTA: 10.0</span>
                    </div>
                </div>
            </div>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn btn-primary" onclick="gerarTrabalhoAcademico()" style="flex: 1;">
                <i class="fas fa-magic"></i> GERAR TRABALHO (NOTA MÁXIMA)
            </button>
            <button class="btn btn-secondary" onclick="copiarTrabalho()" style="flex: 1;" id="btn-copiar-trabalho" class="hidden">
                <i class="fas fa-copy"></i> COPIAR TRABALHO
            </button>
        </div>
    </div>
    
    <script>
        // MOTOR DE PROCESSAMENTO DE ARQUIVO
        function processarArquivo(input) {
            const file = input.files[0];
            if (!file) return;
            
            const fileName = file.name;
            const extension = fileName.split('.').pop().toLowerCase();
            
            // Verificar tamanho do arquivo (limite de 5MB)
            if (file.size > 5 * 1024 * 1024) {
                alert("Arquivo muito grande. Por favor, selecione um arquivo menor que 5MB.");
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                let textoExtraido = "";
                
                if (extension === 'docx') {
                    mammoth.extractRawText({ arrayBuffer: e.target.result })
                        .then(res => { 
                            textoExtraido = res.value;
                            document.getElementById('ia-relato').value = textoExtraido;
                            mostrarNotificacao("Documento carregado com sucesso! Analisando conteúdo...", "success");
                            setTimeout(() => analisarEGerar(), 500);
                        })
                        .catch(err => {
                            console.error(err);
                            mostrarNotificacao("Erro ao processar documento DOCX. Tente novamente.", "error");
                        });
                } else if (extension === 'txt') {
                    textoExtraido = e.target.result;
                    document.getElementById('ia-relato').value = textoExtraido;
                    mostrarNotificacao("Documento de texto carregado com sucesso!", "success");
                    setTimeout(() => analisarEGerar(), 500);
                } else if (extension === 'pdf') {
                    // Para PDF, informar que não é suportado para extração automática
                    mostrarNotificacao("Para arquivos PDF, copie e cole o conteúdo manualmente no campo de descrição.", "info");
                    document.getElementById('ia-relato').value = `[ARQUIVO PDF CARREGADO: ${fileName}]\n\nPor favor, cole o conteúdo do PDF aqui para análise.`;
                    document.getElementById('ia-relato').focus();
                } else {
                    mostrarNotificacao("Formato não suportado. Use DOCX, TXT ou cole o conteúdo manualmente.", "error");
                }
            };
            
            if (extension === 'docx' || extension === 'txt') {
                if (extension === 'docx') {
                    reader.readAsArrayBuffer(file);
                } else {
                    reader.readAsText(file);
                }
            } else {
                mostrarNotificacao(`Arquivo .${extension} selecionado.`, "info");
            }
        }
        
        // FUNÇÃO PRINCIPAL DE ANÁLISE E GERAÇÃO
        function analisarEGerar() {
            const relato = document.getElementById('ia-relato').value.trim();
            if (!relato) {
                mostrarNotificacao("Por favor, insira uma descrição do caso ou faça upload de um documento.", "warning");
                return;
            }
            
            const relatoLower = relato.toLowerCase();
            const editor = document.getElementById('editor-a4');
            const panel = document.getElementById('veredito-panel');
            const juriBox = document.getElementById('juri-box');
            const areaTag = document.getElementById('area-tag');
            
            // Mostrar painel de análise
            panel.style.display = "block";
            
            // Inicializar variáveis
            let area = "Cível";
            let rito = "Petição Inicial";
            let lei = "Art. 319 do CPC/2015";
            let juizP = 75;
            let juriP = 0;
            let tempoEconomizado = "4-6 horas";
            let comentario = "Caso padrão com boas perspectivas processuais. Documento gerado conforme rito ordinário do CPC.";
            
            // CLASSIFICADOR DE ÁREA JURÍDICA
            if (relatoLower.includes("matar") || relatoLower.includes("homicídio") || relatoLower.includes("infanticídio") || 
                relatoLower.includes("roubo") || relatoLower.includes("furto") || relatoLower.includes("estupro") ||
                relatoLower.includes("tráfico") || relatoLower.includes("crime") || relatoLower.includes("penal")) {
                area = "Criminal";
                rito = "Resposta à Acusação / Defesa Preliminar";
                lei = "Art. 396-A do CPP";
                juriBox.classList.remove("hidden");
                juriP = Math.floor(Math.random() * 30) + 20;
                juizP = Math.floor(Math.random() * 30) + 40;
                tempoEconomizado = "5-8 horas";
                comentario = "Rito Especial do Júri identificado. Recomenda-se focar em preliminares de nulidade e defesa técnica. Atenção aos prazos processuais.";
                
            } else if (relatoLower.includes("demissão") || relatoLower.includes("trabalho") || relatoLower.includes("hora extra") ||
                      relatoLower.includes("rescisão") || relatoLower.includes("fgts") || relatoLower.includes("verbas") ||
                      relatoLower.includes("assinou carta") || relatoLower.includes("assédio") || relatoLower.includes("acidente")) {
                area = "Trabalhista";
                rito = "Reclamação Trabalhista";
                lei = "Art. 840, §1º da CLT";
                juizP = Math.floor(Math.random() * 25) + 65;
                tempoEconomizado = "3-5 horas";
                comentario = "Cabe análise de liquidação de pedidos conforme Reforma Trabalhista de 2017. Documentação comprobatória é crucial.";
                
            } else if (relatoLower.includes("contrato") || relatoLower.includes("compra") || relatoLower.includes("venda") ||
                      relatoLower.includes("inadimplemento") || relatoLower.includes("cobrança") || relatoLower.includes("danos") ||
                      relatoLower.includes("indenização") || relatoLower.includes("empresarial") || relatoLower.includes("sociedade")) {
                area = "Cível";
                rito = "Petição Inicial";
                lei = "Art. 319 do CPC/2015";
                juizP = Math.floor(Math.random() * 30) + 60;
                tempoEconomizado = "2-4 horas";
                comentario = "Controvérsia de natureza cível com fundamentação sólida. Atenção aos requisitos do art. 319 do CPC.";
                
            } else if (relatoLower.includes("divórcio") || relatoLower.includes("pensão") || relatoLower.includes("alimentos") ||
                      relatoLower.includes("guarda") || relatoLower.includes("visitação") || relatoLower.includes("família") ||
                      relatoLower.includes("união estável") || relatoLower.includes("inventário")) {
                area = "Família";
                rito = "Petição Inicial";
                lei = "Art. 319 do CPC c/c Lei 13.105/2015";
                juizP = Math.floor(Math.random() * 25) + 65;
                tempoEconomizado = "3-5 horas";
                comentario = "Matéria de direito de família. Priorizar acordo quando possível. Atenção aos aspectos emocionais do caso.";
            }
            
            // CHECAGEM DE DIREITO INTERTEMPORAL
            const anoMatch = relato.match(/\b(19\d{2}|20\d{2})\b/);
            if(anoMatch) {
                const ano = parseInt(anoMatch[0]);
                if (ano < 2015 && (area === "Cível" || area === "Trabalhista")) {
                    comentario += `<br><br><span class="highlight">⚠️ ATENÇÃO:</span> Fato ocorrido em ${ano}. Lei material antiga pode ser aplicável, mas o rito processual segue o CPC/2015.`;
                    juizP -= 10;
                }
            }
            
            // ATUALIZAR INDICADORES VISUAIS
            document.getElementById('percent-juiz').innerText = juizP + "%";
            document.getElementById('bar-juiz').style.width = juizP + "%";
            document.getElementById('percent-juri').innerText = juriP + "%";
            document.getElementById('bar-juri').style.width = juriP + "%";
            document.getElementById('juiz-comentario').innerHTML = comentario;
            
            // ATUALIZAR BARRA SUPERIOR
            document.getElementById('label-area').innerHTML = `<i class="fas fa-gavel"></i> ÁREA: ${area.toUpperCase()} | RITO: ${rito.toUpperCase()}`;
            areaTag.innerText = area.toUpperCase();
            areaTag.classList.remove("hidden");
            
            // GERAR PETIÇÃO AUTOMÁTICA
            let corpoPeticao = "";
            const juizo = document.getElementById('in-juizo').value || "Vara competente da Comarca";
            const partes = document.getElementById('in-partes').value || "Autor vs. Réu";
            const valor = document.getElementById('in-valor').value || "Indeterminado";
            const dataAtual = new Date().toLocaleDateString('pt-BR');
            
            if(area === "Criminal") {
                corpoPeticao = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DO ${juizo.toUpperCase()}\n\n`
                             + `PROCESSO Nº: ____________\n\n`
                             + `${partes},\n\n`
                             + `por seu advogado, vem apresentar RESPOSTA À ACUSAÇÃO, com base no disposto no ${lei}, nas razões seguintes:\n\n`
                             + `I - DOS FATOS:\n${relato}\n\n`
                             + `II - PRELIMINARES:\nArguem-se as nulidades eventualmente verificadas nos autos, com especial enfoque no cerceamento de defesa e violação ao devido processo legal.\n\n`
                             + `III - DO MÉRITO:\nPleiteia-se a absolvição sumária do réu ou, alternativamente, a desclassificação do delito para tipo penal menos gravoso, ante a atipicidade da conduta.\n\n`
                             + `IV - DO PEDIDO:\nDiante do exposto, requer seja o réu absolvido, com a consequente extinção da punibilidade.\n\n`
                             + `Nestes termos,\nPede deferimento.\n\n`
                             + `Local, ${dataAtual}.\n\n`
                             + `_________________________________\n`
                             + `Advogado(a)\n`
                             + `OAB: ____________`;
                             
            } else if (area === "Trabalhista") {
                corpoPeticao = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DO TRABALHO DA ${juizo.toUpperCase()}\n\n`
                             + `RECLAMAÇÃO TRABALHISTA Nº: ____________\n\n`
                             + `${partes},\n\n`
                             + `por seu advogado, vem propor a presente ${rito.toUpperCase()}, com fulcro no ${lei}, nos termos seguintes:\n\n`
                             + `I - DOS FATOS:\n${relato}\n\n`
                             + `II - DO DIREITO:\nFundamentação específica conforme Consolidação das Leis do Trabalho e jurisprudência dominante do TST, com atenção à Reforma Trabalhista (Lei 13.467/2017).\n\n`
                             + `III - DOS PEDIDOS:\nRequer a condenação do réu ao pagamento das verbas rescisórias, com os acréscimos legais, além de honorários advocatícios.\n\n`
                             + `VALOR DA CAUSA: R$ ${valor}.\n\n`
                             + `Nestes termos,\nPede deferimento.\n\n`
                             + `Local, ${dataAtual}.\n\n`
                             + `_________________________________\n`
                             + `Advogado(a)\n`
                             + `OAB: ____________`;
                             
            } else {
                corpoPeticao = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DO ${juizo.toUpperCase()}\n\n`
                             + `AUTOS Nº: ____________\n\n`
                             + `${partes},\n\n`
                             + `por seu advogado, vem propor a presente ${rito.toUpperCase()}, com fundamento no ${lei}, pelas razões a seguir expostas:\n\n`
                             + `I - DOS FATOS:\n${relato}\n\n`
                             + `II - DO DIREITO:\nAplicação da legislação material pertinente, com suporte na jurisprudência dos Tribunais Superiores.\n\n`
                             + `III - DOS PEDIDOS:\nRequer a procedência do pedido, com condenação da parte ré nos honorários advocatícios e custas processuais.\n\n`
                             + `VALOR DA CAUSA: R$ ${valor}.\n\n`
                             + `Nestes termos,\nPede deferimento.\n\n`
                             + `Local, ${dataAtual}.\n\n`
                             + `_________________________________\n`
                             + `Advogado(a)\n`
                             + `OAB: ____________`;
            }
            
            editor.innerText = corpoPeticao;
            
            // Atualizar Vade Mecum
            atualizarVadeMecum(area);
            
            // Mostrar notificação de sucesso
            mostrarNotificacao(`Petição ${area} gerada com sucesso! Economia estimada: ${tempoEconomizado}`, "success");
        }
        
        function atualizarVadeMecum(area) {
            const vadeContent = document.getElementById('vade-resultado');
            let conteudo = "";
            
            if (area === "Criminal") {
                conteudo = `<p>Com base na análise do caso criminal, as seguintes disposições legais são aplicáveis:</p>
                          <ul style="margin-top: 15px; padding-left: 20px;">
                            <li><strong>CPP - Art. 396-A:</strong> Resposta à acusação no rito do júri.</li>
                            <li><strong>CPP - Art. 413:</strong> Pronúncia e seus requisitos.</li>
                            <li><strong>CPP - Arts. 563 a 593:</strong> Rito do Tribunal do Júri.</li>
                            <li><strong>CPP - Art. 3º:</strong> Princípio do devido processo legal.</li>
                            <li><strong>Constituição Federal - Art. 5º, XXXVII:</strong> Juízo natural.</li>
                            <li><strong>Constituição Federal - Art. 5º, LV:</strong> Contraditório e ampla defesa.</li>
                          </ul>
                          <p style="margin-top: 20px; color: var(--accent); font-weight: 600;">
                            <i class="fas fa-lightbulb"></i> DICA: No processo penal, atente-se sempre às nulidades processuais que podem ser arguidas preliminarmente.
                          </p>`;
            } else if (area === "Trabalhista") {
                conteudo = `<p>Com base na análise do caso trabalhista, as seguintes disposições legais são aplicáveis:</p>
                          <ul style="margin-top: 15px; padding-left: 20px;">
                            <li><strong>CLT - Art. 840, §1º:</strong> Conteúdo da reclamação trabalhista.</li>
                            <li><strong>Lei 13.467/2017:</strong> Reforma Trabalhista.</li>
                            <li><strong>CLT - Art. 443:</strong> Contrato individual de trabalho.</li>
                            <li><strong>CLT - Arts. 7º a 11º:</strong> Direitos constitucionais dos trabalhadores.</li>
                            <li><strong>CPC/2015 - Arts. 319 e 322:</strong> Aplicação subsidiária.</li>
                            <li><strong>Constituição Federal - Art. 7º:</strong> Direitos dos trabalhadores urbanos e rurais.</li>
                          </ul>
                          <p style="margin-top: 20px; color: var(--accent); font-weight: 600;">
                            <i class="fas fa-lightbulb"></i> DICA: Após a Reforma Trabalhista, a parte autora deve indicar com precisão o valor de cada pedido.
                          </p>`;
            } else {
                conteudo = `<p>Com base na análise do caso cível, as seguintes disposições legais são aplicáveis:</p>
                          <ul style="margin-top: 15px; padding-left: 20px;">
                            <li><strong>CPC/2015 - Art. 319:</strong> Conteúdo da petição inicial.</li>
                            <li><strong>CPC/2015 - Art. 322:</strong> Improcedência liminar do pedido.</li>
                            <li><strong>CPC/2015 - Art. 333:</strong> Ônus da prova.</li>
                            <li><strong>Lei 8.078/1990 (CDC):</strong> Se for caso de consumo.</li>
                            <li><strong>Constituição Federal - Art. 5º, XXXV:</strong> Inafastabilidade da jurisdição.</li>
                            <li><strong>Constituição Federal - Art. 5º, LIV:</strong> Devido processo legal.</li>
                          </ul>
                          <p style="margin-top: 20px; color: var(--accent); font-weight: 600;">
                            <i class="fas fa-lightbulb"></i> DICA: Verifique sempre a competência absoluta e a legítima interesse processual antes de ajuizar a ação.
                          </p>`;
            }
            
            vadeContent.innerHTML = conteudo;
        }
        
        // FUNÇÕES DO DICIONÁRIO AURÉLIO
        function abrirDicionario() {
            document.getElementById('modal-dicionario').style.display = 'block';
            document.querySelector('.overlay').style.display = 'block';
            document.getElementById('dicionario-input').focus();
        }
        
        function fecharDicionario() {
            document.getElementById('modal-dicionario').style.display = 'none';
            document.querySelector('.overlay').style.display = 'none';
        }
        
        function pesquisarDicionario() {
            const palavra = document.getElementById('dicionario-input').value.trim().toLowerCase();
            if (!palavra) {
                mostrarNotificacao("Digite uma palavra para pesquisar no dicionário.", "warning");
                return;
            }
            
            // Simular consulta ao dicionário Aurélio
            const resultado = document.getElementById('dicionario-resultado');
            resultado.innerHTML = '<p style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Consultando Dicionário Aurélio atualizado...</p>';
            
            // Simular tempo de consulta
            setTimeout(() => {
                // Dados simulados do dicionário
                const dicionarioDados = {
                    "direito": {
                        palavra: "Direito",
                        classe: "substantivo masculino",
                        definicoes: [
                            "1. Conjunto de normas que regulam as relações sociais, garantindo a ordem e a justiça.",
                            "2. Ciência que estuda as leis e sua aplicação na sociedade.",
                            "3. Faculdade legal de agir ou exigir algo."
                        ],
                        exemplo: "O <strong>direito</strong> à defesa é garantido pela Constituição Federal."
                    },
                    "processo": {
                        palavra: "Processo",
                        classe: "substantivo masculino",
                        definicoes: [
                            "1. Sequência de atos realizados para alcançar um determinado resultado.",
                            "2. Conjunto de atos realizados no âmbito judicial para solucionar um litígio.",
                            "3. Método sistemático para realizar uma tarefa ou alcançar um objetivo."
                        ],
                        exemplo: "O <strong>processo</strong> judicial deve observar os princípios do contraditório e da ampla defesa."
                    },
                    "petição": {
                        palavra: "Petição",
                        classe: "substantivo feminino",
                        definicoes: [
                            "1. Documento escrito dirigido a uma autoridade, solicitando algo ou apresentando uma queixa.",
                            "2. Na área jurídica, documento que inicia um processo ou requer alguma providência judicial."
                        ],
                        exemplo: "A <strong>petição</strong> inicial deve conter os requisitos do art. 319 do CPC."
                    },
                    "jurisprudência": {
                        palavra: "Jurisprudência",
                        classe: "substantivo feminino",
                        definicoes: [
                            "1. Conjunto de decisões judiciais sobre uma determinada questão.",
                            "2. Orientação consolidada dos tribunais sobre a interpretação de determinada lei."
                        ],
                        exemplo: "A <strong>jurisprudência</strong> do STF tem sido no sentido de proteger os direitos fundamentais."
                    },
                    "testemunha": {
                        palavra: "Testemunha",
                        classe: "substantivo feminino",
                        definicoes: [
                            "1. Pessoa que presencia um fato e pode depor sobre ele.",
                            "2. No processo judicial, pessoa que declara sobre fatos relevantes para o caso."
                        ],
                        exemplo: "A <strong>testemunha</strong> foi ouvida pelo juiz durante a audiência."
                    }
                };
                
                let resultadoHTML = "";
                
                // Verificar se a palavra está no dicionário simulado
                if (dicionarioDados[palavra]) {
                    const dado = dicionarioDados[palavra];
                    resultadoHTML = `
                        <div class="dictionary-result">
                            <div class="word-header">
                                <div>
                                    <span class="word">${dado.palavra}</span>
                                    <span class="word-class">${dado.classe}</span>
                                </div>
                            </div>
                            <div class="definition">
                                ${dado.definicoes.map(def => `<p>${def}</p>`).join('')}
                            </div>
                            <div class="example">
                                "${dado.exemplo}"
                            </div>
                        </div>
                    `;
                } else {
                    // Se não encontrar, mostrar mensagem e sugestões
                    resultadoHTML = `
                        <div class="dictionary-result" style="border-left-color: #e74c3c;">
                            <div class="word-header">
                                <div>
                                    <span class="word">"${palavra}"</span>
                                    <span class="word-class">Palavra não encontrada</span>
                                </div>
                            </div>
                            <div class="definition">
                                <p>A palavra <strong>"${palavra}"</strong> não foi encontrada no Dicionário Aurélio atualizado.</p>
                                <p style="margin-top: 10px;">Sugestões de palavras relacionadas ao Direito:</p>
                                <ul style="margin-top: 10px; padding-left: 20px;">
                                    <li><a href="javascript:void(0)" onclick="preencherPesquisa('direito')">Direito</a></li>
                                    <li><a href="javascript:void(0)" onclick="preencherPesquisa('processo')">Processo</a></li>
                                    <li><a href="javascript:void(0)" onclick="preencherPesquisa('petição')">Petição</a></li>
                                    <li><a href="javascript:void(0)" onclick="preencherPesquisa('jurisprudência')">Jurisprudência</a></li>
                                    <li><a href="javascript:void(0)" onclick="preencherPesquisa('testemunha')">Testemunha</a></li>
                                </ul>
                            </div>
                        </div>
                    `;
                }
                
                resultado.innerHTML = resultadoHTML;
                mostrarNotificacao(`Consulta realizada para a palavra "${palavra}"`, "success");
            }, 800);
        }
        
        function preencherPesquisa(palavra) {
            document.getElementById('dicionario-input').value = palavra;
            pesquisarDicionario();
        }
        
        // FUNÇÕES DO TRABALHO ACADÊMICO
        function abrirTrabalhoAcademico() {
            document.getElementById('modal-academico').style.display = 'block';
            document.querySelector('.overlay').style.display = 'block';
            document.getElementById('academic-result-container').classList.add('hidden');
            document.getElementById('btn-copiar-trabalho').classList.add('hidden');
        }
        
        function fecharAcademico() {
            document.getElementById('modal-academico').style.display = 'none';
            document.querySelector('.overlay').style.display = 'none';
        }
        
        function gerarTrabalhoAcademico() {
            const materia = document.getElementById('acad-materia').value.trim();
            const tema = document.getElementById('acad-tema').value.trim();
            const descricao = document.getElementById('acad-descricao').value.trim();
            
            if (!materia || !tema || !descricao) {
                mostrarNotificacao("Preencha todos os campos obrigatórios (*) para gerar o trabalho acadêmico.", "warning");
                return;
            }
            
            mostrarNotificacao("O Juiz da página está elaborando seu trabalho acadêmico com nota máxima...", "info");
            
            // Simular processamento
            setTimeout(() => {
                const paginas = document.getElementById('acad-paginas').value || "15";
                const formato = document.getElementById('acad-formato').value;
                const prazo = document.getElementById('acad-prazo').value || "Indeterminado";
                
                // Gerar trabalho acadêmico
                const titulo = `TRABALHO ACADÊMICO: ${tema.toUpperCase()}`;
                const conteudo = `
                    <h3>INTRODUÇÃO</h3>
                    <p>Este trabalho acadêmico aborda o tema "${tema}", inserido na disciplina de ${materia}. O objetivo principal é ${descricao}. A relevância do estudo está na aplicação prática dos conceitos teóricos aprendidos em sala de aula.</p>
                    
                    <h3>DESENVOLVIMENTO</h3>
                    <p>Na primeira parte do trabalho, será realizada uma análise teórica dos principais conceitos relacionados ao tema. Em seguida, será feita uma revisão bibliográfica atualizada, com foco nas obras mais relevantes da área.</p>
                    
                    <p>A metodologia utilizada consiste em pesquisa bibliográfica, análise documental e estudo de casos práticos. Foram consultadas fontes primárias e secundárias, incluindo legislação pertinente, doutrina especializada e jurisprudência atualizada.</p>
                    
                    <p>Os resultados preliminares indicam que ${descricao.toLowerCase().substring(0, 150)}... A análise crítica demonstra a importância do tema para a compreensão dos institutos jurídicos estudados.</p>
                    
                    <h3>CONCLUSÃO</h3>
                    <p>Conclui-se que o estudo do tema "${tema}" é fundamental para a formação acadêmica em ${materia}. As implicações práticas são significativas, especialmente no que diz respeito à aplicação dos conceitos em situações reais.</p>
                    
                    <p><strong>Formato de citação:</strong> ${formato}</p>
                    <p><strong>Número de páginas:</strong> ${paginas}</p>
                    <p><strong>Prazo de entrega:</strong> ${prazo}</p>
                `;
                
                document.getElementById('academic-title-result').innerHTML = titulo;
                document.getElementById('academic-content-result').innerHTML = conteudo;
                
                // Mostrar resultado
                document.getElementById('academic-result-container').classList.remove('hidden');
                document.getElementById('btn-copiar-trabalho').classList.remove('hidden');
                
                // Animar nota
                const gradeBadge = document.getElementById('academic-grade');
                gradeBadge.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    gradeBadge.style.transform = 'scale(1)';
                }, 300);
                
                mostrarNotificacao("Trabalho acadêmico gerado com sucesso! Nota máxima garantida pelo Juiz.", "success");
            }, 1500);
        }
        
        function copiarTrabalho() {
            const titulo = document.getElementById('academic-title-result').innerText;
            const conteudo = document.getElementById('academic-content-result').innerText;
            const texto = `${titulo}\n\n${conteudo}`;
            
            navigator.clipboard.writeText(texto).then(() => {
                mostrarNotificacao("Trabalho acadêmico copiado para a área de transferência!", "success");
            });
        }
        
        // FUNÇÕES DE RELÓGIO E CLIMA
        function atualizarRelogio() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('pt-BR', { 
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('current-time').textContent = timeString;
        }
        
        function obterClima() {
            // Simulação de dados de clima - em produção, integraria com uma API como OpenWeatherMap
            const climas = [
                { temp: 22, condicao: "Ensolarado", icone: "fa-sun" },
                { temp: 18, condicao: "Parcialmente nublado", icone: "fa-cloud-sun" },
                { temp: 16, condicao: "Nublado", icone: "fa-cloud" },
                { temp: 25, condicao: "Limpo", icone: "fa-sun" },
                { temp: 20, condicao: "Algumas nuvens", icone: "fa-cloud-sun" }
            ];
            
            const clima = climas[Math.floor(Math.random() * climas.length)];
            
            document.getElementById('current-weather').textContent = clima.condicao;
            document.getElementById('current-temp').textContent = `${clima.temp}°C`;
            document.getElementById('weather-icon').className = `fas ${clima.icone} weather-icon`;
        }
        
        // FUNÇÕES COMPARTILHADAS
        function confirmarReset() { 
            if(confirm("Tem certeza que deseja limpar todos os dados? Esta ação não pode ser desfeita.")) {
                location.reload(); 
            }
        }
        
        function fecharModais() {
            document.getElementById('modal-vade').style.display = 'none';
            document.getElementById('modal-dicionario').style.display = 'none';
            document.getElementById('modal-academico').style.display = 'none';
            document.querySelector('.overlay').style.display = 'none';
        }
        
        function fecharVade() { 
            document.getElementById('modal-vade').style.display = 'none'; 
            document.querySelector('.overlay').style.display = 'none'; 
        }
        
        function abrirVade() { 
            document.getElementById('modal-vade').style.display = 'block'; 
            document.querySelector('.overlay').style.display = 'block'; 
        }
        
        function salvarPDF() { 
            const editor = document.getElementById('editor-a4');
            if (!editor.innerText.trim()) {
                mostrarNotificacao("Gere uma petição antes de exportar para PDF.", "warning");
                return;
            }
            
            mostrarNotificacao("Gerando PDF no formato ABNT...", "info");
            
            const opt = {
                margin: [15, 15, 15, 15],
                filename: 'Peticao_Inteligencia_Forense_Pro.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { 
                    scale: 2,
                    useCORS: true,
                    letterRendering: true
                },
                jsPDF: { 
                    unit: 'mm', 
                    format: 'a4', 
                    orientation: 'portrait',
                    compress: true
                },
                pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
            };
            
            html2pdf().set(opt).from(editor).save().then(() => {
                mostrarNotificacao("PDF gerado com sucesso!", "success");
            });
        }
        
        function gerarEmBranco() { 
            document.getElementById('editor-a4').innerText = 
                "EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DA __________________________\n\n" +
                "PROCESSO Nº: _______________________\n\n" +
                "__________________________ (qualificação completa),\n" +
                "por seu advogado (qualificação e endereço para intimações), vem propor a presente AÇÃO, nos termos seguintes:\n\n" +
                "I - DOS FATOS:\n[Descrever com clareza e precisão os fatos relevantes para o caso, em ordem cronológica]\n\n" +
                "II - DO DIREITO:\n[Fundamentação jurídica pertinente, com citação de leis, doutrina e jurisprudência]\n\n" +
                "III - DOS PEDIDOS:\n[Especificar de forma clara e completa todos os pedidos]\n\n" +
                "Valor da Causa: R$ ______________\n\n" +
                "Nestes termos,\nPede deferimento.\n\n" +
                "Local, data.\n\n" +
                "_________________________________\n" +
                "Advogado(a)\n" +
                "OAB: ____________";
            
            mostrarNotificacao("Modelo em branco carregado. Preencha com os dados do caso.", "info");
        }
        
        function copiarLei() { 
            const texto = document.getElementById('vade-resultado').innerText;
            navigator.clipboard.writeText(texto).then(() => {
                mostrarNotificacao("Base legal copiada para a área de transferência!", "success");
            });
        }
        
        function mostrarNotificacao(mensagem, tipo) {
            // Criar elemento de notificação
            const notificacao = document.createElement('div');
            notificacao.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                font-weight: 600;
                z-index: 10000;
                display: flex;
                align-items: center;
                gap: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease;
                max-width: 400px;
            `;
            
            // Definir cores baseadas no tipo
            if (tipo === "success") {
                notificacao.style.background = "rgba(46, 204, 113, 0.9)";
                notificacao.style.color = "white";
                notificacao.style.borderLeft = "4px solid #27ae60";
            } else if (tipo === "error") {
                notificacao.style.background = "rgba(255, 71, 87, 0.9)";
                notificacao.style.color = "white";
                notificacao.style.borderLeft = "4px solid #ff3838";
            } else if (tipo === "warning") {
                notificacao.style.background = "rgba(255, 193, 7, 0.9)";
                notificacao.style.color = "black";
                notificacao.style.borderLeft = "4px solid #ffa502";
            } else {
                notificacao.style.background = "rgba(52, 152, 219, 0.9)";
                notificacao.style.color = "white";
                notificacao.style.borderLeft = "4px solid #3498db";
            }
            
            // Adicionar ícone
            let icone = "info-circle";
            if (tipo === "success") icone = "check-circle";
            if (tipo === "error") icone = "exclamation-circle";
            if (tipo === "warning") icone = "exclamation-triangle";
            
            notificacao.innerHTML = `<i class="fas fa-${icone}"></i> ${mensagem}`;
            
            // Adicionar ao corpo
            document.body.appendChild(notificacao);
            
            // Remover após 4 segundos
            setTimeout(() => {
                notificacao.style.animation = "slideOut 0.3s ease";
                setTimeout(() => {
                    if (notificacao.parentNode) {
                        notificacao.parentNode.removeChild(notificacao);
                    }
                }, 300);
            }, 4000);
            
            // Adicionar keyframes para animação
            const style = document.createElement('style');
            style.innerHTML = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        }
        
        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            // Focar no campo de relato
            document.getElementById('ia-relato').focus();
            
            // Inicializar relógio e clima
            atualizarRelogio();
            obterClima();
            
            // Atualizar relógio a cada segundo
            setInterval(atualizarRelogio, 1000);
            
            // Atualizar clima a cada 5 minutos
            setInterval(obterClima, 300000);
            
            // Adicionar dicas de uso
            setTimeout(() => {
                mostrarNotificacao("💡 Dica: Use o Dicionário Aurélio para consultar termos jurídicos específicos.", "info");
            }, 1000);
        });
    </script>
</body>
</html>