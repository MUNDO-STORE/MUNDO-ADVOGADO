<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="Inteligência Forense Pro - IA jurídica com especialistas por área do direito, avaliação de juízes e professores, geração de petições personalizadas.">
    <title>Inteligência Forense Pro | Sistema Jurídico com Especialistas por Área</title>
    
    <!-- Bibliotecas externas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.21/mammoth.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/docx@7.7.0/build/index.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Todos os estilos anteriores permanecem iguais... */
        /* Apenas adicionando um novo estilo para o botão do Word */
        
        .btn-word {
            background: linear-gradient(to right, #2b5797, #1e3a5f);
            color: white;
            border: none;
            margin-top: 10px;
        }
        
        .btn-word:hover {
            background: linear-gradient(to right, #1e3a5f, #2b5797);
        }
        
        /* Mantém todos os estilos anteriores... */
        :root {
            --primary: #0a192f;
            --secondary: #172a46;
            --accent: #c5a059;
            --accent-light: #d4b47c;
            --danger: #ff4757;
            --success: #2ecc71;
            --text-light: #e6f1ff;
            --text-gray: #8892b0;
            --glass: rgba(255, 255, 255, 0.05);
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            margin: 0;
            background: var(--primary);
            color: var(--text-light);
            overflow-x: hidden;
            line-height: 1.6;
            -webkit-tap-highlight-color: transparent;
        }
        
        .bg-animated {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(135deg, #0a192f 0%, #112240 50%, #1a2a3a 100%);
        }
        
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.03;
            background-image: 
                radial-gradient(circle at 25% 25%, var(--accent) 2px, transparent 2px),
                radial-gradient(circle at 75% 75%, var(--accent) 2px, transparent 2px);
            background-size: 80px 80px;
        }
        
        .header {
            background: rgba(10, 25, 47, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(197, 160, 89, 0.2);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            max-width: 1800px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-icon {
            color: var(--accent);
            font-size: 24px;
        }
        
        .logo-text {
            font-weight: 700;
            font-size: 1.5rem;
            background: linear-gradient(to right, var(--accent), var(--accent-light));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 0.5px;
        }
        
        .logo-subtitle {
            font-size: 0.7rem;
            color: var(--text-gray);
            font-weight: 500;
            margin-top: -5px;
        }
        
        .additional-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .btn-dictionary {
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            border: none;
        }
        
        .btn-academic {
            background: linear-gradient(to right, #9b59b6, #8e44ad);
            color: white;
            border: none;
        }
        
        .container {
            width: 100%;
            max-width: 1800px;
            display: grid;
            grid-template-columns: 460px 1fr;
            gap: 25px;
            padding: 25px;
            margin: 0 auto;
        }
        
        .sidebar {
            background: rgba(23, 42, 70, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(197, 160, 89, 0.15);
            padding: 25px;
            border-radius: 16px;
            height: calc(100vh - 100px);
            overflow-y: auto;
            position: sticky;
            top: 90px;
            display: flex;
            flex-direction: column;
            box-shadow: var(--shadow);
        }
        
        .section-title {
            color: var(--accent);
            font-size: 0.85rem;
            border-bottom: 1px solid rgba(197, 160, 89, 0.3);
            margin: 20px 0 12px;
            padding-bottom: 8px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .section-title i {
            font-size: 0.9rem;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            font-size: 0.75rem;
            color: var(--text-gray);
            margin-bottom: 6px;
            font-weight: 600;
        }
        
        .input-group input, .input-group textarea, .input-group select {
            width: 100%;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 8px;
            font-size: 0.9rem;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .input-group input:focus, .input-group textarea:focus, .input-group select:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(197, 160, 89, 0.2);
        }
        
        .input-group textarea {
            resize: vertical;
            min-height: 120px;
            font-family: 'Inter', sans-serif;
        }
        
        .veredito-panel {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(197, 160, 89, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .veredito-header {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .score-container {
            margin-bottom: 15px;
        }
        
        .score-label {
            font-size: 0.7rem;
            color: var(--text-gray);
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }
        
        .score-bar {
            background: rgba(255, 255, 255, 0.1);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .score-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease-in-out;
        }
        
        .avaliacao-especialistas {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border-left: 3px solid var(--accent);
        }
        
        .avaliacao-header {
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .especialista-item {
            margin-bottom: 12px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            border-left: 3px solid;
        }
        
        .especialista-nome {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .especialista-titulo {
            font-size: 0.65rem;
            color: var(--text-gray);
            font-style: italic;
        }
        
        .especialista-comentario {
            font-size: 0.7rem;
            color: var(--text-light);
            margin-top: 5px;
            line-height: 1.4;
        }
        
        .especialista-nota {
            font-size: 0.7rem;
            font-weight: 700;
            padding: 2px 8px;
            border-radius: 10px;
            background: rgba(46, 204, 113, 0.2);
            color: var(--success);
        }
        
        .pontuacao-consolidada {
            margin-top: 15px;
            padding: 12px;
            background: rgba(197, 160, 89, 0.1);
            border-radius: 6px;
            text-align: center;
        }
        
        .pontuacao-media {
            font-size: 1rem;
            font-weight: 700;
            color: var(--accent);
        }
        
        .veredito-comentario {
            font-size: 0.75rem;
            color: var(--text-light);
            line-height: 1.4;
            padding: 12px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
            border-left: 3px solid var(--accent);
        }
        
        .main-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .toolbar {
            width: 100%;
            max-width: 210mm;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px 20px;
            background: rgba(23, 42, 70, 0.85);
            border-radius: 12px;
            box-shadow: var(--shadow);
        }
        
        .area-info {
            color: var(--accent);
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .area-tag {
            background: rgba(197, 160, 89, 0.15);
            color: var(--accent-light);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .weather-time {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 0.85rem;
        }
        
        .weather-widget, .time-widget {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .weather-icon {
            font-size: 1.2rem;
            color: var(--accent);
        }
        
        .temp {
            font-weight: 700;
            color: var(--accent-light);
        }
        
        #editor-a4 {
            background: white;
            color: black;
            width: 210mm;
            min-height: 297mm;
            padding: 30mm 25mm;
            box-shadow: var(--shadow);
            font-family: 'Times New Roman', Times, serif;
            font-size: 12pt;
            line-height: 1.6;
            text-align: justify;
            outline: none;
            border-radius: 8px;
            overflow: auto;
            transition: all 0.3s ease;
        }
        
        #editor-a4:focus {
            box-shadow: 0 0 0 2px rgba(197, 160, 89, 0.3), var(--shadow);
        }
        
        .btn {
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            width: 100%;
            margin-top: 10px;
            font-size: 0.85rem;
            letter-spacing: 0.3px;
        }
        
        .btn-primary {
            background: linear-gradient(to right, var(--accent), var(--accent-light));
            color: #000;
            font-weight: 700;
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--accent);
            border: 1px solid var(--accent);
        }
        
        .btn-upload {
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-light);
            border: 1px dashed var(--accent);
        }
        
        .btn-danger {
            background: transparent;
            border: 1px solid var(--danger);
            color: var(--danger);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn-primary:hover {
            background: linear-gradient(to right, var(--accent-light), var(--accent));
        }
        
        .btn-secondary:hover {
            background: rgba(197, 160, 89, 0.1);
        }
        
        .btn-danger:hover {
            background: rgba(255, 71, 87, 0.1);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 800px;
            background: var(--secondary);
            border: 1px solid var(--accent);
            border-radius: 16px;
            z-index: 2000;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: modalFadeIn 0.3s ease;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translate(-50%, -60%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(197, 160, 89, 0.2);
        }
        
        .modal-title {
            color: var(--accent);
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .modal-close {
            color: var(--text-gray);
            font-size: 1.2rem;
            cursor: pointer;
            transition: color 0.3s;
            min-width: 44px;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-close:hover {
            color: var(--accent);
        }
        
        .modal-content {
            height: 400px;
            overflow-y: auto;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 8px;
            color: var(--text-light);
            border: 1px solid rgba(255, 255, 255, 0.05);
            line-height: 1.7;
            font-size: 0.95rem;
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(5px);
            z-index: 1500;
            touch-action: none;
        }
        
        .modal-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .input-group {
            flex: 1;
            margin-bottom: 0;
        }
        
        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .search-box input {
            flex: 1;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 8px;
            font-size: 0.9rem;
            outline: none;
        }
        
        .search-box button {
            padding: 12px 20px;
            background: var(--accent);
            color: black;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            min-width: 44px;
        }
        
        .dictionary-result {
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border-left: 3px solid #3498db;
            margin-top: 20px;
        }
        
        .word-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .word {
            font-size: 1.3rem;
            font-weight: 700;
            color: #3498db;
        }
        
        .word-class {
            font-style: italic;
            color: var(--text-gray);
            font-size: 0.9rem;
        }
        
        .definition {
            margin: 10px 0;
            line-height: 1.6;
        }
        
        .example {
            font-style: italic;
            color: var(--accent-light);
            padding: 10px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 5px;
            margin-top: 10px;
        }
        
        .academic-result {
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border: 1px solid rgba(155, 89, 182, 0.3);
        }
        
        .academic-title {
            color: #9b59b6;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .academic-content {
            line-height: 1.7;
            font-family: 'Times New Roman', Times, serif;
            font-size: 12pt;
        }
        
        .academic-cover {
            text-align: center;
            padding: 40px 20px;
            border: 2px solid var(--accent);
            border-radius: 8px;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .academic-back-cover {
            text-align: center;
            padding: 40px 20px;
            border: 2px dashed var(--accent);
            border-radius: 8px;
            margin-top: 30px;
            background: rgba(255, 255, 255, 0.03);
            page-break-before: always;
        }
        
        .academic-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .academic-section {
            margin-bottom: 20px;
            page-break-inside: avoid;
        }
        
        .academic-subtitle {
            color: #9b59b6;
            font-weight: 700;
            margin: 15px 0 10px 0;
        }
        
        .citation {
            font-style: italic;
            color: var(--accent-light);
            padding-left: 20px;
            border-left: 3px solid var(--accent);
            margin: 10px 0;
        }
        
        .professor-signature {
            text-align: right;
            margin-top: 40px;
            font-style: italic;
        }
        
        .grade-badge {
            display: inline-block;
            background: linear-gradient(to right, #2ecc71, #27ae60);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
            margin-top: 15px;
        }
        
        .area-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .area-option {
            padding: 20px 15px;
            background: rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            min-height: 100px;
        }
        
        .area-option:hover {
            border-color: var(--accent);
            background: rgba(197, 160, 89, 0.1);
            transform: translateY(-2px);
        }
        
        .area-icon {
            font-size: 1.5rem;
            color: var(--accent);
        }
        
        .benefits-bar {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px;
            background: rgba(197, 160, 89, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(197, 160, 89, 0.1);
        }
        
        .benefit {
            text-align: center;
            color: var(--text-gray);
        }
        
        .benefit i {
            color: var(--accent);
            font-size: 1.2rem;
            margin-bottom: 8px;
        }
        
        .benefit-text {
            font-size: 0.7rem;
            font-weight: 600;
        }
        
        /* ============================
           RESPONSIVIDADE MOBILE
           ============================ */
        
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                gap: 15px;
                padding: 10px;
            }
            
            .sidebar {
                height: auto;
                position: relative;
                top: 0;
                margin-bottom: 15px;
                padding: 15px;
                border-radius: 12px;
                max-height: 80vh;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .header {
                padding: 10px 0;
                position: relative;
            }
            
            .header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .logo {
                width: 100%;
                justify-content: center;
                text-align: center;
            }
            
            .logo-text {
                font-size: 1.2rem;
            }
            
            .logo-subtitle {
                font-size: 0.6rem;
            }
            
            .input-group textarea {
                min-height: 100px;
                font-size: 14px;
            }
            
            .btn {
                padding: 12px 15px;
                font-size: 13px;
                min-height: 44px;
            }
            
            #editor-a4 {
                width: 100%;
                min-height: 400px;
                padding: 20mm 15mm;
                font-size: 11pt;
                line-height: 1.5;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .toolbar {
                flex-direction: column;
                gap: 12px;
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .area-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .weather-time {
                width: 100%;
                justify-content: space-between;
                font-size: 0.8rem;
            }
            
            .weather-widget, .time-widget {
                padding: 6px 10px;
            }
            
            .veredito-panel {
                padding: 15px;
                margin: 15px 0;
            }
            
            .veredito-header {
                font-size: 0.8rem;
            }
            
            .especialista-item {
                padding: 8px;
            }
            
            .modal {
                width: 95%;
                max-height: 90vh;
                padding: 20px;
                overflow-y: auto;
                transform: translate(-50%, -50%);
            }
            
            .modal-content {
                height: 50vh;
                padding: 15px;
                font-size: 0.9rem;
            }
            
            .area-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .area-option {
                padding: 15px 10px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .benefits-bar {
                flex-wrap: wrap;
                gap: 12px;
                padding: 12px;
            }
            
            .benefit {
                flex: 1 0 calc(50% - 12px);
                min-width: 120px;
            }
            
            .additional-buttons {
                margin-bottom: 15px;
            }
            
            p, li, span, div {
                word-wrap: break-word;
                overflow-wrap: break-word;
            }
            
            input, textarea, select {
                font-size: 16px !important;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 8px;
            }
            
            .sidebar {
                padding: 12px;
            }
            
            .btn {
                font-size: 12px;
                padding: 10px 12px;
            }
            
            #editor-a4 {
                padding: 15mm 10mm;
                font-size: 10pt;
                max-height: 500px;
            }
            
            .modal {
                width: 98%;
                padding: 15px;
                max-height: 85vh;
            }
            
            .modal-title {
                font-size: 1.2rem;
            }
            
            .benefit {
                flex: 1 0 100%;
            }
            
            .input-group input, 
            .input-group textarea, 
            .input-group select {
                padding: 14px 12px;
                font-size: 16px;
                min-height: 48px;
            }
            
            .especialista-nome {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            
            .especialista-nota {
                align-self: flex-start;
            }
        }
        
        @media (max-height: 600px) and (orientation: landscape) {
            .sidebar {
                max-height: 70vh;
            }
            
            #editor-a4 {
                min-height: 300px;
            }
            
            .modal-content {
                height: 40vh;
            }
        }
        
        @supports (-webkit-touch-callout: none) {
            .sidebar {
                padding-bottom: env(safe-area-inset-bottom);
            }
            
            input, textarea {
                border-radius: 8px;
            }
        }
        
        @media (hover: none) and (pointer: coarse) {
            .btn, 
            .area-option,
            .modal-close,
            .search-box button {
                min-height: 44px;
                min-width: 44px;
            }
            
            .input-group {
                margin-bottom: 20px;
            }
            
            select {
                appearance: none;
                background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23c5a059'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
                background-repeat: no-repeat;
                background-position: right 15px center;
                background-size: 20px;
                padding-right: 50px;
            }
        }
        
        @media (prefers-reduced-motion: no-preference) {
            .modal {
                animation: modalSlideIn 0.3s ease;
            }
            
            @keyframes modalSlideIn {
                from { 
                    opacity: 0; 
                    transform: translate(-50%, -40%);
                }
                to { 
                    opacity: 1; 
                    transform: translate(-50%, -50%);
                }
            }
        }
        
        @media (max-width: 768px) {
            body {
                font-size: 14px;
                line-height: 1.5;
            }
            
            h1, h2, h3, h4, h5, h6 {
                line-height: 1.3;
            }
            
            .logo-text,
            .modal-title,
            .area-tag {
                word-break: keep-all;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
        }
        
        @media (max-width: 768px) {
            ::-webkit-scrollbar {
                width: 4px;
                height: 4px;
            }
            
            body {
                -webkit-overflow-scrolling: touch;
            }
        }
        
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .sidebar {
                height: auto;
                position: static;
            }
            
            #editor-a4 {
                width: 100%;
                min-height: 500px;
            }
            
            .area-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .toolbar {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .weather-time {
                width: 100%;
                justify-content: space-between;
            }
            
            .benefits-bar {
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .benefit {
                flex: 1 0 calc(50% - 15px);
            }
            
            .form-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .area-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .hidden {
            display: none;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(197, 160, 89, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(197, 160, 89, 0); }
            100% { box-shadow: 0 0 0 0 rgba(197, 160, 89, 0); }
        }
        
        .highlight {
            color: var(--accent);
            font-weight: 700;
        }
        
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-light);
        }
    </style>
</head>
<body>
    <div class="bg-animated"></div>
    <div class="bg-pattern"></div>
    
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div>
                    <div class="logo-text">INTELIGÊNCIA FORENSE PRO</div>
                    <div class="logo-subtitle">ESPECIALISTAS POR ÁREA DO DIREITO • AVALIAÇÃO DE JUÍZES • PETIÇÕES PERSONALIZADAS</div>
                </div>
            </div>
            <div class="weather-time">
                <div class="time-widget">
                    <i class="fas fa-clock"></i>
                    <span id="current-time">Carregando...</span>
                </div>
                <div class="weather-widget">
                    <i class="fas fa-sun weather-icon" id="weather-icon"></i>
                    <div>
                        <div id="current-weather">Carregando clima...</div>
                        <div class="temp" id="current-temp">--°C</div>
                    </div>
                </div>
            </div>
            <div class="benefits-bar" style="background: transparent; padding: 0; border: none;">
                <div class="benefit">
                    <i class="fas fa-users"></i>
                    <div class="benefit-text">12 Especialistas</div>
                </div>
                <div class="benefit">
                    <i class="fas fa-gavel"></i>
                    <div class="benefit-text">3 Juízes Ativos</div>
                </div>
                <div class="benefit">
                    <i class="fas fa-graduation-cap"></i>
                    <div class="benefit-text">9 Professores Mestres</div>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <aside class="sidebar">
            <div class="additional-buttons">
                <button class="btn btn-dictionary" onclick="abrirDicionario()">
                    <i class="fas fa-book"></i> DICIONÁRIO AURÉLIO
                </button>
                <button class="btn btn-academic" onclick="abrirTrabalhoAcademico()">
                    <i class="fas fa-graduation-cap"></i> CRIAR TRABALHO ACADÊMICO
                </button>
            </div>
            
            <button class="btn btn-secondary pulse" onclick="abrirVade()">
                <i class="fas fa-balance-scale"></i> VADE MECUM INTELIGENTE
            </button>
            
            <div class="section-title">
                <i class="fas fa-clipboard-list"></i> DESCRIÇÃO DO CASO
            </div>
            <div class="input-group">
                <label for="ia-relato">Relato do caso ou transcrição</label>
                <textarea id="ia-relato" rows="8" placeholder="Descreva os fatos do caso aqui ou faça upload de um documento para análise automática..."></textarea>
            </div>
            
            <div id="veredito-panel" class="veredito-panel">
                <div class="veredito-header">
                    <i class="fas fa-chart-line"></i> ANÁLISE JURÍDICA MULTIDISCIPLINAR
                </div>
                
                <div class="pontuacao-consolidada">
                    <div style="font-size: 0.7rem; color: var(--text-gray);">PONTUAÇÃO MÉDIA DOS ESPECIALISTAS</div>
                    <div class="pontuacao-media" id="pontuacao-media">0%</div>
                </div>
                
                <div class="score-container">
                    <div class="score-label">
                        <span>PROBABILIDADE DE SUCESSO:</span>
                        <span id="percent-juiz">0%</span>
                    </div>
                    <div class="score-bar">
                        <div id="bar-juiz" class="score-fill" style="background: var(--success); width: 0%;"></div>
                    </div>
                </div>
                
                <div id="juri-box" class="hidden">
                    <div class="score-label">
                        <span>APROVAÇÃO DO JÚRI:</span>
                        <span id="percent-juri">0%</span>
                    </div>
                    <div class="score-bar">
                        <div id="bar-juri" class="score-fill" style="background: var(--accent); width: 0%;"></div>
                    </div>
                </div>
                
                <div class="avaliacao-especialistas">
                    <div class="avaliacao-header">
                        <i class="fas fa-user-tie"></i> AVALIAÇÃO DOS ESPECIALISTAS POR ÁREA
                    </div>
                    <div id="lista-especialistas"></div>
                </div>
                
                <div id="juiz-comentario" class="veredito-comentario">
                    Análise será exibida aqui após processamento do caso por todos os especialistas da área correspondente.
                </div>
            </div>
            
            <div class="section-title">
                <i class="fas fa-gavel"></i> DADOS PROCESSUAIS (ART. 319 CPC)
            </div>
            <div class="input-group">
                <label for="in-juizo">JUÍZO / COMARCA</label>
                <input type="text" id="in-juizo" placeholder="Ex: Vara Cível da Comarca de São Paulo/SP">
            </div>
            <div class="input-group">
                <label for="in-partes">PARTES ENVOLVIDAS</label>
                <input type="text" id="in-partes" placeholder="Ex: João Silva (autor) vs. Empresa XYZ (ré)">
            </div>
            <div class="input-group">
                <label for="in-valor">VALOR DA CAUSA (R$)</label>
                <input type="text" id="in-valor" placeholder="Ex: 50.000,00">
            </div>
            
            <div class="benefits-bar">
                <div class="benefit">
                    <i class="fas fa-bolt"></i>
                    <div class="benefit-text">Rápido</div>
                </div>
                <div class="benefit">
                    <i class="fas fa-shield-alt"></i>
                    <div class="benefit-text">Confiável</div>
                </div>
                <div class="benefit">
                    <i class="fas fa-check-circle"></i>
                    <div class="benefit-text">Preciso</div>
                </div>
            </div>
            
            <div style="margin-top: auto;">
                <button class="btn btn-primary" onclick="analisarEGerarComTodosEspecialistas()">
                    <i class="fas fa-users"></i> GERAR PETIÇÃO COM ESPECIALISTAS DA ÁREA
                </button>
                
                <label class="btn btn-upload">
                    <i class="fas fa-cloud-upload-alt"></i> ANALISAR DOCUMENTO
                    <input type="file" id="file-upload" style="display:none" onchange="processarArquivo(this)" accept=".docx,.txt,.pdf">
                </label>
                
                <button class="btn" onclick="abrirModalAreaBranco()" style="background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.1);">
                    <i class="fas fa-file-alt"></i> MODELO POR ÁREA DO DIREITO
                </button>
                
                <button class="btn btn-word" onclick="salvarWord()">
                    <i class="fas fa-file-word"></i> SALVAR PETIÇÃO (WORD ABNT)
                </button>
                
                <button class="btn btn-danger" onclick="confirmarReset()">
                    <i class="fas fa-redo"></i> LIMPAR TUDO
                </button>
            </div>
        </aside>
        
        <main class="main-content">
            <div class="toolbar">
                <div class="area-info">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="label-area">AGUARDANDO ANÁLISE DO CASO...</span>
                    <div id="area-tag" class="area-tag hidden"></div>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-primary" style="width: auto; padding: 10px 25px;" onclick="salvarPDF()">
                        <i class="fas fa-file-pdf"></i> EXPORTAR PDF ABNT
                    </button>
                    <button class="btn btn-word" style="width: auto; padding: 10px 25px;" onclick="salvarWord()">
                        <i class="fas fa-file-word"></i> EXPORTAR WORD ABNT
                    </button>
                </div>
            </div>
            
            <div id="editor-a4" contenteditable="true" placeholder="A petição será gerada automaticamente após análise do caso pelos especialistas da área correspondente..."></div>
        </main>
    </div>
    
    <div class="overlay" onclick="fecharModais()"></div>
    
    <div id="modal-vade" class="modal">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-balance-scale"></i> BASE LEGAL INTELIGENTE - VADE MECUM 2025
            </div>
            <i class="fas fa-times modal-close" onclick="fecharVade()"></i>
        </div>
        <div id="vade-resultado" class="modal-content">
            <p>Com base na análise do seu caso, as seguintes disposições legais são aplicáveis:</p>
            <ul style="margin-top: 15px; padding-left: 20px;">
                <li><strong>CPC/2015 - Art. 319:</strong> Conteúdo da petição inicial.</li>
                <li><strong>CPC/2015 - Art. 335:</strong> Requisitos da resposta do réu.</li>
                <li><strong>Lei 13.467/2017:</strong> Reforma Trabalhista (se aplicável).</li>
                <li><strong>Constituição Federal - Art. 5º:</strong> Princípios fundamentais.</li>
            </ul>
            <p style="margin-top: 20px; color: var(--accent); font-weight: 600;">
                <i class="fas fa-lightbulb"></i> DICA: A IA identificará automaticamente todas as leis pertinentes ao analisar seu caso completo.
            </p>
        </div>
        <button class="btn btn-primary" onclick="copiarLei()">
            <i class="fas fa-copy"></i> COPIAR BASE LEGAL
        </button>
    </div>
    
    <div id="modal-dicionario" class="modal">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-book"></i> DICIONÁRIO AURÉLIO - CONSULTA EM TEMPO REAL
            </div>
            <i class="fas fa-times modal-close" onclick="fecharDicionario()"></i>
        </div>
        <div class="modal-content">
            <div class="search-box">
                <input type="text" id="dicionario-input" placeholder="Digite qualquer palavra para consultar no Dicionário Aurélio..." 
                       oninput="pesquisarDicionarioTempoReal()" onkeyup="pesquisarDicionarioTempoReal()">
                <button onclick="pesquisarDicionario()">
                    <i class="fas fa-search"></i> Pesquisar
                </button>
            </div>
            
            <div id="dicionario-resultado">
                <div class="dictionary-result">
                    <div class="word-header">
                        <div>
                            <span class="word">Inteligência</span>
                            <span class="word-class">substantivo feminino</span>
                        </div>
                    </div>
                    <div class="definition">
                        <p>1. Faculdade de entender, compreender, aprender; intelecto.</p>
                        <p>2. Capacidade mental de raciocinar, pensar, interpretar e compreender ideias.</p>
                        <p>3. Conjunto de funções mentais que permitem resolver problemas, criar e aprender.</p>
                    </div>
                    <div class="example">
                        "A <strong>inteligência</strong> forense utiliza ferramentas tecnológicas para análise de evidências digitais."
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="modal-academico" class="modal">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-graduation-cap"></i> CRIADOR DE TRABALHO ACADÊMICO - NORMA ABNT
            </div>
            <i class="fas fa-times modal-close" onclick="fecharAcademico()"></i>
        </div>
        <div class="modal-content">
            <p style="margin-bottom: 20px; color: var(--accent); font-weight: 600;">
                <i class="fas fa-lightbulb"></i> Preencha os campos abaixo para que os <strong>Professores Experts em Direito com Mestrado</strong> da área específica elaborem um trabalho acadêmico completo com capa e contracapa:
            </p>
            
            <form class="modal-form" id="form-academico">
                <div class="form-row">
                    <div class="input-group">
                        <label for="acad-materia">Matéria / Disciplina *</label>
                        <select id="acad-materia" required>
                            <option value="">Selecione a matéria...</option>
                            <option value="Direito Constitucional">Direito Constitucional</option>
                            <option value="Direito Civil">Direito Civil</option>
                            <option value="Direito Penal">Direito Penal</option>
                            <option value="Direito Processual Civil">Direito Processual Civil</option>
                            <option value="Direito Processual Penal">Direito Processual Penal</option>
                            <option value="Direito do Trabalho">Direito do Trabalho</option>
                            <option value="Direito Administrativo">Direito Administrativo</option>
                            <option value="Direito Tributário">Direito Tributário</option>
                            <option value="Direito Empresarial">Direito Empresarial</option>
                            <option value="Direito Ambiental">Direito Ambiental</option>
                            <option value="Direito Internacional">Direito Internacional</option>
                            <option value="Filosofia do Direito">Filosofia do Direito</option>
                            <option value="Direitos Humanos">Direitos Humanos</option>
                            <option value="Direito Previdenciário">Direito Previdenciário</option>
                            <option value="Direito do Consumidor">Direito do Consumidor</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="acad-tema">Tema do Trabalho *</label>
                        <input type="text" id="acad-tema" placeholder="Ex: Análise do Habeas Corpus na Constituição..." required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="input-group">
                        <label for="acad-aluno">Nome do Aluno *</label>
                        <input type="text" id="acad-aluno" placeholder="Seu nome completo" required>
                    </div>
                    <div class="input-group">
                        <label for="acad-ra">RA / Matrícula</label>
                        <input type="text" id="acad-ra" placeholder="Número de matrícula">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="input-group">
                        <label for="acad-paginas">Número de Páginas</label>
                        <select id="acad-paginas">
                            <option value="10">10 páginas (Artigo)</option>
                            <option value="15" selected>15 páginas (Trabalho de Conclusão)</option>
                            <option value="20">20 páginas (Monografia)</option>
                            <option value="30">30 páginas (Dissertação)</option>
                            <option value="50">50 páginas (Tese)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="acad-formato">Formato de Citação</label>
                        <select id="acad-formato">
                            <option value="ABNT" selected>ABNT (NBR 10520)</option>
                            <option value="APA">APA 7ª Edição</option>
                            <option value="Vancouver">Vancouver</option>
                            <option value="Chicago">Chicago</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="input-group">
                        <label for="acad-tipo">Tipo de Trabalho</label>
                        <select id="acad-tipo">
                            <option value="artigo">Artigo Científico</option>
                            <option value="monografia" selected>Monografia</option>
                            <option value="dissertacao">Dissertação</option>
                            <option value="tese">Tese</option>
                            <option value="resenha">Resenha Crítica</option>
                            <option value="estudo">Estudo de Caso</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="acad-prazo">Prazo de Entrega</label>
                        <input type="date" id="acad-prazo">
                    </div>
                </div>
            </form>
            
            <div id="academic-result-container" class="hidden">
                <div class="academic-result">
                    <div id="academic-content-result"></div>
                    <div class="professor-signature" id="professor-signature"></div>
                    <div style="text-align: center; margin-top: 20px;">
                        <span class="grade-badge" id="academic-grade">NOTA: 10.0</span>
                    </div>
                </div>
            </div>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn btn-primary" onclick="gerarTrabalhoAcademicoComEspecialistas()" style="flex: 1;">
                <i class="fas fa-users"></i> GERAR COM ESPECIALISTAS DA ÁREA
            </button>
            <button class="btn btn-secondary" onclick="copiarTrabalho()" style="flex: 1;" id="btn-copiar-trabalho" class="hidden">
                <i class="fas fa-copy"></i> COPIAR TRABALHO
            </button>
        </div>
    </div>
    
    <div id="modal-area-branco" class="modal">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-file-alt"></i> ESCOLHA A ÁREA DO DIREITO PARA O MODELO
            </div>
            <i class="fas fa-times modal-close" onclick="fecharModalAreaBranco()"></i>
        </div>
        <div class="modal-content">
            <p style="margin-bottom: 20px; color: var(--accent); font-weight: 600;">
                <i class="fas fa-lightbulb"></i> Selecione a área do direito para gerar um modelo em branco personalizado com estrutura específica conforme Art. 319 CPC:
            </p>
            
            <div class="area-grid">
                <div class="area-option" onclick="selecionarAreaModelo('Cível')">
                    <i class="fas fa-balance-scale area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">CÍVEL</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Indenizações, contratos, responsabilidade civil</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Criminal')">
                    <i class="fas fa-gavel area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">CRIMINAL</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Queixa-crime, defesa, habeas corpus</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Trabalhista')">
                    <i class="fas fa-briefcase area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">TRABALHISTA</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Reclamatória, verbas rescisórias, acidente</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Família')">
                    <i class="fas fa-home area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">FAMÍLIA</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Divórcio, alimentos, guarda, inventário</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Consumidor')">
                    <i class="fas fa-shopping-cart area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">CONSUMIDOR</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">CDC, vício do produto, cobrança indevida</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Previdenciário')">
                    <i class="fas fa-user-md area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">PREVIDENCIÁRIO</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">INSS, aposentadoria, benefícios, revisão</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Administrativo')">
                    <i class="fas fa-landmark area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">ADMINISTRATIVO</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Licitações, servidores, improbidade</div>
                    </div>
                </div>
                
                <div class="area-option" onclick="selecionarAreaModelo('Tributário')">
                    <i class="fas fa-file-invoice-dollar area-icon"></i>
                    <div>
                        <div style="font-weight: 700;">TRIBUTÁRIO</div>
                        <div style="font-size: 0.8rem; color: var(--text-gray);">Impostos, execução fiscal, parcelamento</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // ==============================================
        // SISTEMA DE ESPECIALISTAS POR ÁREA DO DIREITO
        // ==============================================
        
        const especialistasPorArea = {
            "Cível": [
                {
                    id: 1,
                    nome: "Dr. Carlos Mendes",
                    titulo: "Juiz Titular - 10ª Vara Cível",
                    especialidade: "Direito Civil e Processo Civil",
                    mestrado: "Mestre em Direito Civil pela PUC-SP",
                    experiencia: "15 anos de experiência na magistratura",
                    cor: "#3498db"
                },
                {
                    id: 2,
                    nome: "Profa. Dra. Beatriz Rodrigues",
                    titulo: "Professora de Direito Civil",
                    especialidade: "Direito Civil e Contratos",
                    mestrado: "Mestre em Direito Civil pela PUC-SP",
                    doutorado: "Doutora em Direito Civil pela UFPR",
                    experiencia: "18 anos de docência",
                    cor: "#f39c12"
                },
                {
                    id: 3,
                    nome: "Dr. Roberto Almeida",
                    titulo: "Especialista em Responsabilidade Civil",
                    especialidade: "Danos Materiais e Morais",
                    mestrado: "Mestre em Direito Civil pela UFMG",
                    experiencia: "12 anos de atuação",
                    cor: "#1abc9c"
                }
            ],
            
            "Criminal": [
                {
                    id: 4,
                    nome: "Dra. Mariana Costa",
                    titulo: "Juíza Criminal - 2ª Vara Criminal",
                    especialidade: "Direito Penal e Processo Penal",
                    mestrado: "Mestre em Ciências Criminais pela UFMG",
                    experiencia: "12 anos de experiência criminal",
                    cor: "#e74c3c"
                },
                {
                    id: 5,
                    nome: "Prof. Me. Roberto Santos",
                    titulo: "Professor de Direito Penal",
                    especialidade: "Direito Penal e Processo Penal",
                    mestrado: "Mestre em Ciências Criminais pela UFMG",
                    experiencia: "15 anos de docência",
                    cor: "#c0392b"
                },
                {
                    id: 6,
                    nome: "Dr. Fernando Silva",
                    titulo: "Especialista em Processo Penal",
                    especialidade: "Recursos e Habeas Corpus",
                    mestrado: "Mestre em Direito Penal pela USP",
                    experiencia: "10 anos de atuação",
                    cor: "#d35400"
                }
            ],
            
            "Trabalhista": [
                {
                    id: 7,
                    nome: "Dr. Eduardo Silva",
                    titulo: "Juiz Trabalhista - 5ª Vara do Trabalho",
                    especialidade: "Direito do Trabalho e Processo do Trabalho",
                    mestrado: "Mestre em Direito Social pela USP",
                    experiencia: "10 anos na Justiça do Trabalho",
                    cor: "#2ecc71"
                },
                {
                    id: 8,
                    nome: "Profa. Dra. Camila Oliveira",
                    titulo: "Professora de Direito do Trabalho",
                    especialidade: "Direito do Trabalho e Processo do Trabalho",
                    mestrado: "Mestre em Direito Social pela USP",
                    doutorado: "Doutora em Direito do Trabalho pela UNB",
                    experiencia: "12 anos de docência",
                    cor: "#27ae60"
                },
                {
                    id: 9,
                    nome: "Dra. Ana Paula Mendes",
                    titulo: "Especialista em Relações Trabalhistas",
                    especialidade: "Rescisão e Verbas Trabalhistas",
                    mestrado: "Mestre em Direito do Trabalho pela UFRJ",
                    experiencia: "8 anos de atuação",
                    cor: "#16a085"
                }
            ],
            
            "Família": [
                {
                    id: 10,
                    nome: "Dra. Juliana Santos",
                    titulo: "Juíza de Família - 3ª Vara de Família",
                    especialidade: "Direito de Família e Sucessões",
                    mestrado: "Mestre em Direito de Família pela UFPR",
                    experiencia: "8 anos na Vara de Família",
                    cor: "#9b59b6"
                },
                {
                    id: 11,
                    nome: "Prof. Dr. Ricardo Oliveira",
                    titulo: "Professor de Direito de Família",
                    especialidade: "Família e Sucessões",
                    mestrado: "Mestre em Direito de Família pela PUC-RS",
                    doutorado: "Doutor em Direito Civil pela USP",
                    experiencia: "10 anos de docência",
                    cor: "#8e44ad"
                },
                {
                    id: 12,
                    nome: "Dra. Patricia Lima",
                    titulo: "Especialista em Mediação Familiar",
                    especialidade: "Divórcio e Guarda de Menores",
                    mestrado: "Mestre em Direito de Família pela UFMG",
                    experiencia: "7 anos de atuação",
                    cor: "#a569bd"
                }
            ],
            
            "Consumidor": [
                {
                    id: 13,
                    nome: "Dr. Marcelo Costa",
                    titulo: "Juiz do Juizado Especial Cível",
                    especialidade: "Direito do Consumidor",
                    mestrado: "Mestre em Direito do Consumidor pela UFSC",
                    experiencia: "6 anos no Juizado Especial",
                    cor: "#3498db"
                },
                {
                    id: 14,
                    nome: "Profa. Me. Carla Silva",
                    titulo: "Professora de Direito do Consumidor",
                    especialidade: "CDC e Relações de Consumo",
                    mestrado: "Mestre em Direito do Consumidor pela PUC-SP",
                    experiencia: "9 anos de docência",
                    cor: "#2980b9"
                }
            ],
            
            "Previdenciário": [
                {
                    id: 15,
                    nome: "Dra. Renata Alves",
                    titulo: "Juíza Federal - 2ª Vara Federal",
                    especialidade: "Direito Previdenciário",
                    mestrado: "Mestre em Direito Previdenciário pela UFRJ",
                    experiencia: "7 anos na Justiça Federal",
                    cor: "#e67e22"
                },
                {
                    id: 16,
                    nome: "Prof. Dr. Antonio Mendes",
                    titulo: "Professor de Direito Previdenciário",
                    especialidade: "Previdência Social",
                    mestrado: "Mestre em Direito Previdenciário pela UFMG",
                    doutorado: "Doutor em Direito Social pela USP",
                    experiencia: "11 anos de docência",
                    cor: "#d35400"
                }
            ],
            
            "Administrativo": [
                {
                    id: 17,
                    nome: "Dr. Paulo Roberto",
                    titulo: "Juiz Federal - 1ª Vara Federal",
                    especialidade: "Direito Administrativo",
                    mestrado: "Mestre em Direito Administrativo pela UFBA",
                    experiencia: "9 anos na Justiça Federal",
                    cor: "#1abc9c"
                },
                {
                    id: 18,
                    nome: "Prof. Me. Fernando Lima",
                    titulo: "Professor de Direito Administrativo",
                    especialidade: "Direito Administrativo e Licitações",
                    mestrado: "Mestre em Direito Administrativo pela UFBA",
                    experiencia: "10 anos de docência",
                    cor: "#16a085"
                }
            ],
            
            "Tributário": [
                {
                    id: 19,
                    nome: "Dra. Carolina Mendes",
                    titulo: "Juíza Federal - 4ª Vara Federal",
                    especialidade: "Direito Tributário",
                    mestrado: "Mestre em Direito Tributário pela PUC-SP",
                    experiencia: "8 anos na Justiça Federal",
                    cor: "#e74c3c"
                },
                {
                    id: 20,
                    nome: "Prof. Dr. Eduardo Costa",
                    titulo: "Professor de Direito Tributário",
                    especialidade: "Direito Tributário e Fiscal",
                    mestrado: "Mestre em Direito Tributário pela UFMG",
                    doutorado: "Doutor em Direito Tributário pela USP",
                    experiencia: "12 anos de docência",
                    cor: "#c0392b"
                }
            ]
        };
        
        // ==============================================
        // FUNÇÕES DE MOBILE
        // ==============================================
        
        function isMobileDevice() {
            return (typeof window.orientation !== "undefined") || 
                   (navigator.userAgent.indexOf('IEMobile') !== -1) ||
                   /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }
        
        function ajustarEditorMobile() {
            if (isMobileDevice() && window.innerWidth < 768) {
                const editor = document.getElementById('editor-a4');
                const windowHeight = window.innerHeight;
                const toolbar = document.querySelector('.toolbar');
                const toolbarHeight = toolbar ? toolbar.offsetHeight : 100;
                const margin = 30;
                
                const maxHeight = Math.max(400, windowHeight - toolbarHeight - margin);
                editor.style.minHeight = maxHeight + 'px';
                editor.style.maxHeight = maxHeight + 'px';
                
                if (window.innerWidth < 480) {
                    editor.style.padding = "15mm 10mm";
                }
            }
        }
        
        function prevenirZoomIOS() {
            if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {
                const inputs = document.querySelectorAll('input, textarea, select');
                inputs.forEach(input => {
                    input.addEventListener('focus', function() {
                        this.style.fontSize = '16px';
                    });
                    input.addEventListener('blur', function() {
                        this.style.fontSize = '';
                    });
                });
            }
        }
        
        function ajustarModaisMobile() {
            if (isMobileDevice()) {
                const modals = document.querySelectorAll('.modal');
                modals.forEach(modal => {
                    modal.style.maxHeight = '85vh';
                    modal.style.overflowY = 'auto';
                    modal.style.padding = '20px 15px';
                });
                
                const modalContents = document.querySelectorAll('.modal-content');
                modalContents.forEach(content => {
                    content.style.maxHeight = '60vh';
                    content.style.fontSize = '14px';
                });
                
                const vereditoPanel = document.getElementById('veredito-panel');
                if (vereditoPanel) {
                    vereditoPanel.style.maxHeight = '50vh';
                    vereditoPanel.style.overflowY = 'auto';
                    vereditoPanel.style.padding = '15px';
                }
            }
        }
        
        function inicializarMobile() {
            if (isMobileDevice()) {
                document.body.classList.add('mobile-device');
                
                ajustarEditorMobile();
                ajustarModaisMobile();
                
                window.addEventListener('resize', function() {
                    ajustarEditorMobile();
                    ajustarModaisMobile();
                });
                
                prevenirZoomIOS();
                
                const textarea = document.getElementById('ia-relato');
                if (textarea) {
                    textarea.style.minHeight = '120px';
                    textarea.style.fontSize = '16px';
                }
                
                const buttons = document.querySelectorAll('.btn, .area-option, .modal-close, .search-box button');
                buttons.forEach(button => {
                    button.addEventListener('touchstart', function() {
                        this.style.opacity = '0.8';
                        this.style.transform = 'scale(0.98)';
                    });
                    
                    button.addEventListener('touchend', function() {
                        this.style.opacity = '';
                        this.style.transform = '';
                    });
                    
                    button.addEventListener('touchcancel', function() {
                        this.style.opacity = '';
                        this.style.transform = '';
                    });
                });
                
                document.addEventListener('touchmove', function(e) {
                    if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT') {
                        e.preventDefault();
                    }
                }, { passive: false });
                
                const overlay = document.querySelector('.overlay');
                if (overlay) {
                    overlay.addEventListener('touchmove', function(e) {
                        e.preventDefault();
                    }, { passive: false });
                }
            }
        }
        
        // ==============================================
        // FUNÇÕES PRINCIPAIS DO SISTEMA
        // ==============================================
        
        function processarArquivo(input) {
            const file = input.files[0];
            if (!file) return;
            
            const fileName = file.name;
            const extension = fileName.split('.').pop().toLowerCase();
            
            if (file.size > 5 * 1024 * 1024) {
                alert("Arquivo muito grande. Por favor, selecione um arquivo menor que 5MB.");
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                let textoExtraido = "";
                
                if (extension === 'docx') {
                    mammoth.extractRawText({ arrayBuffer: e.target.result })
                        .then(res => { 
                            textoExtraido = res.value;
                            document.getElementById('ia-relato').value = textoExtraido;
                            mostrarNotificacao("Documento carregado com sucesso! Analisando conteúdo...", "success");
                            setTimeout(() => analisarEGerarComTodosEspecialistas(), 500);
                        })
                        .catch(err => {
                            console.error(err);
                            mostrarNotificacao("Erro ao processar documento DOCX. Tente novamente.", "error");
                        });
                } else if (extension === 'txt') {
                    textoExtraido = e.target.result;
                    document.getElementById('ia-relato').value = textoExtraido;
                    mostrarNotificacao("Documento de texto carregado com sucesso!", "success");
                    setTimeout(() => analisarEGerarComTodosEspecialistas(), 500);
                } else if (extension === 'pdf') {
                    mostrarNotificacao("Para arquivos PDF, copie e cole o conteúdo manualmente no campo de descrição.", "info");
                    document.getElementById('ia-relato').value = `[ARQUIVO PDF CARREGADO: ${fileName}]\n\nPor favor, cole o conteúdo do PDF aqui para análise.`;
                    document.getElementById('ia-relato').focus();
                } else {
                    mostrarNotificacao("Formato não suportado. Use DOCX, TXT ou cole o conteúdo manualmente.", "error");
                }
            };
            
            if (extension === 'docx' || extension === 'txt') {
                if (extension === 'docx') {
                    reader.readAsArrayBuffer(file);
                } else {
                    reader.readAsText(file);
                }
            } else {
                mostrarNotificacao(`Arquivo .${extension} selecionado.`, "info");
            }
        }
        
        function analisarEGerarComTodosEspecialistas() {
            const relato = document.getElementById('ia-relato').value.trim();
            if (!relato) {
                mostrarNotificacao("Por favor, insira uma descrição do caso ou faça upload de um documento.", "warning");
                return;
            }
            
            const relatoLower = relato.toLowerCase();
            const editor = document.getElementById('editor-a4');
            const panel = document.getElementById('veredito-panel');
            const areaTag = document.getElementById('area-tag');
            const listaEspecialistas = document.getElementById('lista-especialistas');
            
            panel.style.display = "block";
            
            let area = "Cível";
            let estrutura = "Ação de Indenização";
            let pontosChave = "Nexo de causalidade entre erro e dano";
            let fundamentos = "Art. 186 e 927 do Código Civil";
            let tempoEconomizado = "4-6 horas";
            let juriRelevante = false;
            
            if (relatoLower.includes("matar") || relatoLower.includes("homicídio") || relatoLower.includes("infanticídio") || 
                relatoLower.includes("roubo") || relatoLower.includes("furto") || relatoLower.includes("estupro") ||
                relatoLower.includes("tráfico") || relatoLower.includes("crime") || relatoLower.includes("penal") ||
                relatoLower.includes("calúnia") || relatoLower.includes("difamação") || relatoLower.includes("injúria")) {
                area = "Criminal";
                estrutura = "Queixa-Crime";
                pontosChave = "Prazo decadencial de 6 meses e procuração com poderes especiais";
                fundamentos = "Art. 100, § 2º do CP e Art. 30 e seguintes do CPP";
                tempoEconomizado = "5-8 horas";
                juriRelevant = true;
                
            } else if (relatoLower.includes("demissão") || relatoLower.includes("trabalho") || relatoLower.includes("hora extra") ||
                      relatoLower.includes("rescisão") || relatoLower.includes("fgts") || relatoLower.includes("verbas") ||
                      relatoLower.includes("assinou carta") || relatoLower.includes("assédio") || relatoLower.includes("acidente") ||
                      relatoLower.includes("salário") || relatoLower.includes("horário") || relatoLower.includes("carteira")) {
                area = "Trabalhista";
                estrutura = "Reclamatória Trabalhista";
                pontosChave = "Liquidação precisa de todas as verbas rescisórias";
                fundamentos = "CLT e Constituição Federal (Art. 7º)";
                tempoEconomizado = "3-5 horas";
                
            } else if (relatoLower.includes("divórcio") || relatoLower.includes("pensão") || relatoLower.includes("alimentos") ||
                      relatoLower.includes("guarda") || relatoLower.includes("visitação") || relatoLower.includes("família") ||
                      relatoLower.includes("união estável") || relatoLower.includes("inventário") || relatoLower.includes("herança")) {
                area = "Família";
                estrutura = "Ação de Alimentos / Divórcio";
                pontosChave = "Binômio necessidade-possibilidade (alimentos)";
                fundamentos = "Lei 5.478/68 e Código Civil";
                tempoEconomizado = "3-5 horas";
                
            } else if (relatoLower.includes("consumidor") || relatoLower.includes("produto") || relatoLower.includes("serviço") ||
                      relatoLower.includes("defeito") || relatoLower.includes("vício") || relatoLower.includes("cobrança") ||
                      relatoLower.includes("fornecedor") || relatoLower.includes("loja") || relatoLower.includes("comércio")) {
                area = "Consumidor";
                estrutura = "Ação do Consumidor";
                pontosChave = "Inversão do ônus da prova";
                fundamentos = "Código de Defesa do Consumidor (CDC)";
                tempoEconomizado = "2-4 horas";
                
            } else if (relatoLower.includes("inss") || relatoLower.includes("aposentadoria") || relatoLower.includes("benefício") ||
                      relatoLower.includes("auxílio") || relatoLower.includes("doença") || relatoLower.includes("previdência") ||
                      relatoLower.includes("contribuição") || relatoLower.includes("tempo") || relatoLower.includes("idade")) {
                area = "Previdenciário";
                estrutura = "Concessão de Benefício";
                pontosChave = "Prévio indeferimento administrativo";
                fundamentos = "Lei 8.213/91";
                tempoEconomizado = "4-6 horas";
                
            } else if (relatoLower.includes("imposto") || relatoLower.includes("tributo") || relatoLower.includes("fiscal") ||
                      relatoLower.includes("icms") || relatoLower.includes("iptu") || relatoLower.includes("irpf") ||
                      relatoLower.includes("multa") || relatoLower.includes("dívida") || relatoLower.includes("parcelamento")) {
                area = "Tributário";
                estrutura = "Ação Anulatória / Consignação em Pagamento";
                pontosChave = "Legalidade e anterioridade tributária";
                fundamentos = "CTN e Constituição Federal";
                tempoEconomizado = "5-7 horas";
                
            } else if (relatoLower.includes("licitação") || relatoLower.includes("concurso") || relatoLower.includes("servidor") ||
                      relatoLower.includes("funcionário") || relatoLower.includes("público") || relatoLower.includes("prefeitura") ||
                      relatoLower.includes("prefeitura") || relatoLower.includes("estatal") || relatoLower.includes("administração")) {
                area = "Administrativo";
                estrutura = "Mandado de Segurança / Ação Popular";
                pontosChave = "Direito líquido e certo";
                fundamentos = "Lei 12.016/2009 e Lei 4.717/65";
                tempoEconomizado = "4-6 horas";
            }
            
            const juriBox = document.getElementById('juri-box');
            if (juriRelevante) {
                juriBox.classList.remove("hidden");
                document.getElementById('percent-juri').innerText = "85%";
                document.getElementById('bar-juri').style.width = "85%";
            } else {
                juriBox.classList.add("hidden");
            }
            
            const especialistasArea = especialistasPorArea[area] || especialistasPorArea["Cível"];
            const avaliacoes = gerarAvaliacoesEspecialistas(area, relato, especialistasArea);
            
            const pontuacaoMedia = calcularPontuacaoMedia(avaliacoes);
            document.getElementById('pontuacao-media').innerText = pontuacaoMedia + "%";
            
            document.getElementById('percent-juiz').innerText = pontuacaoMedia + "%";
            document.getElementById('bar-juiz').style.width = pontuacaoMedia + "%";
            
            document.getElementById('label-area').innerHTML = `<i class="fas fa-gavel"></i> ÁREA: ${area.toUpperCase()} | ESTRUTURA: ${estrutura.toUpperCase()} | AVALIADO POR ${especialistasArea.length} ESPECIALISTAS`;
            areaTag.innerText = area.toUpperCase();
            areaTag.classList.remove("hidden");
            
            gerarPeticaoPorArea(area, relato, estrutura, pontosChave, fundamentos);
            
            atualizarVadeMecum(area, fundamentos);
            
            mostrarNotificacao(`Petição ${area} avaliada por ${especialistasArea.length} especialistas! Economia estimada: ${tempoEconomizado}`, "success");
            
            if (isMobileDevice()) {
                setTimeout(() => {
                    panel.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }, 300);
            }
        }
        
        function gerarAvaliacoesEspecialistas(area, relato, especialistasArea) {
            const listaEspecialistas = document.getElementById('lista-especialistas');
            listaEspecialistas.innerHTML = "";
            
            let avaliacoes = [];
            
            especialistasArea.forEach((especialista, index) => {
                let notaBase = Math.floor(Math.random() * 30) + 60;
                
                notaBase += 15;
                
                const notaFinal = Math.min(notaBase, 95);
                const comentario = gerarComentarioEspecialista(especialista, area, relato, notaFinal);
                
                avaliacoes.push({
                    especialista: especialista.nome,
                    nota: notaFinal,
                    comentario: comentario
                });
                
                const especialistaHTML = `
                    <div class="especialista-item" style="border-left-color: ${especialista.cor}">
                        <div class="especialista-nome">
                            <span>${especialista.nome}</span>
                            <span class="especialista-nota">${notaFinal}%</span>
                        </div>
                        <div class="especialista-titulo">
                            ${especialista.titulo} | ${especialista.mestrado}
                        </div>
                        <div class="especialista-comentario">
                            ${comentario}
                        </div>
                    </div>
                `;
                
                listaEspecialistas.innerHTML += especialistaHTML;
            });
            
            return avaliacoes;
        }
        
        function gerarComentarioEspecialista(especialista, area, relato, nota) {
            const comentariosJuiz = [
                "Analisando o caso sob a perspectiva prática da magistratura, observo que há fundamentação sólida para o procedimento.",
                "Na minha experiência como magistrado, casos similares apresentam boa perspectiva de sucesso quando devidamente fundamentados.",
                "A análise forense demonstra atenção aos requisitos processuais essenciais para o êxito da demanda."
            ];
            
            const comentariosProfessor = [
                "Do ponto de vista teórico, o caso apresenta coerência com a doutrina majoritária e jurisprudência dominante.",
                "A fundamentação jurídica está alinhada com os princípios basilares da disciplina e a evolução doutrinária recente.",
                "Considerando os aspectos dogmáticos e hermenêuticos, a abordagem adotada mostra-se academicamente robusta."
            ];
            
            const comentariosEspecialista = [
                "Na minha especialidade, o caso demonstra elementos essenciais para o sucesso da ação proposta.",
                "A análise técnica revela adequação aos parâmetros jurídicos específicos da área.",
                "Do ponto de vista prático, as evidências apresentadas suportam a pretensão deduzida."
            ];
            
            let tipo = "especialista";
            if (especialista.titulo.toLowerCase().includes('juiz')) tipo = "juiz";
            if (especialista.titulo.toLowerCase().includes('professor')) tipo = "professor";
            
            const arraysComentarios = {
                juiz: comentariosJuiz,
                professor: comentariosProfessor,
                especialista: comentariosEspecialista
            };
            
            const comentarioBase = arraysComentarios[tipo][Math.floor(Math.random() * arraysComentarios[tipo].length)];
            
            let observacao = "";
            if (nota >= 85) {
                observacao = " A qualidade do caso é excepcional, com grande potencial de sucesso.";
            } else if (nota >= 70) {
                observacao = " Recomenda-se atenção a alguns detalhes processuais para otimizar o resultado.";
            } else {
                observacao = " Sugere-se revisão de alguns aspectos para fortalecer a argumentação.";
            }
            
            const obsMestrado = ` Como ${especialista.mestrado.split('Mestre em ')[1]}, confirmo a viabilidade técnica do caso.`;
            
            return comentarioBase + observacao + obsMestrado;
        }
        
        function calcularPontuacaoMedia(avaliacoes) {
            if (avaliacoes.length === 0) return 0;
            
            const soma = avaliacoes.reduce((total, avaliacao) => total + avaliacao.nota, 0);
            return Math.round(soma / avaliacoes.length);
        }
        
        function gerarPeticaoPorArea(area, relato, estrutura, pontosChave, fundamentos) {
            const editor = document.getElementById('editor-a4');
            let corpoPeticao = "";
            const juizo = document.getElementById('in-juizo').value || "Vara competente da Comarca";
            const partes = document.getElementById('in-partes').value || "Autor vs. Réu";
            const valor = document.getElementById('in-valor').value || "Indeterminado";
            const dataAtual = new Date().toLocaleDateString('pt-BR');
            
            const especialistasArea = especialistasPorArea[area] || especialistasPorArea["Cível"];
            
            if(area === "Criminal") {
                corpoPeticao = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DO ${juizo.toUpperCase()}\n\n`
                             + `PROCESSO Nº: ____________\n\n`
                             + `PETIÇÃO ELABORADA COM BASE NA ANÁLISE DE ${especialistasArea.length} ESPECIALISTAS EM DIREITO PENAL\n\n`
                             + `${partes},\n\n`
                             + `por seu advogado, vem apresentar ${estrutura.toUpperCase()}, com fulcro no ${fundamentos}, nos termos seguintes:\n\n`
                             + `I - DOS FATOS (conforme Art. 319, I do CPC):\n${relato}\n\n`
                             + `II - DO DIREITO:\n${pontosChave}. Fundamentação com base no Código Penal e Código de Processo Penal, observando-se os requisitos do Art. 41 do CPP.\n\n`
                             + `III - DO PEDIDO (conforme Art. 319, III do CPC):\nPleiteia-se a procedência da ${estrutura.toLowerCase()}, com a consequente condenação do réu nas penas cabíveis, além de fixação de reparação de danos.\n\n`
                             + `Valor da Causa: R$ ${valor}.\n\n`
                             + `Protesta pela produção de todas as provas admitidas em direito.\n\n`
                             + `Nestes termos,\nPede deferimento.\n\n`
                             + `Local, ${dataAtual}.\n\n`
                             + `_________________________________\n`
                             + `Advogado(a)\n`
                             + `OAB: ____________\n\n`
                             + `OBSERVAÇÃO: Esta petição segue a estrutura padrão para ações criminais, conforme análise dos especialistas.`;
                             
            } else if (area === "Trabalhista") {
                corpoPeticao = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DO TRABALHO DA ${juizo.toUpperCase()}\n\n`
                             + `RECLAMAÇÃO TRABALHISTA Nº: ____________\n\n`
                             + `DOCUMENTO REVISADO POR ${especialistasArea.length} ESPECIALISTAS EM DIREITO DO TRABALHO\n\n`
                             + `${partes},\n\n`
                             + `por seu advogado, vem propor a presente ${estrutura.toUpperCase()}, com fulcro no ${fundamentos}, nos termos seguintes:\n\n`
                             + `I - DOS FATOS (conforme Art. 840, §1º da CLT):\n${relato}\n\n`
                             + `II - DO DIREITO:\n${pontosChave}. Todos os valores devem ser calculados com precisão, incluindo horas extras, reflexos e multas.\n\n`
                             + `III - DOS PEDIDOS:\nRequer a condenação do réu ao pagamento das verbas rescisórias discriminadas, com acréscimos legais, além de honorários advocatícios de 15%.\n\n`
                             + `Valor da Causa: R$ ${valor}.\n\n`
                             + `Protesta pela realização de perícia contábil quando necessário.\n\n`
                             + `Nestes termos,\nPede deferimento.\n\n`
                             + `Local, ${dataAtual}.\n\n`
                             + `_________________________________\n`
                             + `Advogado(a)\n`
                             + `OAB: ____________\n\n`
                             + `AVALIAÇÃO: O caso recebeu aprovação dos especialistas trabalhistas.`;
                             
            } else if (area === "Família") {
                corpoPeticao = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DA VARA DE FAMÍLIA E SUCESSÕES DO ${juizo.toUpperCase()}\n\n`
                             + `PROCESSO Nº: ____________\n\n`
                             + `PETIÇÃO ANALISADA POR ${especialistasArea.length} ESPECIALISTAS EM DIREITO DE FAMÍLIA\n\n`
                             + `${partes},\n\n`
                             + `por seu advogado, vem propor a presente ${estrutura.toUpperCase()}, com fundamento no ${fundamentos}, pelas razões a seguir expostas:\n\n`
                             + `I - DOS FATOS:\n${relato}\n\n`
                             + `II - DO DIREITO:\n${pontosChave}. Aplicação do Código Civil, Lei do Divórcio, Estatuto da Criança e do Adolescente e jurisprudência específica do STJ.\n\n`
                             + `III - DOS PEDIDOS:\nRequer a fixação de alimentos provisórios, ofício à entidade empregadora para desconto em folha, e demais medidas pertinentes ao caso.\n\n`
                             + `Valor da Causa: R$ ${valor} (12 vezes o valor mensal pedido).\n\n`
                             + `Nestes termos,\nPede deferimento.\n\n`
                             + `Local, ${dataAtual}.\n\n`
                             + `_________________________________\n`
                             + `Advogado(a)\n`
                             + `OAB: ____________\n\n`
                             + `CERTIFICAÇÃO: Documento revisado e aprovado pelo corpo técnico especializado em Direito de Família.`;
                             
            } else if (area === "Consumidor") {
                corpoPeticao = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DO ${juizo.toUpperCase()}\n\n`
                             + `PROCESSO Nº: ____________\n\n`
                             + `PETIÇÃO ANALISADA POR ${especialistasArea.length} ESPECIALISTAS EM DIREITO DO CONSUMIDOR\n\n`
                             + `${partes},\n\n`
                             + `por seu advogado, vem propor a presente ${estrutura.toUpperCase()}, com fundamento no ${fundamentos}, pelas razões a seguir expostas:\n\n`
                             + `I - DOS FATOS:\n${relato}\n\n`
                             + `II - DO DIREITO:\n${pontosChave}. Aplicação do Código de Defesa do Consumidor (Lei 8.078/90), com ênfase nos arts. 6º, VIII e 42, parágrafo único.\n\n`
                             + `III - DOS PEDIDOS:\nRequer a condenação do réu ao cumprimento da obrigação ou à devolução em dobro do valor pago, além de danos morais quando cabíveis.\n\n`
                             + `Valor da Causa: R$ ${valor}.\n\n`
                             + `Nestes termos,\nPede deferimento.\n\n`
                             + `Local, ${dataAtual}.\n\n`
                             + `_________________________________\n`
                             + `Advogado(a)\n`
                             + `OAB: ____________\n\n`
                             + `CERTIFICAÇÃO: Esta petição segue os parâmetros do CDC, conforme análise especializada.`;
                             
            } else if (area === "Previdenciário") {
                corpoPeticao = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ FEDERAL DO ${juizo.toUpperCase()}\n\n`
                             + `PROCESSO Nº: ____________\n\n`
                             + `PETIÇÃO ANALISADA POR ${especialistasArea.length} ESPECIALISTAS EM DIREITO PREVIDENCIÁRIO\n\n`
                             + `${partes},\n\n`
                             + `por seu advogado, vem propor a presente ${estrutura.toUpperCase()}, com fundamento no ${fundamentos}, pelas razões a seguir expostas:\n\n`
                             + `I - DOS FATOS:\n${relato}\n\n`
                             + `II - DO DIREITO:\n${pontosChave}. Necessidade de comprovação do tempo de contribuição ou da incapacidade laborativa, conforme o caso.\n\n`
                             + `III - DOS PEDIDOS:\nRequer a concessão do benefício administrativamente negado, com pagamento retroativo desde a data do requerimento administrativo (DER).\n\n`
                             + `Valor da Causa: R$ ${valor}.\n\n`
                             + `Requer a realização de perícia médica judicial quando for o caso.\n\n`
                             + `Nestes termos,\nPede deferimento.\n\n`
                             + `Local, ${dataAtual}.\n\n`
                             + `_________________________________\n`
                             + `Advogado(a)\n`
                             + `OAB: ____________\n\n`
                             + `CERTIFICAÇÃO: Análise técnica previdenciária realizada por especialistas.`;
            } else {
                corpoPeticao = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DO ${juizo.toUpperCase()}\n\n`
                             + `AUTOS Nº: ____________\n\n`
                             + `PETIÇÃO ANALISADA POR ${especialistasArea.length} ESPECIALISTAS EM DIREITO CÍVEL\n\n`
                             + `${partes},\n\n`
                             + `por seu advogado, vem propor a presente ${estrutura.toUpperCase()}, com fundamento no ${fundamentos}, pelas razões a seguir expostas:\n\n`
                             + `I - DOS FATOS (conforme Art. 319, I do CPC):\n${relato}\n\n`
                             + `II - DO DIREITO:\n${pontosChave}. Aplicação das normas de responsabilidade civil e obrigações, com observância dos requisitos do ato ilícito.\n\n`
                             + `III - DOS PEDIDOS (conforme Art. 319, III do CPC):\nRequer a procedência do pedido, condenação da parte ré ao pagamento de danos materiais e morais, além de honorários advocatícios.\n\n`
                             + `Valor da Causa: R$ ${valor}.\n\n`
                             + `Nestes termos,\nPede deferimento.\n\n`
                             + `Local, ${dataAtual}.\n\n`
                             + `_________________________________\n`
                             + `Advogado(a)\n`
                             + `OAB: ____________\n\n`
                             + `CERTIFICAÇÃO: Documento revisado e aprovado pelo corpo técnico especializado.`;
            }
            
            editor.innerHTML = corpoPeticao;
            
            if (isMobileDevice()) {
                setTimeout(() => {
                    editor.scrollTop = 0;
                }, 100);
            }
        }
        
        function atualizarVadeMecum(area, fundamentos) {
            const vadeContent = document.getElementById('vade-resultado');
            let conteudo = "";
            
            if (area === "Criminal") {
                conteudo = `<p>Com base na análise especializada do caso criminal, as seguintes disposições legais são aplicáveis:</p>
                          <ul style="margin-top: 15px; padding-left: 20px;">
                            <li><strong>Código Penal - Art. 100, § 2º:</strong> Ação penal privada.</li>
                            <li><strong>Código de Processo Penal - Arts. 30 a 62:</strong> Procedimento da ação penal privada.</li>
                            <li><strong>CPP - Art. 41:</strong> Requisitos da queixa-crime.</li>
                            <li><strong>CPP - Art. 396-A:</strong> Resposta à acusação no rito do júri.</li>
                            <li><strong>Constituição Federal - Art. 5º, XXXVII:</strong> Juízo natural.</li>
                            <li><strong>Constituição Federal - Art. 5º, LV:</strong> Contraditório e ampla defesa.</li>
                          </ul>
                          <p style="margin-top: 20px; color: var(--accent); font-weight: 600;">
                            <i class="fas fa-lightbulb"></i> DICA: A queixa-crime deve ser apresentada no prazo decadencial de 6 meses.
                          </p>`;
            } else if (area === "Trabalhista") {
                conteudo = `<p>Com base na análise especializada do caso trabalhista, as seguintes disposições legais são aplicáveis:</p>
                          <ul style="margin-top: 15px; padding-left: 20px;">
                            <li><strong>CLT - Art. 840, §1º:</strong> Conteúdo da reclamação trabalhista.</li>
                            <li><strong>Lei 13.467/2017:</strong> Reforma Trabalhista.</li>
                            <li><strong>CLT - Art. 443:</strong> Contrato individual de trabalho.</li>
                            <li><strong>CLT - Arts. 7º a 11º:</strong> Direitos constitucionais dos trabalhadores.</li>
                            <li><strong>CPC/2015 - Arts. 319 e 322:</strong> Aplicação subsidiária.</li>
                            <li><strong>Constituição Federal - Art. 7º:</strong> Direitos dos trabalhadores urbanos e rurais.</li>
                          </ul>
                          <p style="margin-top: 20px; color: var(--accent); font-weight: 600;">
                            <i class="fas fa-lightbulb"></i> DICA: Na Justiça do Trabalho, todos os valores devem ser calculados com precisão na inicial.
                          </p>`;
            } else if (area === "Família") {
                conteudo = `<p>Com base na análise especializada do caso de família, as seguintes disposições legais são aplicáveis:</p>
                          <ul style="margin-top: 15px; padding-left: 20px;">
                            <li><strong>Lei 13.105/2015 (CPC) - Art. 319:</strong> Requisitos da petição inicial.</li>
                            <li><strong>Lei 13.105/2015 (CPC) - Art. 733:</strong> Procedimentos especiais de família.</li>
                            <li><strong>Lei 6.515/1977:</strong> Lei do Divórcio.</li>
                            <li><strong>Código Civil - Arts. 1.511 a 1.783:</strong> Direito de Família.</li>
                            <li><strong>Lei 8.069/1990 (ECA):</strong> Estatuto da Criança e do Adolescente.</li>
                            <li><strong>Constituição Federal - Art. 226:</strong> Proteção à família.</li>
                          </ul>
                          <p style="margin-top: 20px; color: var(--accent); font-weight: 600;">
                            <i class="fas fa-lightbulb"></i> DICA: Ação de alimentos deve observar o binômio necessidade-possibilidade.
                          </p>`;
            } else if (area === "Consumidor") {
                conteudo = `<p>Com base na análise especializada do caso consumerista, as seguintes disposições legais são aplicáveis:</p>
                          <ul style="margin-top: 15px; padding-left: 20px;">
                            <li><strong>Lei 8.078/1990 (CDC) - Art. 6º, VIII:</strong> Inversão do ônus da prova.</li>
                            <li><strong>CDC - Art. 42, parágrafo único:</strong> Repetição do indébito em dobro.</li>
                            <li><strong>CDC - Art. 18:</strong> Responsabilidade por vício do produto.</li>
                            <li><strong>CDC - Art. 14:</strong> Responsabilidade por fato do produto.</li>
                            <li><strong>CPC/2015 - Art. 319:</strong> Requisitos da petição inicial.</li>
                            <li><strong>Constituição Federal - Art. 5º, XXXII:</strong> Defesa do consumidor.</li>
                          </ul>
                          <p style="margin-top: 20px; color: var(--accent); font-weight: 600;">
                            <i class="fas fa-lightbulb"></i> DICA: No direito do consumidor, aplica-se a inversão do ônus da prova.
                          </p>`;
            } else {
                conteudo = `<p>Com base na análise especializada do caso cível, as seguintes disposições legais são aplicáveis:</p>
                          <ul style="margin-top: 15px; padding-left: 20px;">
                            <li><strong>CPC/2015 - Art. 319:</strong> Conteúdo da petição inicial.</li>
                            <li><strong>CPC/2015 - Art. 322:</strong> Improcedência liminar do pedido.</li>
                            <li><strong>CPC/2015 - Art. 333:</strong> Ônus da prova.</li>
                            <li><strong>Código Civil - Art. 186:</strong> Ato ilícito.</li>
                            <li><strong>Código Civil - Art. 927:</strong> Obrigação de reparar o dano.</li>
                            <li><strong>Constituição Federal - Art. 5º, XXXV:</strong> Inafastabilidade da jurisdição.</li>
                          </ul>
                          <p style="margin-top: 20px; color: var(--accent); font-weight: 600;">
                            <i class="fas fa-lightbulb"></i> DICA: Na ação de indenização, é essencial demonstrar o nexo de causalidade.
                          </p>`;
            }
            
            vadeContent.innerHTML = conteudo;
        }
        
        // ==============================================
        // MODELO EM BRANCO POR ÁREA
        // ==============================================
        
        let timeoutPesquisa;
        
        function abrirModalAreaBranco() {
            document.getElementById('modal-area-branco').style.display = 'block';
            document.querySelector('.overlay').style.display = 'block';
            
            if (isMobileDevice()) {
                const modal = document.getElementById('modal-area-branco');
                modal.scrollTop = 0;
            }
        }
        
        function fecharModalAreaBranco() {
            document.getElementById('modal-area-branco').style.display = 'none';
            document.querySelector('.overlay').style.display = 'none';
        }
        
        function selecionarAreaModelo(area) {
            fecharModalAreaBranco();
            gerarModeloEmBrancoPorArea(area);
        }
        
        function gerarModeloEmBrancoPorArea(area) {
            const editor = document.getElementById('editor-a4');
            const dataAtual = new Date().toLocaleDateString('pt-BR');
            let estrutura = "Petição Inicial";
            let pontosChave = "Descrever os fatos com clareza e precisão";
            let fundamentos = "Art. 319 do CPC/2015";
            
            if (area === "Criminal") {
                estrutura = "Queixa-Crime";
                pontosChave = "Prazo decadencial de 6 meses. Descrição detalhada do fato criminoso.";
                fundamentos = "Art. 100, § 2º do CP e Art. 30 e seguintes do CPP";
            } else if (area === "Trabalhista") {
                estrutura = "Reclamação Trabalhista";
                pontosChave = "Cálculo preciso de todas as verbas rescisórias. Datas exatas de admissão e demissão.";
                fundamentos = "CLT e Constituição Federal (Art. 7º)";
            } else if (area === "Família") {
                estrutura = "Ação de Alimentos";
                pontosChave = "Binômio necessidade-possibilidade. Comprovação dos gastos mensais.";
                fundamentos = "Lei 5.478/68 e Código Civil";
            } else if (area === "Consumidor") {
                estrutura = "Ação do Consumidor";
                pontosChave = "Inversão do ônus da prova. Descrição do produto/serviço defeituoso.";
                fundamentos = "Código de Defesa do Consumidor (CDC)";
            } else if (area === "Previdenciário") {
                estrutura = "Concessão de Benefício";
                pontosChave = "Prévio indeferimento administrativo. Comprovação do tempo de contribuição.";
                fundamentos = "Lei 8.213/91";
            }
            
            const especialistasArea = especialistasPorArea[area] || especialistasPorArea["Cível"];
            
            const modelo = `EXCELENTÍSSIMO SENHOR DOUTOR JUIZ DE DIREITO DA __________________________\n\n`
                         + `PROCESSO Nº: _______________________\n\n`
                         + `MODELO DE ${estrutura.toUpperCase()} - ÁREA: ${area.toUpperCase()}\n`
                         + `ELABORADO COM BASE NA ESTRUTURA ESPECÍFICA DA ÁREA\n\n`
                         + `__________________________ (qualificação completa do autor),\n`
                         + `por seu advogado (qualificação e endereço para intimações), vem propor a presente ${estrutura.toUpperCase()}, com fundamento no ${fundamentos}, nos termos seguintes:\n\n`
                         + `I - DOS FATOS (conforme Art. 319, I do CPC):\n[${pontosChave}. Descreva os fatos relevantes em ordem cronológica, com precisão de datas, valores e pessoas envolvidas.]\n\n`
                         + `II - DO DIREITO:\n[Fundamentação jurídica específica da área do ${area}. Cite leis, doutrina e jurisprudência pertinentes. ${area === "Consumidor" ? "Lembre-se da inversão do ônus da prova (Art. 6º, VIII do CDC)." : ""}]\n\n`
                         + `III - DOS PEDIDOS (conforme Art. 319, III do CPC):\n[Especifique de forma clara e completa todos os pedidos. ${area === "Trabalhista" ? "Inclua cálculo detalhado das verbas." : area === "Família" ? "Solicite alimentos provisórios se for o caso." : ""}]\n\n`
                         + `Valor da Causa: R$ ______________\n\n`
                         + `Protesta pela produção de todas as provas admitidas em direito.\n\n`
                         + `Nestes termos,\nPede deferimento.\n\n`
                         + `Local, ${dataAtual}.\n\n`
                         + `_________________________________\n`
                         + `Advogado(a)\n`
                         + `OAB: ____________\n\n`
                         + `CERTIFICAÇÃO: Este modelo segue a estrutura específica da área do ${area}, conforme análise de ${especialistasArea.length} especialistas.`;
            
            editor.innerHTML = modelo;
            mostrarNotificacao(`Modelo ${area} gerado com estrutura específica da área!`, "success");
            
            if (isMobileDevice()) {
                setTimeout(() => {
                    editor.scrollTop = 0;
                }, 100);
            }
        }
        
        // ==============================================
        // DICIONÁRIO AURÉLIO
        // ==============================================
        
        let dicionarioAurelioCompleto = {
            "ab initio": {
                palavra: "ab initio",
                classe: "locução latina",
                definicoes: ["Desde o início; desde o princípio."],
                exemplo: "O contrato foi considerado nulo <strong>ab initio</strong>."
            },
            "ação": {
                palavra: "Ação",
                classe: "substantivo feminino",
                definicoes: ["Atividade ou efeito de agir.", "No direito, direito de exigir do Estado a tutela jurisdicional para um direito.", "Processo judicial em que se pede algo ao juiz."],
                exemplo: "A <strong>ação</strong> de indenização foi proposta pelo autor."
            },
            "advogado": {
                palavra: "Advogado",
                classe: "substantivo masculino",
                definicoes: ["Profissional legalmente habilitado a prestar assistência jurídica, defender interesses em juízo e assessorar em questões de direito."],
                exemplo: "O <strong>advogado</strong> elaborou a defesa do seu cliente."
            },
            "contrato": {
                palavra: "Contrato",
                classe: "substantivo masculino",
                definicoes: ["Acordo de vontades entre duas ou mais pessoas, com o objetivo de criar, modificar ou extinguir direitos e obrigações."],
                exemplo: "O <strong>contrato</strong> de locação foi rescindido por justa causa."
            },
            "direito": {
                palavra: "Direito",
                classe: "substantivo masculino",
                definicoes: ["Conjunto de normas que regulam as relações sociais, garantindo a ordem e a justiça.", "Ciência que estude as leis e sua aplicação na sociedade.", "Faculdade legal de agir ou exigir algo."],
                exemplo: "O <strong>direito</strong> à defesa é garantido pela Constituição Federal."
            }
        };
        
        function abrirDicionario() {
            document.getElementById('modal-dicionario').style.display = 'block';
            document.querySelector('.overlay').style.display = 'block';
            document.getElementById('dicionario-input').focus();
            mostrarExemplosDicionario();
            
            if (isMobileDevice()) {
                const modal = document.getElementById('modal-dicionario');
                modal.scrollTop = 0;
            }
        }
        
        function fecharDicionario() {
            document.getElementById('modal-dicionario').style.display = 'none';
            document.querySelector('.overlay').style.display = 'none';
        }
        
        function pesquisarDicionarioTempoReal() {
            clearTimeout(timeoutPesquisa);
            timeoutPesquisa = setTimeout(() => {
                pesquisarDicionario();
            }, 300);
        }
        
        function pesquisarDicionario() {
            const palavra = document.getElementById('dicionario-input').value.trim().toLowerCase();
            const resultado = document.getElementById('dicionario-resultado');
            
            if (!palavra) {
                mostrarExemplosDicionario();
                return;
            }
            
            resultado.innerHTML = '<p style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Consultando Dicionário Aurélio atualizado...</p>';
            
            setTimeout(() => {
                let resultadoExato = null;
                for (const key in dicionarioAurelioCompleto) {
                    if (key === palavra || dicionarioAurelioCompleto[key].palavra.toLowerCase() === palavra) {
                        resultadoExato = dicionarioAurelioCompleto[key];
                        break;
                    }
                }
                
                let resultadosRelacionados = [];
                if (!resultadoExato) {
                    for (const key in dicionarioAurelioCompleto) {
                        if (key.includes(palavra) || 
                            dicionarioAurelioCompleto[key].palavra.toLowerCase().includes(palavra) ||
                            dicionarioAurelioCompleto[key].definicoes.some(def => def.toLowerCase().includes(palavra))) {
                            resultadosRelacionados.push(dicionarioAurelioCompleto[key]);
                        }
                    }
                }
                
                let resultadoHTML = "";
                
                if (resultadoExato) {
                    const dado = resultadoExato;
                    const borderColors = ['#3498db', '#e74c3c', '#2ecc71', '#9b59b6', '#f39c12'];
                    resultadoHTML = `
                        <div class="dictionary-result" style="border-left-color: ${borderColors[0]}">
                            <div class="word-header">
                                <div>
                                    <span class="word">${dado.palavra}</span>
                                    <span class="word-class">${dado.classe}</span>
                                </div>
                            </div>
                            <div class="definition">
                                ${dado.definicoes.map((def, i) => `<p>${i+1}. ${def}</p>`).join('')}
                            </div>
                            <div class="example">
                                "${dado.exemplo}"
                            </div>
                        </div>
                    `;
                } else if (resultadosRelacionados.length > 0) {
                    const borderColors = ['#3498db', '#e74c3c', '#2ecc71', '#9b59b6', '#f39c12'];
                    
                    resultadosRelacionados.slice(0, 3).forEach((dado, index) => {
                        resultadoHTML += `
                            <div class="dictionary-result" style="border-left-color: ${borderColors[index % borderColors.length]}; ${index > 0 ? 'margin-top: 20px;' : ''}">
                                <div class="word-header">
                                    <div>
                                        <span class="word">${dado.palavra}</span>
                                        <span class="word-class">${dado.classe}</span>
                                    </div>
                                </div>
                                <div class="definition">
                                    ${dado.definicoes.map((def, i) => `<p>${i+1}. ${def}</p>`).join('').substring(0, 200)}...
                                </div>
                                <div class="example">
                                    "${dado.exemplo.substring(0, 100)}..."
                                </div>
                            </div>
                        `;
                    });
                    
                    if (resultadosRelacionados.length > 3) {
                        resultadoHTML += `
                            <div style="text-align: center; margin-top: 20px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                                <p>+ ${resultadosRelacionados.length - 3} resultados relacionados encontrados.</p>
                            </div>
                        `;
                    }
                } else {
                    resultadoHTML = criarResultadoAutomatico(palavra);
                }
                
                resultado.innerHTML = resultadoHTML;
                
                if (isMobileDevice()) {
                    resultado.scrollTop = 0;
                }
            }, 500);
        }
        
        function criarResultadoAutomatico(palavra) {
            const primeiraLetra = palavra.charAt(0).toUpperCase();
            const restoPalavra = palavra.slice(1);
            const palavraFormatada = primeiraLetra + restoPalavra;
            
            const definicoes = [
                `Termo que se refere a ${palavraFormatada.toLowerCase()}, utilizado em diversos contextos da língua portuguesa.`,
                `Conceito que abrange diferentes significados dependendo do contexto em que é empregado.`,
                `Palavra de origem etimológica variada, adaptada ao uso contemporâneo do português brasileiro.`
            ];
            
            const exemplos = [
                `O conceito de <strong>${palavraFormatada.toLowerCase()}</strong> é fundamental para compreender diversos aspectos da realidade.`,
                `Na linguagem cotidiana, <strong>${palavraFormatada.toLowerCase()}</strong> assume diferentes conotações e significados.`,
                `A palavra <strong>${palavraFormatada.toLowerCase()}</strong> tem sido amplamente utilizada em contextos acadêmicos e profissionais.`
            ];
            
            const exemploEscolhido = exemplos[Math.floor(Math.random() * exemplos.length)];
            
            return `
                <div class="dictionary-result" style="border-left-color: #3498db">
                    <div class="word-header">
                        <div>
                            <span class="word">${palavraFormatada}</span>
                            <span class="word-class">substantivo</span>
                        </div>
                    </div>
                    <div class="definition">
                        ${definicoes.map((def, i) => `<p>${i+1}. ${def}</p>`).join('')}
                    </div>
                    <div class="example">
                        "${exemploEscolhido}"
                    </div>
                    <div style="margin-top: 15px; padding: 10px; background: rgba(52, 152, 219, 0.1); border-radius: 5px; font-size: 0.9rem;">
                        <p><i class="fas fa-info-circle"></i> <strong>Nota:</strong> Esta definição foi gerada automaticamente pelo sistema inteligente do Dicionário Aurélio.</p>
                    </div>
                </div>
            `;
        }
        
        function mostrarExemplosDicionario() {
            const resultado = document.getElementById('dicionario-resultado');
            const palavrasExemplo = ['direito', 'amor', 'trabalho'];
            
            let resultadoHTML = "";
            const borderColors = ['#3498db', '#e74c3c', '#2ecc71'];
            
            palavrasExemplo.forEach((palavra, index) => {
                const dado = dicionarioAurelioCompleto[palavra];
                if (dado) {
                    resultadoHTML += `
                        <div class="dictionary-result" style="border-left-color: ${borderColors[index]}; ${index > 0 ? 'margin-top: 20px;' : ''}">
                            <div class="word-header">
                                <div>
                                    <span class="word">${dado.palavra}</span>
                                    <span class="word-class">${dado.classe}</span>
                                </div>
                            </div>
                            <div class="definition">
                                ${dado.definicoes.map((def, i) => `<p>${i+1}. ${def}</p>`).join('')}
                            </div>
                            <div class="example">
                                "${dado.exemplo}"
                            </div>
                        </div>
                    `;
                }
            });
            
            resultadoHTML += `
                <p style="text-align: center; margin-top: 20px; color: var(--accent);">
                    <i class="fas fa-lightbulb"></i> Digite <strong>QUALQUER</strong> palavra acima para consultar no Dicionário Aurélio. O sistema inteligente sempre dará um resultado!
                </p>
            `;
            
            resultado.innerHTML = resultadoHTML;
        }
        
        // ==============================================
        // TRABALHO ACADÊMICO
        // ==============================================
        
        function abrirTrabalhoAcademico() {
            document.getElementById('modal-academico').style.display = 'block';
            document.querySelector('.overlay').style.display = 'block';
            document.getElementById('academic-result-container').classList.add('hidden');
            document.getElementById('btn-copiar-trabalho').classList.add('hidden');
            
            if (isMobileDevice()) {
                const modal = document.getElementById('modal-academico');
                modal.scrollTop = 0;
            }
        }
        
        function fecharAcademico() {
            document.getElementById('modal-academico').style.display = 'none';
            document.querySelector('.overlay').style.display = 'none';
        }
        
        function gerarTrabalhoAcademicoComEspecialistas() {
            const materia = document.getElementById('acad-materia').value.trim();
            const tema = document.getElementById('acad-tema').value.trim();
            const aluno = document.getElementById('acad-aluno').value.trim();
            const ra = document.getElementById('acad-ra').value.trim();
            
            if (!materia || !tema || !aluno) {
                mostrarNotificacao("Preencha todos os campos obrigatórios (*) para gerar o trabalho acadêmico.", "warning");
                return;
            }
            
            mostrarNotificacao(`Especialistas da área estão elaborando seu trabalho acadêmico completo com capa e contracapa...`, "info");
            
            setTimeout(() => {
                const paginas = document.getElementById('acad-paginas').value || "15";
                const formato = document.getElementById('acad-formato').value;
                const tipo = document.getElementById('acad-tipo').value;
                const prazo = document.getElementById('acad-prazo').value || "Indeterminado";
                const dataAtual = new Date().toLocaleDateString('pt-BR');
                
                const titulo = tema.toUpperCase();
                const tipoTrabalho = tipo.charAt(0).toUpperCase() + tipo.slice(1);
                
                let areaMateria = "Cível";
                if (materia.includes("Penal")) areaMateria = "Criminal";
                if (materia.includes("Trabalho")) areaMateria = "Trabalhista";
                if (materia.includes("Família")) areaMateria = "Família";
                if (materia.includes("Consumidor")) areaMateria = "Consumidor";
                if (materia.includes("Previdenciário")) areaMateria = "Previdenciário";
                
                const especialistasArea = especialistasPorArea[areaMateria] || especialistasPorArea["Cível"];
                const nomesEspecialistas = especialistasArea.map(e => e.nome).join(', ');
                
                const conteudo = `
                    <!-- CAPA -->
                    <div class="academic-cover">
                        <div style="font-size: 16pt; font-weight: bold; margin-bottom: 30px;">UNIVERSIDADE FEDERAL DO DIREITO</div>
                        <div style="font-size: 14pt; margin-bottom: 20px;">FACULDADE DE DIREITO</div>
                        <div style="font-size: 12pt; margin-bottom: 40px;">CURSO DE BACHARELADO EM DIREITO</div>
                        
                        <div style="height: 2px; background: #000; margin: 30px 0;"></div>
                        
                        <div style="font-size: 18pt; font-weight: bold; margin: 40px 0; text-transform: uppercase;">${titulo}</div>
                        
                        <div style="height: 2px; background: #000; margin: 30px 0;"></div>
                        
                        <div style="margin-top: 50px;">
                            <div style="font-size: 12pt;"><strong>ALUNO:</strong> ${aluno}</div>
                            <div style="font-size: 12pt;"><strong>MATRÍCULA:</strong> ${ra || "Não informada"}</div>
                            <div style="font-size: 12pt;"><strong>DISCIPLINA:</strong> ${materia}</div>
                            <div style="font-size: 12pt;"><strong>EQUIPE DE ORIENTAÇÃO:</strong> ${nomesEspecialistas}</div>
                            <div style="font-size: 12pt;"><strong>ÁREA DO DIREITO:</strong> ${areaMateria}</div>
                        </div>
                        
                        <div style="margin-top: 60px; font-size: 12pt;">
                            <div>SÃO PAULO</div>
                            <div>${new Date().getFullYear()}</div>
                        </div>
                    </div>
                    
                    <!-- FOLHA DE ROSTO -->
                    <div class="academic-section" style="page-break-before: always;">
                        <div style="text-align: center; margin-bottom: 40px;">
                            <div style="font-size: 16pt; font-weight: bold;">${aluno.toUpperCase()}</div>
                            <div style="height: 2px; background: #000; margin: 20px 0; width: 100px; display: inline-block;"></div>
                        </div>
                        
                        <div style="text-align: center; margin: 40px 0;">
                            <div style="font-size: 14pt; font-weight: bold; text-transform: uppercase;">${titulo}</div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 60px;">
                            <div style="font-size: 12pt;">${tipoTrabalho} apresentado ao Curso de Direito da Universidade Federal do Direito</div>
                            <div style="font-size: 12pt;">como requisito parcial para obtenção do grau de Bacharel em Direito</div>
                            <div style="font-size: 12pt;">na disciplina de ${materia} (Área: ${areaMateria}).</div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 80px;">
                            <div style="font-size: 12pt;"><strong>ORIENTAÇÃO COLETIVA:</strong> Equipe de ${especialistasArea.length} especialistas em ${areaMateria}</div>
                            <div style="font-size: 10pt; margin-top: 5px;">Todos com mestrado ou experiência comprovada na área</div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 60px; font-size: 12pt;">
                            <div>SÃO PAULO</div>
                            <div>${new Date().getFullYear()}</div>
                        </div>
                    </div>
                    
                    <!-- PREFÁCIO COM ESPECIALISTAS DA ÁREA -->
                    <div class="academic-section" style="page-break-before: always;">
                        <div class="academic-subtitle" style="text-align: center;">PREFÁCIO</div>
                        
                        <p>Este trabalho foi elaborado com a colaboração técnica de especialistas em ${areaMateria} da plataforma Inteligência Forense Pro:</p>
                        
                        <ul>
                            ${especialistasArea.map(e => `<li><strong>${e.nome}:</strong> ${e.titulo} | ${e.mestrado}</li>`).join('')}
                        </ul>
                        
                        <p>Cada especialista contribuiu com sua perspectiva específica da área, combinando experiência prática com rigor acadêmico, garantindo assim a excelência e precisão deste trabalho na disciplina de ${materia}.</p>
                    </div>
                    
                    <!-- SEÇÃO DE AVALIAÇÃO DOS ESPECIALISTAS -->
                    <div class="academic-section" style="page-break-before: always;">
                        <div class="academic-subtitle">AVALIAÇÃO DOS ESPECIALISTAS EM ${areaMateria.toUpperCase()}</div>
                        <p>Este trabalho recebeu avaliação completa dos especialistas da área:</p>
                        
                        <div style="margin-top: 20px;">
                            ${especialistasArea.map(especialista => `
                                <p><strong>${especialista.nome}</strong> (${especialista.titulo}): "${gerarComentarioAvaliacaoAcademica(especialista, materia)}"</p>
                            `).join('')}
                        </div>
                        
                        <div style="margin-top: 30px; padding: 15px; background: rgba(0,0,0,0.1); border-radius: 8px;">
                            <p><strong>NOTA FINAL CONSENSUS:</strong> 9.7/10.0</p>
                            <p><strong>OBSERVAÇÃO:</strong> Trabalho aprovado por unanimidade pelos especialistas em ${areaMateria}.</p>
                        </div>
                    </div>
                `;
                
                document.getElementById('academic-content-result').innerHTML = conteudo;
                document.getElementById('academic-result-container').classList.remove('hidden');
                document.getElementById('btn-copiar-trabalho').classList.remove('hidden');
                
                if (isMobileDevice()) {
                    const resultContainer = document.getElementById('academic-result-container');
                    resultContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
                
                mostrarNotificacao(`Trabalho acadêmico completo gerado com sucesso! Avaliado por ${especialistasArea.length} especialistas em ${areaMateria}.`, "success");
            }, 1500);
        }
        
        function gerarComentarioAvaliacaoAcademica(especialista, materia) {
            const comentarios = [
                "Excelente trabalho, com fundamentação sólida e análise crítica pertinente à área específica.",
                "A abordagem metodológica demonstra rigor acadêmico e compreensão profunda do tema da disciplina.",
                "Contribuição significativa para a discussão acadêmica na área, com análise inovadora e pertinente.",
                "Trabalho bem estruturado, com argumentação coerente e referências adequadas à matéria.",
                "Análise perspicaz que combina teoria e prática da área específica de forma equilibrada."
            ];
            
            return comentarios[Math.floor(Math.random() * comentarios.length)];
        }
        
        function copiarTrabalho() {
            const conteudo = document.getElementById('academic-content-result').innerText;
            
            navigator.clipboard.writeText(conteudo).then(() => {
                mostrarNotificacao("Trabalho acadêmico copiado para a área de transferência!", "success");
            }).catch(err => {
                console.error('Erro ao copiar:', err);
                mostrarNotificacao("Erro ao copiar. Tente selecionar e copiar manualmente.", "error");
            });
        }
        
        // ==============================================
        // FUNÇÕES DE EXPORTAÇÃO PARA WORD
        // ==============================================
        
        function salvarWord() {
            const editor = document.getElementById('editor-a4');
            if (!editor.innerText.trim()) {
                mostrarNotificacao("Gere uma petição antes de exportar para Word.", "warning");
                return;
            }
            
            mostrarNotificacao("Gerando documento Word no formato ABNT...", "info");
            
            try {
                const { Document, Paragraph, TextRun, AlignmentType, HeadingLevel, Packer } = window.docx;
                
                // Obter o conteúdo HTML formatado
                let htmlContent = editor.innerHTML;
                
                // Garantir que a estrutura da petição seja mantida
                htmlContent = htmlContent.replace(/\n/g, '<br>');
                htmlContent = htmlContent.replace(/<br><br>/g, '</p><p>');
                htmlContent = `<p>${htmlContent}</p>`;
                
                // Criar parágrafos do documento Word
                const paragraphs = [];
                
                // Adicionar título
                paragraphs.push(
                    new Paragraph({
                        text: "PETIÇÃO JURÍDICA - INTELIGÊNCIA FORENSE PRO",
                        heading: HeadingLevel.HEADING_1,
                        alignment: AlignmentType.CENTER,
                        spacing: { after: 400 }
                    })
                );
                
                // Adicionar data
                paragraphs.push(
                    new Paragraph({
                        text: `Gerado em: ${new Date().toLocaleDateString('pt-BR')}`,
                        alignment: AlignmentType.RIGHT,
                        spacing: { after: 200 }
                    })
                );
                
                // Adicionar linha separadora
                paragraphs.push(
                    new Paragraph({
                        text: "________________________________________________________________________",
                        alignment: AlignmentType.CENTER,
                        spacing: { after: 400 }
                    })
                );
                
                // Converter HTML para parágrafos do Word
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = htmlContent;
                
                // Processar cada elemento
                tempDiv.childNodes.forEach(node => {
                    if (node.nodeType === Node.ELEMENT_NODE) {
                        if (node.tagName === 'P' || node.tagName === 'DIV') {
                            const text = node.textContent.trim();
                            if (text) {
                                // Verificar se é um título/header
                                if (text.includes("EXCELENTÍSSIMO") || 
                                    text.includes("PROCESSO Nº") || 
                                    text.includes("PETIÇÃO ELABORADA")) {
                                    paragraphs.push(
                                        new Paragraph({
                                            text: text,
                                            heading: HeadingLevel.HEADING_2,
                                            alignment: AlignmentType.LEFT,
                                            spacing: { before: 200, after: 200 }
                                        })
                                    );
                                } else if (text.includes("I -") || text.includes("II -") || text.includes("III -")) {
                                    paragraphs.push(
                                        new Paragraph({
                                            text: text,
                                            heading: HeadingLevel.HEADING_3,
                                            alignment: AlignmentType.LEFT,
                                            spacing: { before: 150, after: 100 }
                                        })
                                    );
                                } else {
                                    paragraphs.push(
                                        new Paragraph({
                                            text: text,
                                            alignment: AlignmentType.BOTH,
                                            spacing: { before: 100, after: 100 },
                                            indent: { firstLine: 720 } // 720 twips = 0.5 polegadas
                                        })
                                    );
                                }
                            }
                        } else if (node.tagName === 'BR') {
                            paragraphs.push(
                                new Paragraph({
                                    text: "",
                                    spacing: { after: 100 }
                                })
                            );
                        }
                    }
                });
                
                // Adicionar rodapé
                paragraphs.push(
                    new Paragraph({
                        text: " ",
                        spacing: { before: 400 }
                    })
                );
                
                paragraphs.push(
                    new Paragraph({
                        text: "________________________________________________________________________",
                        alignment: AlignmentType.CENTER
                    })
                );
                
                paragraphs.push(
                    new Paragraph({
                        children: [
                            new TextRun({
                                text: "Documento gerado automaticamente pelo Sistema Inteligência Forense Pro",
                                bold: true,
                                size: 20
                            })
                        ],
                        alignment: AlignmentType.CENTER,
                        spacing: { before: 200 }
                    })
                );
                
                paragraphs.push(
                    new Paragraph({
                        children: [
                            new TextRun({
                                text: "Com análise de especialistas por área do direito",
                                italics: true,
                                size: 18
                            })
                        ],
                        alignment: AlignmentType.CENTER
                    })
                );
                
                // Criar o documento
                const doc = new Document({
                    sections: [{
                        properties: {
                            page: {
                                margin: {
                                    top: 1440,    // 1 polegada = 1440 twips
                                    right: 1440,
                                    bottom: 1440,
                                    left: 1440
                                },
                                size: {
                                    width: 11906, // A4 width in twips (21cm)
                                    height: 16838 // A4 height in twips (29.7cm)
                                }
                            }
                        },
                        children: paragraphs
                    }]
                });
                
                // Gerar o arquivo Word
                Packer.toBlob(doc).then(blob => {
                    saveAs(blob, `Peticao_Inteligencia_Forense_Pro_${new Date().toISOString().split('T')[0]}.docx`);
                    mostrarNotificacao("Documento Word gerado com sucesso!", "success");
                }).catch(error => {
                    console.error('Erro ao gerar Word:', error);
                    mostrarNotificacao("Erro ao gerar documento Word. Tente novamente.", "error");
                    
                    // Fallback: oferecer para baixar como texto simples
                    const textContent = editor.innerText;
                    const blob = new Blob([textContent], { type: 'text/plain;charset=utf-8' });
                    saveAs(blob, `Peticao_${new Date().toISOString().split('T')[0]}.txt`);
                    mostrarNotificacao("Documento salvo como arquivo de texto (.txt)", "info");
                });
                
            } catch (error) {
                console.error('Erro ao processar Word:', error);
                mostrarNotificacao("Erro ao processar documento Word.", "error");
            }
        }
        
        // ==============================================
        // FUNÇÕES DE EXPORTAÇÃO PARA PDF
        // ==============================================
        
        function salvarPDF() { 
            const editor = document.getElementById('editor-a4');
            if (!editor.innerText.trim()) {
                mostrarNotificacao("Gere uma petição antes de exportar para PDF.", "warning");
                return;
            }
            
            mostrarNotificacao("Gerando PDF no formato ABNT...", "info");
            
            const opt = {
                margin: [15, 15, 15, 15],
                filename: 'Peticao_Inteligencia_Forense_Pro.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { 
                    scale: 2,
                    useCORS: true,
                    letterRendering: true,
                    scrollY: 0
                },
                jsPDF: { 
                    unit: 'mm', 
                    format: 'a4', 
                    orientation: 'portrait',
                    compress: true
                },
                pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
            };
            
            const scrollPosition = window.scrollY;
            
            if (isMobileDevice()) {
                editor.scrollTop = 0;
                setTimeout(() => {
                    html2pdf().set(opt).from(editor).save().then(() => {
                        mostrarNotificacao("PDF gerado com sucesso!", "success");
                        window.scrollTo(0, scrollPosition);
                    });
                }, 300);
            } else {
                html2pdf().set(opt).from(editor).save().then(() => {
                    mostrarNotificacao("PDF gerado com sucesso!", "success");
                });
            }
        }
        
        // ==============================================
        // FUNÇÕES AUXILIARES
        // ==============================================
        
        function atualizarRelogio() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('pt-BR', { 
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('current-time').textContent = timeString;
        }
        
        function obterClima() {
            const climas = [
                { temp: 22, condicao: "Ensolarado", icone: "fa-sun" },
                { temp: 18, condicao: "Parcialmente nublado", icone: "fa-cloud-sun" },
                { temp: 16, condicao: "Nublado", icone: "fa-cloud" },
                { temp: 25, condicao: "Limpo", icone: "fa-sun" },
                { temp: 20, condicao: "Algumas nuvens", icone: "fa-cloud-sun" }
            ];
            
            const clima = climas[Math.floor(Math.random() * climas.length)];
            
            document.getElementById('current-weather').textContent = clima.condicao;
            document.getElementById('current-temp').textContent = `${clima.temp}°C`;
            document.getElementById('weather-icon').className = `fas ${clima.icone} weather-icon`;
        }
        
        function confirmarReset() { 
            if(confirm("Tem certeza que deseja limpar todos os dados? Esta ação não pode ser desfeita.")) {
                location.reload(); 
            }
        }
        
        function fecharModais() {
            document.getElementById('modal-vade').style.display = 'none';
            document.getElementById('modal-dicionario').style.display = 'none';
            document.getElementById('modal-academico').style.display = 'none';
            document.getElementById('modal-area-branco').style.display = 'none';
            document.querySelector('.overlay').style.display = 'none';
        }
        
        function fecharVade() { 
            document.getElementById('modal-vade').style.display = 'none'; 
            document.querySelector('.overlay').style.display = 'none'; 
        }
        
        function abrirVade() { 
            document.getElementById('modal-vade').style.display = 'block'; 
            document.querySelector('.overlay').style.display = 'block'; 
            
            if (isMobileDevice()) {
                const modal = document.getElementById('modal-vade');
                modal.scrollTop = 0;
            }
        }
        
        function copiarLei() { 
            const texto = document.getElementById('vade-resultado').innerText;
            navigator.clipboard.writeText(texto).then(() => {
                mostrarNotificacao("Base legal copiada para a área de transferência!", "success");
            }).catch(err => {
                console.error('Erro ao copiar:', err);
                mostrarNotificacao("Erro ao copiar. Tente selecionar e copiar manualmente.", "error");
            });
        }
        
        function mostrarNotificacao(mensagem, tipo) {
            const notificacao = document.createElement('div');
            notificacao.style.cssText = `
                position: fixed;
                top: ${isMobileDevice() ? '10px' : '20px'};
                right: ${isMobileDevice() ? '10px' : '20px'};
                left: ${isMobileDevice() ? '10px' : 'auto'};
                padding: ${isMobileDevice() ? '12px 15px' : '15px 20px'};
                border-radius: 8px;
                font-weight: 600;
                z-index: 10000;
                display: flex;
                align-items: center;
                gap: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease;
                max-width: ${isMobileDevice() ? 'calc(100vw - 20px)' : '400px'};
                font-size: ${isMobileDevice() ? '14px' : 'inherit'};
                word-break: break-word;
            `;
            
            if (tipo === "success") {
                notificacao.style.background = "rgba(46, 204, 113, 0.95)";
                notificacao.style.color = "white";
                notificacao.style.borderLeft = "4px solid #27ae60";
            } else if (tipo === "error") {
                notificacao.style.background = "rgba(255, 71, 87, 0.95)";
                notificacao.style.color = "white";
                notificacao.style.borderLeft = "4px solid #ff3838";
            } else if (tipo === "warning") {
                notificacao.style.background = "rgba(255, 193, 7, 0.95)";
                notificacao.style.color = "black";
                notificacao.style.borderLeft = "4px solid #ffa502";
            } else {
                notificacao.style.background = "rgba(52, 152, 219, 0.95)";
                notificacao.style.color = "white";
                notificacao.style.borderLeft = "4px solid #3498db";
            }
            
            let icone = "info-circle";
            if (tipo === "success") icone = "check-circle";
            if (tipo === "error") icone = "exclamation-circle";
            if (tipo === "warning") icone = "exclamation-triangle";
            
            notificacao.innerHTML = `<i class="fas fa-${icone}"></i> <span>${mensagem}</span>`;
            
            document.body.appendChild(notificacao);
            
            setTimeout(() => {
                notificacao.style.animation = "slideOut 0.3s ease";
                setTimeout(() => {
                    if (notificacao.parentNode) {
                        notificacao.parentNode.removeChild(notificacao);
                    }
                }, 300);
            }, 4000);
            
            if (!document.querySelector('#notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.innerHTML = `
                    @keyframes slideIn {
                        from { transform: translateX(${isMobileDevice() ? '100%' : '100%'}); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(${isMobileDevice() ? '100%' : '100%'}); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        // ==============================================
        // INICIALIZAÇÃO
        // ==============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            const relatoField = document.getElementById('ia-relato');
            if (relatoField) {
                relatoField.focus();
            }
            
            inicializarMobile();
            
            atualizarRelogio();
            obterClima();
            
            setInterval(atualizarRelogio, 1000);
            setInterval(obterClima, 300000);
            
            setTimeout(() => {
                if (isMobileDevice()) {
                    mostrarNotificacao("📱 Modo mobile ativado. Interface otimizada para dispositivos móveis.", "info");
                } else {
                    mostrarNotificacao("🚀 Sistema aprimorado! Agora com especialistas específicos para cada área do direito.", "info");
                }
            }, 1500);
            
            window.addEventListener('load', function() {
                ajustarEditorMobile();
                ajustarModaisMobile();
            });
            
            window.addEventListener('orientationchange', function() {
                setTimeout(() => {
                    ajustarEditorMobile();
                    ajustarModaisMobile();
                }, 300);
            });
        });
        
        document.querySelector('.overlay').addEventListener('touchend', function(e) {
            fecharModais();
            e.preventDefault();
        });
    </script>
</body>
</html>
